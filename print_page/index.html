
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WIS2 in a box (wis2box) is a Free and Open Source (FOSS) Reference Implementation of a WMO WIS2 Node. The project provides a plug and play toolset to ingest, process, and publish weather/climate/water data using standards-based approaches in alignment with the WIS2 principles. wis2box also provides access to all data in the WIS2 network. wis2box is designed to have a low barrier to entry for data providers, providing enabling infrastructure and services for data discovery, access, and visualization.">
      
      
        <meta name="author" content="World Meteorological Organization">
      
      
        <link rel="canonical" href="https://amrabouelenin.github.io/wis2docs/print_page/">
      
      
      
      
      <link rel="icon" href="https://public.wmo.int/sites/all/themes/wmo/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Print Site - WIS2 in a box training</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
      <link rel="stylesheet" href="../assets/css/custom.css">
    
    <script>__md_scope=new URL("/wis2docs/",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#es" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../es/" title="WIS2 in a box training" class="md-header__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../assets/img/wmo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WIS2 in a box training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print Site
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Seleccionar idioma">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../practical-sessions/querying-data-using-the-wis2box-api/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../ru/practical-sessions/querying-data-using-the-wis2box-api/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../es/practical-sessions/querying-data-using-the-wis2box-api/" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../es/" title="WIS2 in a box training" class="md-nav__button md-logo" aria-label="WIS2 in a box training" data-md-component="logo">
      
  <img src="../assets/img/wmo-logo.png" alt="logo">

    </a>
    WIS2 in a box training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Sesiones prácticas
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Sesiones prácticas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/connecting-to-wis2-over-mqtt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conexión a WIS2 a través de MQTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/accessing-your-student-vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Acceso a su VM de estudiante
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/initializing-wis2box/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicialización de wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/configuring-wis2box-datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring datasets in wis2box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/configuring-station-metadata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring station metadata
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/monitoring-wis2-notifications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring WIS2 notifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/converting-synop-data-to-bufr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Converting SYNOP data to BUFR from the command line
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/converting-synop-data-to-bufr-form/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Converting SYNOP data to BUFR using the wis2box-webapp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/converting-csv-data-to-bufr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Converting CSV data to BUFR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/automating-data-ingestion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Automating data ingestion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/adding-gts-headers-to-wis2-notifications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adding GTS-headers to WIS2 notifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/datasets-with-access-control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setting up a recommended dataset with access control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/downloading-data-from-wis2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Downloading data from WIS2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/discovering-datasets-from-wis2-gdc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Discovering datasets from the WIS2 Global Discovery Catalogue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/practical-sessions/querying-data-using-the-wis2box-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Querying data using the wis2box API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Hojas de trucos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Hojas de trucos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/cheatsheets/linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/cheatsheets/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/cheatsheets/wis2box/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WIS2 in a box
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Plantillas csv2bufr
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Plantillas csv2bufr
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/csv2bufr-templates/aws-template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS hourly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../es/csv2bufr-templates/daycli-template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DAYCLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#es" class="md-nav__link">
    <span class="md-ellipsis">
      1 Inicio
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-2" class="md-nav__link">
    <span class="md-ellipsis">
      2 Sesiones prácticas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 Sesiones prácticas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-connecting-to-wis2-over-mqtt" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Conexión a WIS2 a través de MQTT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-accessing-your-student-vm" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Acceso a su VM de estudiante
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-initializing-wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Inicialización de wis2box
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-configuring-wis2box-datasets" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 Configuring datasets in wis2box
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-configuring-station-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 Configuring station metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-monitoring-wis2-notifications" class="md-nav__link">
    <span class="md-ellipsis">
      2.6 Monitoring WIS2 notifications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-converting-synop-data-to-bufr" class="md-nav__link">
    <span class="md-ellipsis">
      2.7 Converting SYNOP data to BUFR from the command line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-converting-synop-data-to-bufr-form" class="md-nav__link">
    <span class="md-ellipsis">
      2.8 Converting SYNOP data to BUFR using the wis2box-webapp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-converting-csv-data-to-bufr" class="md-nav__link">
    <span class="md-ellipsis">
      2.9 Converting CSV data to BUFR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-automating-data-ingestion" class="md-nav__link">
    <span class="md-ellipsis">
      2.10 Automating data ingestion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-adding-gts-headers-to-wis2-notifications" class="md-nav__link">
    <span class="md-ellipsis">
      2.11 Adding GTS-headers to WIS2 notifications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-datasets-with-access-control" class="md-nav__link">
    <span class="md-ellipsis">
      2.12 Setting up a recommended dataset with access control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-downloading-data-from-wis2" class="md-nav__link">
    <span class="md-ellipsis">
      2.13 Downloading data from WIS2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-discovering-datasets-from-wis2-gdc" class="md-nav__link">
    <span class="md-ellipsis">
      2.14 Discovering datasets from the WIS2 Global Discovery Catalogue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-practical-sessions-querying-data-using-the-wis2box-api" class="md-nav__link">
    <span class="md-ellipsis">
      2.15 Querying data using the wis2box API
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-3" class="md-nav__link">
    <span class="md-ellipsis">
      3 Hojas de trucos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 Hojas de trucos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#es-cheatsheets-linux" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-cheatsheets-docker" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Docker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-cheatsheets-wis2box" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 WIS2 in a box
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-4" class="md-nav__link">
    <span class="md-ellipsis">
      4 Plantillas csv2bufr
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 Plantillas csv2bufr">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#es-csv2bufr-templates-aws-template" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 AWS hourly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es-csv2bufr-templates-daycli-template" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 DAYCLI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="es" heading-number="1"><p><img alt="Logotipo de la OMM" src="../assets/img/wmo-logo.png" width="200"></p>
<h1 id="es-entrenamiento-de-wis2-in-a-box">Entrenamiento de "WIS2-in-a-box"</h1>
<p>"WIS2-in-a-box" (<a href="https://docs.wis2box.wis.wmo.int">wis2box</a>) es una Implementación de Referencia de Código Abierto (FOSS) y gratuita de un Nodo WMO WIS2. El proyecto proporciona un conjunto de herramientas plug and play para ingerir, procesar y publicar datos meteorológicos/climáticos/hidrológicos utilizando enfoques basados en estándares alineados con los principios de WIS2. wis2box también proporciona acceso a todos los datos en la red de WIS2. wis2box está diseñado para tener una barrera de entrada baja para los proveedores de datos, ofreciendo infraestructura y servicios habilitadores para la búsqueda, acceso y visualización de datos.</p>
<p>Este entrenamiento proporciona explicaciones paso a paso de varios aspectos del proyecto wis2box, así como una serie de ejercicios para ayudarte a publicar y descargar datos de WIS2. El entrenamiento se proporciona en forma de presentaciones generales y también de ejercicios prácticos.</p>
<p>Los participantes podrán trabajar con datos de prueba y metadatos, así como integrar sus propios datos y metadatos.</p>
<p>Este entrenamiento cubre una amplia gama de temas (instalación/configuración, publicación/descarga de datos, etc.).</p>
<h2 id="es-objetivos-y-resultados-de-aprendizaje">Objetivos y resultados de aprendizaje</h2>
<p>Los objetivos de este entrenamiento son familiarizarse con lo siguiente:</p>
<ul>
<li>Conceptos y componentes centrales de la arquitectura de WIS2</li>
<li>Formatos de datos y metadatos utilizados en WIS2 para descubrimiento y acceso</li>
<li>Arquitectura y entorno de wis2box</li>
<li>Funciones principales de wis2box:<ul>
<li>Gestión de metadatos</li>
<li>Ingesta de datos y transformación al formato BUFR</li>
<li>Broker MQTT para la publicación de mensajes de WIS2</li>
<li>Punto final HTTP para descarga de datos</li>
<li>Punto final de API para acceso programático a datos</li>
</ul>
</li>
</ul>
<h2 id="es-navegacion">Navegación</h2>
<p>La navegación a la izquierda proporciona una tabla de contenido para todo el entrenamiento.</p>
<p>La navegación a la derecha proporciona una tabla de contenido para una página específica.</p>
<h2 id="es-requisitos-previos">Requisitos previos</h2>
<h3 id="es-conocimientos">Conocimientos</h3>
<ul>
<li>Comandos básicos de Linux (consulta la <a href="#es-cheatsheets-linux">hoja de trucos</a>)</li>
<li>Conocimientos básicos de redes y protocolos de Internet</li>
</ul>
<h3 id="es-software">Software</h3>
<p>Este entrenamiento requiere las siguientes herramientas:</p>
<ul>
<li>Una instancia que ejecute el sistema operativo Ubuntu (proporcionado por los instructores de la OMM durante las sesiones de entrenamiento locales) consulta <a href="#es-practical-sessions-accessing-your-student-vm-introduction">Accediendo a tu VM de estudiante</a></li>
<li>Cliente SSH para acceder a tu instancia</li>
<li>Explorador MQTT en tu máquina local</li>
<li>Cliente SCP y FTP para copiar archivos desde tu máquina local</li>
</ul>
<h2 id="es-convenciones">Convenciones</h2>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Una sección marcada de esta manera te invita a responder una pregunta.</p>
</div>
<p>También notarás secciones de consejos y notas dentro del texto:</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Los consejos ofrecen ayuda sobre cómo lograr mejor las tareas.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Las notas proporcionan información adicional sobre el tema cubierto por la sesión práctica, así como la mejor manera de lograr tareas.</p>
</div>
<p>Los ejemplos se indican de la siguiente manera:</p>
<p>Configuración
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">mi-colección-definida-en-yaml</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">collection</span>
<span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mi título definido como un atributo yaml llamado title</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mi descripción como un atributo yaml llamado description</span>
</code></pre></div></td></tr></table></div></p>
<p>Fragmentos que deben escribirse en una terminal/consola se indican como:</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;Hello world&#39;</span>
</code></pre></div>
<p>Los nombres de los contenedores (imágenes en ejecución) se indican en <strong>negrita</strong>.</p>
<h2 id="es-ubicacion-y-materiales-de-entrenamiento">Ubicación y materiales de entrenamiento</h2>
<p>Los contenidos del entrenamiento, la wiki y el rastreador de problemas son gestionados en GitHub en <a href="https://github.com/wmo-im/wis2box-training">https://github.com/wmo-im/wis2box-training</a>.</p>
<h2 id="es-imprimir-el-material">Imprimir el material</h2>
<p>Este entrenamiento se puede exportar a PDF. Para guardar o imprimir este material de entrenamiento, ve a la <a href="#es-print_page">página de impresión</a> y selecciona Archivo &gt; Imprimir &gt; Guardar como PDF.</p>
<h2 id="es-materiales-de-ejercicio">Materiales de ejercicio</h2>
<p>Los materiales de ejercicio se pueden descargar desde el archivo <a href="/exercise-materials.zip">exercise-materials.zip</a> zipfile.</p>
<h2 id="es-soporte">Soporte</h2>
<p>Para problemas/errores/sugerencias o mejoras/contribuciones a este entrenamiento, utiliza el <a href="https://github.com/wmo-im/wis2box-training/issues">rastreador de problemas de GitHub</a>.</p>
<p>Todos los errores, mejoras y problemas de wis2box se pueden reportar en <a href="https://github.com/wmo-im/wis2box/issues">GitHub</a>.</p>
<p>Para soporte adicional o preguntas, por favor contacta a wis@wmo.int.</p>
<p>Como siempre, la documentación principal de wis2box siempre se puede encontrar en <a href="https://docs.wis2box.wis.wmo.int">https://docs.wis2box.wis.wmo.int</a>.</p>
<p>¡Las contribuciones siempre son alentadas y bienvenidas!</p></section>
                    <section class='print-page md-section' id='section-2' heading-number='2'>
                        <h1>Sesiones prácticas<a class='headerlink' href='#section-2' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="es-practical-sessions-connecting-to-wis2-over-mqtt" heading-number="2.1"><h1 id="es-practical-sessions-connecting-to-wis2-over-mqtt-conexion-a-wis2-a-traves-de-mqtt">Conexión a WIS2 a través de MQTT</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje</p>
<p>Al final de esta sesión práctica, podrás:</p>
<ul>
<li>conectarte al Broker Global de WIS2 utilizando MQTT Explorer</li>
<li>revisar la estructura de tópicos de WIS2</li>
<li>revisar la estructura de mensajes de notificación de WIS2</li>
</ul>
</div>
<h2 id="es-practical-sessions-connecting-to-wis2-over-mqtt-introduccion">Introducción</h2>
<p>WIS2 utiliza el protocolo MQTT para anunciar la disponibilidad de datos de clima/agua. El Broker Global de WIS2 se suscribe a todos los Nodos WIS2 en la red y republica los mensajes que recibe. El Cache Global se suscribe al Broker Global, descarga los datos en el mensaje y luego republica el mensaje en el tópico <code>cache</code> con una nueva URL. El Catálogo de Descubrimiento Global publica metadatos de descubrimiento desde el Broker y proporciona una API de búsqueda.</p>
<p>Este es un ejemplo de la estructura de mensaje de notificación de WIS2 para un mensaje recibido en el tópico <code>origin/a/wis2/br-inmet/data/core/weather/surface-based-observations/synop</code>:   </p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;59f9b013-c4b3-410a-a52d-fff18f3f1b47&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;v04&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;geometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;coordinates&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="mf">-38.69389</span><span class="p">,</span>
<span class="w">      </span><span class="mf">-17.96472</span><span class="p">,</span>
<span class="w">      </span><span class="mi">60</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Point&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;data_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;br-inmet/data/core/weather/surface-based-observations/synop/WIGOS_0-76-2-2900801000W83499_20240815T060000&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;datetime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-08-15T06:00:00Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;pubtime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-08-15T09:52:02Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;integrity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sha512&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TBuWycx/G0lIiTo47eFPBViGutxcIyk7eikppAKPc4aHgOmTIS5Wb9+0v3awMOyCgwpFhTruRRCVReMQMp5kYw==&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;encoding&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;base64&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;QlVGUgAA+gQAABYAACsAAAAAAAIAHAAH6AgPBgAAAAALAAABgMGWx1AAAM0ABOIAAAODM0OTkAAAAAAAAAAAAAAKb5oKEpJ6YkJ6mAAAAAAAAAAAAAAAAv0QeYA29WQa87ZhH4CQP//z+P//BD////+ASznXuUb///8MgAS3/////8X///e+AP////AB/+R/yf////////////////////6/1/79H/3///gEt////////4BLP6QAf/+/pAB//4H0YJ/YeAh/f2///7TH/////9+j//f///////////////////v0f//////////////////////wNzc3Nw==&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;wigos_station_identifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0-76-2-2900801000W83499&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;links&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;rel&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;canonical&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;application/bufr&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://wis2bra.inmet.gov.br/data/2024-08-15/wis/br-inmet/data/core/weather/surface-based-observations/synop/WIGOS_0-76-2-2900801000W83499_20240815T060000.bufr4&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;length&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>En esta sesión práctica aprenderás a usar la herramienta MQTT Explorer para configurar una conexión de cliente MQTT a un Broker Global de WIS2 y podrás visualizar mensajes de notificación de WIS2.</p>
<p>MQTT Explorer es una herramienta útil para explorar y revisar la estructura de tópicos para un broker MQTT dado y revisar los datos que se están publicando.</p>
<p>Ten en cuenta que MQTT se utiliza principalmente para la comunicación "máquina a máquina"; lo que significa que normalmente habría un cliente que analiza automáticamente los mensajes a medida que se reciben. Para trabajar con MQTT programáticamente (por ejemplo, en Python), puedes usar bibliotecas de clientes MQTT como <a href="https://pypi.org/project/paho-mqtt">paho-mqtt</a> para conectarte a un broker MQTT y procesar mensajes entrantes. Existen numerosos software de cliente y servidor MQTT, dependiendo de tus requisitos y entorno técnico.</p>
<h2 id="es-practical-sessions-connecting-to-wis2-over-mqtt-usando-mqtt-explorer-para-conectarte-al-broker-global">Usando MQTT Explorer para conectarte al Broker Global</h2>
<p>Para ver mensajes publicados por un Broker Global de WIS2 puedes usar "MQTT Explorer" que se puede descargar desde el <a href="https://mqtt-explorer.com">sitio web de MQTT Explorer</a>.</p>
<p>Abre MQTT Explorer y agrega una nueva conexión al Broker Global alojado por MeteoFrance usando los siguientes detalles:</p>
<ul>
<li>host: globalbroker.meteo.fr</li>
<li>puerto: 8883</li>
<li>usuario: everyone</li>
<li>contraseña: everyone</li>
</ul>
<p><img alt="mqtt-explorer-global-broker-connection" src="../es/assets/img/mqtt-explorer-global-broker-connection.png" width="800"></p>
<p>Haz clic en el botón 'ADVANCED', elimina los tópicos preconfigurados y agrega los siguientes tópicos para suscribirte:</p>
<ul>
<li><code>origin/a/wis2/#</code></li>
</ul>
<p><img alt="mqtt-explorer-global-broker-advanced" src="../es/assets/img/mqtt-explorer-global-broker-sub-origin.png" width="800"></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Al configurar suscripciones MQTT puedes usar los siguientes comodines:</p>
<ul>
<li><strong>Comodín de un nivel (+)</strong>: un comodín de un nivel reemplaza un nivel de tópico</li>
<li><strong>Comodín de múltiples niveles (#)</strong>: un comodín de múltiples niveles reemplaza varios niveles de tópicos</li>
</ul>
<p>En este caso <code>origin/a/wis2/#</code> se suscribirá a todos los tópicos bajo el tópico <code>origin/a/wis2</code>.</p>
</div>
<p>Haz clic en 'BACK', luego en 'SAVE' para guardar tus detalles de conexión y suscripción. Luego haz clic en 'CONNECT':</p>
<p>Los mensajes deberían comenzar a aparecer en tu sesión de MQTT Explorer como sigue:</p>
<p><img alt="mqtt-explorer-global-broker-topics" src="../es/assets/img/mqtt-explorer-global-broker-msg-origin.png" width="800"></p>
<p>Ahora estás listo para comenzar a explorar los tópicos y la estructura de mensajes de WIS2.</p>
<h2 id="es-practical-sessions-connecting-to-wis2-over-mqtt-ejercicio-1-revisar-la-estructura-de-topicos-de-wis2">Ejercicio 1: Revisar la estructura de tópicos de WIS2</h2>
<p>Usa MQTT para explorar la estructura de tópicos bajo los tópicos <code>origin</code>.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cómo podemos distinguir el centro WIS que publicó los datos?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Puedes hacer clic en la ventana del lado izquierdo en MQTT Explorer para expandir la estructura de tópicos.</p>
<p>Podemos distinguir el centro WIS que publicó los datos mirando el cuarto nivel de la estructura de tópicos. Por ejemplo, el siguiente tópico:</p>
<p><code>origin/a/wis2/br-inmet/data/core/weather/surface-based-observations/synop</code></p>
<p>nos dice que los datos fueron publicados por un centro WIS con el id de centro <code>br-inmet</code>, que es el id de centro para el Instituto Nacional de Meteorología - INMET, Brasil.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cómo podemos distinguir entre los mensajes publicados por los centros WIS que albergan una puerta de enlace de GTS a WIS2 y los mensajes publicados por los centros WIS que albergan un nodo WIS2?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Podemos distinguir los mensajes provenientes de la puerta de enlace de GTS a WIS2 mirando el id de centro en la estructura del tópico. Por ejemplo, el siguiente tópico:</p>
<p><code>origin/a/wis2/de-dwd-gts-to-wis2/data/core/I/S/A/I/01/sbbr</code></p>
<p>nos dice que los datos fueron publicados por la puerta de enlace de GTS a WIS2 alojada por el Servicio Meteorológico Alemán (DWD), Alemania. La puerta de enlace de GTS a WIS2 es un tipo especial de publicador de datos que publica datos del Sistema Global de Telecomunicaciones (GTS) a WIS2. La estructura del tópico está compuesta por los encabezados TTAAii CCCC para los mensajes GTS.</p>
</details>
<h2 id="es-practical-sessions-connecting-to-wis2-over-mqtt-ejercicio-2-revisar-la-estructura-de-mensajes-de-wis2">Ejercicio 2: Revisar la estructura de mensajes de WIS2</h2>
<p>Desconéctate de MQTT Explorer y actualiza las secciones 'Advanced' para cambiar la suscripción a los siguientes:</p>
<ul>
<li><code>origin/a/wis2/+/data/core/weather/surface-based-observations/synop</code></li>
<li><code>cache/a/wis2/+/data/core/weather/surface-based-observations/synop</code></li>
</ul>
<p><img alt="mqtt-explorer-global-broker-topics-exercise2" src="../es/assets/img/mqtt-explorer-global-broker-sub-origin-cache-synop.png" width="800"></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>El comodín <code>+</code> se utiliza para suscribirse a todos los centros WIS.</p>
</div>
<p>Reconéctate al Broker Global y espera a que aparezcan los mensajes.</p>
<p>Puedes ver el contenido del mensaje de WIS2 en la sección "Value" en el lado derecho. Intenta expandir la estructura del tópico para ver los diferentes niveles del mensaje hasta llegar al último nivel y revisa el contenido del mensaje de uno de los mensajes.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cómo podemos identificar la marca de tiempo en que se publicaron los datos? ¿Y cómo podemos identificar la marca de tiempo en que se recopilaron los datos?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>La marca de tiempo en que se publicaron los datos está contenida en la sección <code>properties</code> del mensaje con una clave de <code>pubtime</code>.</p>
<p>La marca de tiempo en que se recopilaron los datos está contenida en la sección <code>properties</code> del mensaje con una clave de <code>datetime</code>.</p>
<p><img alt="mqtt-explorer-global-broker-msg-properties" src="../es/assets/img/mqtt-explorer-global-broker-msg-properties.png" width="800"></p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cómo podemos descargar los datos desde la URL proporcionada en el mensaje?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>La URL está contenida en la sección <code>links</code> con <code>rel="canonical"</code> y definida por la clave <code>href</code>.</p>
<p>Puedes copiar la URL y pegarla en un navegador web para descargar los datos.</p>
</details>
<h2 id="es-practical-sessions-connecting-to-wis2-over-mqtt-ejercicio-3-revisar-la-diferencia-entre-los-topicos-origin-y-cache">Ejercicio 3: Revisar la diferencia entre los tópicos 'origin' y 'cache'</h2>
<p>Asegúrate de seguir conectado al Broker Global usando las suscripciones de tópicos <code>origin/a/wis2/+/data/core/weather/surface-based-observations/synop</code> y <code>cache/a/wis2/+/data/core/weather/surface-based-observations/synop</code> como se describió en el Ejercicio 2.</p>
<p>Intenta identificar un mensaje para el mismo id de centro publicado tanto en los tópicos <code>origin</code> como <code>cache</code>.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuál es la diferencia entre los mensajes publicados en los tópicos <code>origin</code> y <code>cache</code>?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Los mensajes publicados en los tópicos <code>origin</code> son los mensajes originales que el Broker Global republica de los Nodos WIS2 en la red. </p>
<p>Los mensajes publicados en los tópicos <code>cache</code> son los mensajes para los datos que han sido descargados por el Cache Global. Si revisas el contenido del mensaje del tópico que comienza con <code>cache</code>, verás que el enlace 'canonical' ha sido actualizado a una nueva URL.</p>
<p>Hay múltiples Caches Globales en la red WIS2, por lo que recibirás un mensaje de cada Cache Global que haya descargado el mensaje.</p>
<p>El Cache Global solo descargará y republicará mensajes que fueron publicados en la jerarquía de tópicos <code>../data/core/...</code>.</p>
</details>
<h2 id="es-practical-sessions-connecting-to-wis2-over-mqtt-conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica, aprendiste:</p>
<ul>
<li>cómo suscribirte a los servicios del Broker Global de WIS2 usando MQTT Explorer</li>
<li>la estructura de tópicos de WIS2</li>
<li>la estructura de mensajes de notificación de WIS2</li>
<li>la diferencia entre datos básicos y recomendados</li>
<li>la estructura de tópicos utilizada por la puerta de enlace de GTS a WIS2</li>
<li>la diferencia entre los mensajes del Broker Global publicados en los tópicos <code>origin</code> y <code>cache</code></li>
</ul>
</div></section><section class="print-page" id="es-practical-sessions-accessing-your-student-vm" heading-number="2.2"><h1 id="es-practical-sessions-accessing-your-student-vm-accediendo-a-tu-vm-de-estudiante">Accediendo a tu VM de estudiante</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje</p>
<p>Al final de esta sesión práctica, serás capaz de:</p>
<ul>
<li>acceder a tu VM de estudiante mediante SSH y WinSCP</li>
<li>verificar que el software necesario para los ejercicios prácticos esté instalado</li>
<li>verificar que tienes acceso a los materiales de los ejercicios para esta capacitación en tu VM de estudiante local</li>
</ul>
</div>
<h2 id="es-practical-sessions-accessing-your-student-vm-introduccion">Introducción</h2>
<p>Como parte de las sesiones de capacitación de wis2box que se realizan localmente, puedes acceder a tu VM de estudiante personal en la red de entrenamiento local denominada "WIS2-training".</p>
<p>Tu VM de estudiante tiene el siguiente software preinstalado:</p>
<ul>
<li>Ubuntu 22.0.4.3 LTS <a href="https://releases.ubuntu.com/jammy/ubuntu-22.04.3-live-server-amd64.iso">ubuntu-22.04.3-live-server-amd64.iso</a></li>
<li>Python 3.10.12</li>
<li>Docker 24.0.6</li>
<li>Docker Compose 2.21.0</li>
<li>Editores de texto: vim, nano</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Si deseas realizar esta capacitación fuera de una sesión de entrenamiento local, puedes proporcionar tu propia instancia utilizando cualquier proveedor de nube, por ejemplo:</p>
<ul>
<li>Instancia VM de GCP (Google Cloud Platform) <code>e2-medium</code></li>
<li>Instancia ec2 de AWS (Amazon Web Services) <code>t3a.medium</code></li>
<li>Máquina Virtual de Azure (Microsoft) <code>standard_b2s</code></li>
</ul>
<p>Selecciona Ubuntu Server 22.0.4 LTS como sistema operativo.</p>
<p>Después de crear tu VM, asegúrate de haber instalado python, docker y docker compose, como se describe en <a href="https://docs.wis2box.wis.wmo.int/en/latest/user/getting-started.html#software-dependencies">wis2box-software-dependencies</a>.</p>
<p>El archivo de lanzamiento para wis2box utilizado en esta capacitación se puede descargar de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>https://github.com/wmo-im/wis2box/releases/download/1.0.0rc1/wis2box-setup-1.0.0rc1.zip
unzip<span class="w"> </span>wis2box-setup-1.0.0rc1.zip
</code></pre></div>
<p>Siempre puedes encontrar el último archivo de configuración de 'wis2box-setup' en <a href="https://github.com/wmo-im/wis2box/releases">https://github.com/wmo-im/wis2box/releases</a>.</p>
<p>El material de ejercicio utilizado en esta capacitación se puede descargar de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>https://training.wis2box.wis.wmo.int/exercise-materials.zip
unzip<span class="w"> </span>exercise-materials.zip
</code></pre></div>
<p>Los siguientes paquetes adicionales de Python son necesarios para ejecutar los materiales de ejercicio:</p>
<div class="highlight"><pre><span></span><code>pip3<span class="w"> </span>install<span class="w"> </span>minio
</code></pre></div>
<p>Si estás utilizando la VM de estudiante proporcionada durante las sesiones locales de entrenamiento WIS2, el software requerido ya estará instalado.</p>
</div>
<h2 id="es-practical-sessions-accessing-your-student-vm-conectate-a-tu-vm-de-estudiante-en-la-red-de-entrenamiento-local">Conéctate a tu VM de estudiante en la red de entrenamiento local</h2>
<p>Conecta tu PC a la red Wi-Fi local transmitida en la sala durante el entrenamiento WIS2 según las instrucciones proporcionadas por el entrenador.</p>
<p>Usa un cliente SSH para conectarte a tu VM de estudiante utilizando lo siguiente:</p>
<ul>
<li><strong>Host: (proporcionado durante la capacitación presencial)</strong></li>
<li><strong>Puerto: 22</strong></li>
<li><strong>Nombre de usuario: (proporcionado durante la capacitación presencial)</strong></li>
<li><strong>Contraseña: (proporcionado durante la capacitación presencial)</strong></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Contacta a un entrenador si tienes dudas sobre el nombre del host/usuario o si tienes problemas para conectarte.</p>
</div>
<p>Una vez conectado, por favor cambia tu contraseña para asegurar que otros no puedan acceder a tu VM:</p>
<div class="highlight"><pre><span></span><code>limper@student-vm:~$<span class="w"> </span>passwd
Cambiando<span class="w"> </span>la<span class="w"> </span>contraseña<span class="w"> </span>para<span class="w"> </span>testuser.
Contraseña<span class="w"> </span>actual:
Nueva<span class="w"> </span>contraseña:
Repite<span class="w"> </span>la<span class="w"> </span>nueva<span class="w"> </span>contraseña:
passwd:<span class="w"> </span>contraseña<span class="w"> </span>actualizada<span class="w"> </span>correctamente
</code></pre></div>
<h2 id="es-practical-sessions-accessing-your-student-vm-verifica-las-versiones-de-software">Verifica las versiones de software</h2>
<p>Para poder ejecutar wis2box, la VM de estudiante debería tener Python, Docker y Docker Compose preinstalados. </p>
<p>Verifica la versión de Python:
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>--version
</code></pre></div>
devuelve:
<div class="highlight"><pre><span></span><code><span class="go">Python 3.10.12</span>
</code></pre></div></p>
<p>Verifica la versión de docker:
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>--version
</code></pre></div>
devuelve:
<div class="highlight"><pre><span></span><code><span class="go">Versión de Docker 24.0.6, build ed223bc</span>
</code></pre></div></p>
<p>Verifica la versión de Docker Compose:
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>version
</code></pre></div>
devuelve:
<div class="highlight"><pre><span></span><code><span class="go">Versión de Docker Compose v2.21.0</span>
</code></pre></div></p>
<p>Para asegurar que tu usuario pueda ejecutar comandos de Docker, tu usuario ha sido añadido al grupo <code>docker</code>. </p>
<p>Para probar que tu usuario puede ejecutar docker hello-world, ejecuta el siguiente comando:
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>hello-world
</code></pre></div></p>
<p>Esto debería descargar la imagen hello-world y ejecutar un contenedor que imprime un mensaje. </p>
<p>Verifica que veas lo siguiente en la salida:</p>
<div class="highlight"><pre><span></span><code><span class="go">...</span>
<span class="go">¡Hola desde Docker!</span>
<span class="go">Este mensaje muestra que tu instalación parece estar funcionando correctamente.</span>
<span class="go">...</span>
</code></pre></div>
<h2 id="es-practical-sessions-accessing-your-student-vm-inspecciona-los-materiales-de-ejercicio">Inspecciona los materiales de ejercicio</h2>
<p>Inspecciona los contenidos de tu directorio home; estos son los materiales utilizados como parte de la capacitación y las sesiones prácticas.</p>
<p><div class="highlight"><pre><span></span><code>ls<span class="w"> </span>~/
</code></pre></div>
devuelve:
<div class="highlight"><pre><span></span><code><span class="go">exercise-materials  wis2box-1.0.0rc1</span>
</code></pre></div></p>
<p>Si tienes WinSCP instalado en tu PC local, puedes usarlo para conectarte a tu VM de estudiante e inspeccionar los contenidos de tu directorio home y descargar o subir archivos entre tu VM y tu PC local. </p>
<p>WinSCP no es necesario para la capacitación, pero puede ser útil si deseas editar archivos en tu VM usando un editor de texto en tu PC local.</p>
<p>Aquí te mostramos cómo puedes conectarte a tu VM de estudiante usando WinSCP:</p>
<p>Abre WinSCP y haz clic en "Nuevo sitio". Puedes crear una nueva conexión SCP a tu VM de la siguiente manera:</p>
<p><img alt="winscp-student-vm-scp.png" src="../es/assets/img/winscp-student-vm-scp.png" width="400"></p>
<p>Haz clic en 'Guardar' y luego en 'Conectar' para conectarte a tu VM.</p>
<p>Y deberías poder ver el siguiente contenido:</p>
<p><img alt="winscp-student-vm-exercise-materials.png" src="../es/assets/img/winscp-student-vm-exercise-materials.png" width="600"></p>
<h2 id="es-practical-sessions-accessing-your-student-vm-conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica, aprendiste cómo:</p>
<ul>
<li>acceder a tu VM de estudiante mediante SSH y WinSCP</li>
<li>verificar que el software necesario para los ejercicios prácticos esté instalado</li>
<li>verificar que tienes acceso a los materiales de los ejercicios para esta capacitación en tu VM de estudiante local</li>
</ul>
</div></section><section class="print-page" id="es-practical-sessions-initializing-wis2box" heading-number="2.3"><h1 id="es-practical-sessions-initializing-wis2box-inicializacion-de-wis2box">Inicialización de wis2box</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje</p>
<p>Al final de esta sesión práctica, serás capaz de:</p>
<ul>
<li>ejecutar el script <code>wis2box-create-config.py</code> para crear la configuración inicial</li>
<li>iniciar wis2box y verificar el estado de sus componentes</li>
<li>acceder a <strong>wis2box-webapp</strong>, API, MinIO UI y el tablero de Grafana en un navegador</li>
<li>conectarte al <strong>wis2box-broker</strong> local usando MQTT Explorer</li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Los materiales de formación actuales están utilizando wis2box-1.0.0rc1.</p>
<p>Consulta <a href="#es-practical-sessions-accessing-your-student-vm">accessing-your-student-vm</a> para instrucciones sobre cómo descargar e instalar el stack de software de wis2box si estás realizando esta formación fuera de una sesión de entrenamiento local.</p>
</div>
<h2 id="es-practical-sessions-initializing-wis2box-preparacion">Preparación</h2>
<p>Inicia sesión en tu VM designada con tu nombre de usuario y contraseña y asegúrate de estar en el directorio <code>wis2box-1.0.0rc1</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box-1.0.0rc1
</code></pre></div>
<h2 id="es-practical-sessions-initializing-wis2box-creacion-de-la-configuracion-inicial">Creación de la configuración inicial</h2>
<p>La configuración inicial para el wis2box requiere:</p>
<ul>
<li>un archivo de entorno <code>wis2box.env</code> que contenga los parámetros de configuración</li>
<li>un directorio en la máquina anfitriona para compartir entre la máquina anfitriona y los contenedores de wis2box definidos por la variable de entorno <code>WIS2BOX_HOST_DATADIR</code></li>
</ul>
<p>El script <code>wis2box-create-config.py</code> se puede utilizar para crear la configuración inicial de tu wis2box.</p>
<p>Te hará un conjunto de preguntas para ayudarte a configurar tu configuración.</p>
<p>Podrás revisar y actualizar los archivos de configuración después de que el script haya terminado.</p>
<p>Ejecuta el script de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-create-config.py
</code></pre></div>
<h3 id="es-practical-sessions-initializing-wis2box-directorio-wis2box-host-data">Directorio wis2box-host-data</h3>
<p>El script te pedirá que ingreses el directorio que se utilizará para la variable de entorno <code>WIS2BOX_HOST_DATADIR</code>.</p>
<p>Ten en cuenta que necesitas definir la ruta completa a este directorio.</p>
<p>Por ejemplo, si tu nombre de usuario es <code>username</code>, la ruta completa al directorio es <code>/home/username/wis2box-data</code>:</p>
<div class="highlight"><pre><span></span><code>username@student-vm-username:~/wis2box-1.0.0rc1$ python3 wis2box-create-config.py
Por favor, ingresa el directorio que se utilizará para WIS2BOX_HOST_DATADIR:
/home/username/wis2box-data
El directorio que se utilizará para WIS2BOX_HOST_DATADIR se establecerá en:
    /home/username/wis2box-data
¿Es correcto? (s/n/salir)
s
El directorio /home/username/wis2box-data ha sido creado.
</code></pre></div>
<h3 id="es-practical-sessions-initializing-wis2box-url-de-wis2box">URL de wis2box</h3>
<p>A continuación, se te pedirá que ingreses la URL para tu wis2box. Esta es la URL que se utilizará para acceder a la aplicación web de wis2box, API y UI.</p>
<p>Por favor, utiliza <code>http://&lt;tu-hostname-o-ip&gt;</code> como la URL.</p>
<div class="highlight"><pre><span></span><code>Por favor, ingresa la URL de wis2box:
 Para pruebas locales la URL es http://localhost
 Para habilitar el acceso remoto, la URL debe apuntar a la dirección IP pública o nombre de dominio del servidor que aloja el wis2box.
http://username.wis2.training
La URL de wis2box se establecerá en:
  http://username.wis2.training
¿Es correcto? (s/n/salir)
</code></pre></div>
<h3 id="es-practical-sessions-initializing-wis2box-contrasenas-de-webapp-storage-y-broker">Contraseñas de WEBAPP, STORAGE y BROKER</h3>
<p>Puedes usar la opción de generación de contraseña aleatoria cuando se te solicite y <code>WIS2BOX_WEBAPP_PASSWORD</code>, <code>WIS2BOX_STORAGE_PASSWORD</code>, <code>WIS2BOX_BROKER_PASSWORD</code> y definir la tuya propia.</p>
<p>No te preocupes por recordar estas contraseñas, estarán almacenadas en el archivo <code>wis2box.env</code> en tu directorio wis2box-1.0.0rc1.</p>
<h3 id="es-practical-sessions-initializing-wis2box-revisar-wis2boxenv">Revisar <code>wis2box.env</code></h3>
<p>Una vez que el script se haya completado, verifica el contenido del archivo <code>wis2box.env</code> en tu directorio actual:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>~/wis2box-1.0.0rc1/wis2box.env
</code></pre></div>
<p>O verifica el contenido del archivo a través de WinSCP.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuál es el valor de WISBOX_BASEMAP_URL en el archivo wis2box.env?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>El valor predeterminado para WIS2BOX_BASEMAP_URL es <code>https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png</code>.</p>
<p>Esta URL se refiere al servidor de mosaicos de OpenStreetMap. Si deseas usar un proveedor de mapas diferente, puedes cambiar esta URL para apuntar a un servidor de mosaicos diferente.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuál es el valor de la variable de entorno WIS2BOX_STORAGE_DATA_RETENTION_DAYS en el archivo wis2box.env?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>El valor predeterminado para WIS2BOX_STORAGE_DATA_RETENTION_DAYS es 30 días. Puedes cambiar este valor a un número diferente de días si lo deseas.</p>
<p>El contenedor wis2box-management ejecuta un trabajo cron diariamente para eliminar datos más antiguos que el número de días definido por WIS2BOX_STORAGE_DATA_RETENTION_DAYS del bucket <code>wis2box-public</code> y del backend de la API:</p>
<div class="highlight"><pre><span></span><code>0 0 * * * su wis2box -c &quot;wis2box data clean --days=$WIS2BOX_STORAGE_DATA_RETENTION_DAYS&quot;
</code></pre></div>
</details>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>El archivo <code>wis2box.env</code> contiene variables de entorno que definen la configuración de tu wis2box. Para más información consulta la <a href="https://docs.wis2box.wis.wmo.int/en/latest/reference/configuration.html">documentación de wis2box</a>.</p>
<p>No edites el archivo <code>wis2box.env</code> a menos que estés seguro de los cambios que estás haciendo. Cambios incorrectos pueden hacer que tu wis2box deje de funcionar.</p>
<p>No compartas el contenido de tu archivo <code>wis2box.env</code> con nadie, ya que contiene información sensible como contraseñas.</p>
</div>
<h2 id="es-practical-sessions-initializing-wis2box-iniciar-wis2box">Iniciar wis2box</h2>
<p>Asegúrate de estar en el directorio que contiene los archivos de definición del stack de software de wis2box:</p>
<div class="highlight"><pre><span></span><code>cd ~/wis2box-1.0.0rc1
</code></pre></div>
<p>Inicia wis2box con el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>python3 wis2box-ctl.py start
</code></pre></div>
<p>Cuando ejecutes este comando por primera vez, verás la siguiente salida:</p>
<div class="highlight"><pre><span></span><code>No se encontraron archivos docker-compose.images-*.yml, creando uno
Versión actual=Indefinida, última versión=1.0.0rc1
¿Te gustaría actualizar? (s/n/salir)
</code></pre></div>
<p>Selecciona <code>s</code> y el script creará el archivo <code>docker-compose.images-1.0.0rc1.yml</code>, descargará las imágenes Docker requeridas e iniciará los servicios.</p>
<p>La descarga de las imágenes puede tomar algún tiempo dependiendo de la velocidad de tu conexión a internet. Este paso solo es necesario la primera vez que inicias wis2box.</p>
<p>Inspecciona el estado con el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>python3 wis2box-ctl.py status
</code></pre></div>
<p>Repite este comando hasta que todos los servicios estén en funcionamiento.</p>
<div class="admonition note">
<p class="admonition-title">wis2box y Docker</p>
<p>wis2box funciona como un conjunto de contenedores Docker gestionados por docker-compose.</p>
<p>Los servicios están definidos en los diversos <code>docker-compose*.yml</code> que se pueden encontrar en el directorio <code>~/wis2box-1.0.0rc1/</code>.</p>
<p>El script de Python <code>wis2box-ctl.py</code> se utiliza para ejecutar los comandos subyacentes de Docker Compose que controlan los servicios de wis2box.</p>
<p>No necesitas conocer los detalles de los contenedores Docker para ejecutar el stack de software de wis2box, pero puedes inspeccionar los archivos <code>docker-compose*.yml</code> para ver cómo se definen los servicios. Si estás interesado en aprender más sobre Docker, puedes encontrar más información en la <a href="https://docs.docker.com/">documentación de Docker</a>.</p>
</div>
<p>Para iniciar sesión en el contenedor wis2box-management, utiliza el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>python3 wis2box-ctl.py login
</code></pre></div>
<p>Dentro del contenedor wis2box-management puedes ejecutar varios comandos para gestionar tu wis2box, como:</p>
<ul>
<li><code>wis2box auth add-token --path processes/wis2box</code> : para crear un token de autorización para el endpoint <code>processes/wis2box</code></li>
<li><code>wis2box data clean --days=&lt;número-de-días&gt;</code> : para limpiar datos más antiguos que un cierto número de días del bucket <code>wis2box-public</code></li>
</ul>
<p>Para salir del contenedor y volver a la máquina anfitriona, utiliza el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>exit
</code></pre></div>
<p>Ejecuta el siguiente comando para ver los contenedores docker que se están ejecutando en tu máquina anfitriona:</p>
<div class="highlight"><pre><span></span><code>docker ps
</code></pre></div>
<p>Deberías ver los siguientes contenedores en funcionamiento:</p>
<ul>
<li>wis2box-management</li>
<li>wis2box-api</li>
<li>wis2box-minio</li>
<li>wis2box-webapp</li>
<li>wis2box-auth</li>
<li>wis2box-ui</li>
<li>wis2downloader</li>
<li>elasticsearch</li>
<li>elasticsearch-exporter</li>
<li>nginx</li>
<li>mosquitto</li>
<li>prometheus</li>
<li>grafana</li>
<li>loki</li>
</ul>
<p>Estos contenedores son parte del stack de software de wis2box y proporcionan los diversos servicios necesarios para ejecutar el wis2box.</p>
<p>Ejecuta el siguiente comando para ver los volúmenes docker que se están ejecutando en tu máquina anfitriona:</p>
<div class="highlight"><pre><span></span><code>docker volume ls
</code></pre></div>
<p>Deberías ver los siguientes volúmenes:</p>
<ul>
<li>wis2box_project_auth-data</li>
<li>wis2box_project_es-data</li>
<li>wis2box_project_htpasswd</li>
<li>wis2box_project_minio-data</li>
<li>wis2box_project_prometheus-data</li>
<li>wis2box_project_loki-data</li>
</ul>
<p>Así como algunos volúmenes anónimos utilizados por los diversos contenedores.</p>
<p>Los volúmenes que comienzan con <code>wis2box_project_</code> se utilizan para almacenar datos persistentes para los diversos servicios en el stack de software de wis2box.</p>
<h2 id="es-practical-sessions-initializing-wis2box-api-de-wis2box">API de wis2box</h2>
<p>El wis2box contiene una API (Interfaz de Programación de Aplicaciones) que proporciona acceso a datos y procesos para visualización interactiva, transformación de datos y publicación.</p>
<p>Abre una nueva pestaña y navega a la página <code>http://&lt;tu-host&gt;/oapi</code>.</p>
<p><img alt="wis2box-api.png" src="../es/assets/img/wis2box-api.png" width="800"></p>
<p>Esta es la página de inicio de la API de wis2box (ejecutada a través del contenedor <strong>wis2box-api</strong>).</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Qué colecciones están disponibles actualmente?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Para ver las colecciones disponibles actualmente a través de la API, haz clic en <code>Ver las colecciones en este servicio</code>:</p>
<p><img alt="wis2box-api-collections.png" src="../es/assets/img/wis2box-api-collections.png" width="600"></p>
<p>Las siguientes colecciones están disponibles actualmente:</p>
<ul>
<li>Estaciones</li>
<li>Notificaciones de datos</li>
<li>Metadatos de descubrimiento</li>
</ul>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuántas notificaciones de datos han sido publicadas?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Haz clic en "Notificaciones de datos", luego haz clic en <code>Explorar los elementos de "Notificaciones de Datos"</code>. </p>
<p>Notarás que la página dice "No hay elementos" ya que aún no se han publicado notificaciones de datos.</p>
</details>
<h2 id="es-practical-sessions-initializing-wis2box-aplicacion-web-de-wis2box">Aplicación web de wis2box</h2>
<p>Abre un navegador web y visita la página <code>http://&lt;tu-host&gt;/wis2box-webapp</code>.</p>
<p>Verás un pop-up pidiendo tu nombre de usuario y contraseña. Usa el nombre de usuario predeterminado <code>wis2box-user</code> y la <code>WIS2BOX_WEBAPP_PASSWORD</code> definida en el archivo <code>wis2box.env</code> y haz clic en "Iniciar sesión":</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Revisa tu wis2box.env para el valor de tu WIS2BOX_WEBAPP_PASSWORD. Puedes usar el siguiente comando para verificar el valor de esta variable de entorno:</p>
<div class="highlight"><pre><span></span><code>cat ~/wis2box-1.0.0rc1/wis2box.env | grep WIS2BOX_WEBAPP_PASSWORD
</code></pre></div>
</div>
<p>Una vez que hayas iniciado sesión, mueve el ratón al menú de la izquierda para ver las opciones disponibles en la aplicación web de wis2box:</p>
<p><img alt="wis2box-webapp-menu.png" src="../es/assets/img/wis2box-webapp-menu.png" width="400"></p>
<p>Esta es la aplicación web de wis2box que te permite interactuar con tu wis2box:</p>
<ul>
<li>crear y gestionar conjuntos de datos</li>
<li>actualizar/revisar tus metadatos de estación</li>
<li>ingerir datos ASCII y CSV</li>
<li>monitorear notificaciones publicadas en tu wis2box-broker</li>
</ul>
<p>Usaremos esta aplicación web en una sesión posterior.</p>
<h2 id="es-practical-sessions-initializing-wis2box-wis2box-broker">wis2box-broker</h2>
<p>Abre el MQTT Explorer en tu computadora y prepara una nueva conexión para conectarte a tu broker (ejecutado a través del contenedor <strong>wis2box-broker</strong>).</p>
<p>Haz clic en <code>+</code> para agregar una nueva conexión:</p>
<p><img alt="mqtt-explorer-new-connection.png" src="../es/assets/img/mqtt-explorer-new-connection.png" width="300"></p>
<p>Puedes hacer clic en el botón 'AVANZADO' y verificar que tienes suscripciones a los siguientes temas:</p>
<ul>
<li><code>#</code></li>
<li><code>$SYS/#</code></li>
</ul>
<p><img alt="mqtt-explorer-topics.png" src="../es/assets/img/mqtt-explorer-topics.png" width="550"></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>El tema <code>#</code> es una suscripción comodín que se suscribirá a todos los temas publicados en el broker.</p>
<p>Los mensajes publicados bajo el tema <code>$SYS</code> son mensajes del sistema publicados por el servicio mosquitto en sí.</p>
</div>
<p>Usa los siguientes detalles de conexión, asegurándote de reemplazar el valor de <code>&lt;tu-host&gt;</code> con tu nombre de host y <code>&lt;WIS2BOX_BROKER_PASSWORD&gt;</code> con el valor de tu archivo <code>wis2box.env</code>:</p>
<ul>
<li><strong>Protocolo: mqtt://</strong></li>
<li><strong>Host: <code>&lt;tu-host&gt;</code></strong></li>
<li><strong>Puerto: 1883</strong></li>
<li><strong>Nombre de usuario: wis2box</strong></li>
<li><strong>Contraseña: <code>&lt;WIS2BOX_BROKER_PASSWORD&gt;</code></strong></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Puedes verificar tu wis2box.env para el valor de tu WIS2BOX_BROKER_PASSWORD. Puedes usar el siguiente comando para verificar el valor de esta variable de entorno:</p>
<div class="highlight"><pre><span></span><code>cat ~/wis2box-1.0.0rc1/wis2box.env | grep WIS2BOX_BROKER_PASSWORD
</code></pre></div>
<p>Ten en cuenta que esta es tu contraseña <strong>interna</strong> del broker, el Broker Global utilizará diferentes credenciales (solo lectura) para suscribirse a tu broker. Nunca compartas esta contraseña con nadie.</p>
</div>
<p>Asegúrate de hacer clic en "GUARDAR" para almacenar los detalles de tu conexión.</p>
<p>Luego haz clic en "CONECTAR" para conectarte a tu <strong>wis2box-broker</strong>.</p>
<p><img alt="mqtt-explorer-wis2box-broker.png" src="../es/assets/img/mqtt-explorer-wis2box-broker.png" width="600"></p>
<p>Una vez que estés conectado, verifica que las estadísticas internas de mosquitto estén siendo publicadas por tu broker bajo el tema <code>$SYS</code>:</p>
<p><img alt="mqtt-explorer-sys-topic.png" src="../es/assets/img/mqtt-explorer-sys-topic.png" width="400"></p>
<p>Mantén el MQTT Explorer abierto, ya que lo usaremos para monitorear los mensajes publicados en el broker.</p>
<h2 id="es-practical-sessions-initializing-wis2box-interfaz-de-usuario-de-minio">Interfaz de usuario de MinIO</h2>
<p>Abre un navegador web y visita la página <code>http://&lt;tu-host&gt;:9001</code>:</p>
<p><img alt="minio-ui.png" src="../es/assets/img/minio-ui.png" width="400"></p>
<p>Esta es la interfaz de usuario de MinIO (ejecutada a través del contenedor <strong>wis2box-storage</strong>).</p>
<p>El nombre de usuario y la contraseña están definidos en el archivo <code>wis2box.env</code> en tu directorio de datos de wis2box por las variables de entorno <code>WIS2BOX_STORAGE_USERNAME</code> y <code>WIS2BOX_STORAGE_PASSWORD</code>. El nombre de usuario predeterminado es <code>wis2box</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Puedes verificar tu wis2box.env para el valor de tu WIS2BOX_STORAGE_PASSWORD. Puedes usar el siguiente comando para verificar el valor de esta variable de entorno:</p>
<div class="highlight"><pre><span></span><code>cat ~/wis2box-1.0.0rc1/wis2box.env | grep WIS2BOX_STORAGE_PASSWORD
</code></pre></div>
<p>Ten en cuenta que estas son las credenciales de lectura-escritura para tu instancia de MinIO. Nunca compartas estas credenciales con nadie. Los Servicios Globales solo pueden descargar datos de tu instancia de MinIO utilizando el proxy web en el bucket wis2box-public.</p>
</div>
<p>Intenta iniciar sesión en tu interfaz de usuario de MinIO. Verás que hay 3 buckets ya definidos:</p>
<ul>
<li><code>wis2box-incoming</code>: utilizado para recibir datos entrantes</li>
<li><code>wis2box-public</code>: utilizado para almacenar datos que se ponen a disposición en las notificaciones WIS2, el contenido de este bucket se proxifica como <code>/data</code> en tu <code>WIS2BOX_URL</code> a través del contenedor nginx</li>
<li><code>wis2box-archive</code>: utilizado para archivar datos de <code>wis2box-incoming</code> diariamente</li>
</ul>
<p><img alt="minio-ui-buckets.png" src="../es/assets/img/minio-ui-buckets.png" width="800"></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>El contenedor</p>
</div></section><section class="print-page" id="es-practical-sessions-configuring-wis2box-datasets" heading-number="2.4"><h1 id="es-practical-sessions-configuring-wis2box-datasets-configuracion-de-conjuntos-de-datos-en-wis2box">Configuración de conjuntos de datos en wis2box</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje</p>
<p>Al final de esta sesión práctica, serás capaz de:</p>
<ul>
<li>crear un nuevo conjunto de datos</li>
<li>crear metadatos de descubrimiento para un conjunto de datos</li>
<li>configurar mapeos de datos para un conjunto de datos</li>
<li>publicar una notificación WIS2 con un registro WCMP2</li>
<li>actualizar y volver a publicar tu conjunto de datos</li>
</ul>
</div>
<h2 id="es-practical-sessions-configuring-wis2box-datasets-introduccion">Introducción</h2>
<p>wis2box utiliza conjuntos de datos que están asociados con metadatos de descubrimiento y mapeos de datos.</p>
<p>Los metadatos de descubrimiento se utilizan para crear un registro WCMP2 (Perfil de Metadatos Básicos de la OMM 2) que se comparte mediante una notificación WIS2 publicada en tu wis2box-broker.</p>
<p>Los mapeos de datos se utilizan para asociar un complemento de datos a tus datos de entrada, permitiendo que tus datos se transformen antes de ser publicados mediante la notificación WIS2.</p>
<p>Esta sesión te guiará a través de la creación de un nuevo conjunto de datos, la creación de metadatos de descubrimiento y la configuración de mapeos de datos. Inspeccionarás tu conjunto de datos en la wis2box-api y revisarás la notificación WIS2 para tus metadatos de descubrimiento.</p>
<h2 id="es-practical-sessions-configuring-wis2box-datasets-preparacion">Preparación</h2>
<p>Conéctate a tu broker utilizando MQTT Explorer.</p>
<p>En lugar de usar las credenciales internas de tu broker, usa las credenciales públicas <code>everyone/everyone</code>:</p>
<p><img alt="MQTT Explorer: Conectar al broker" src="../es/assets/img/mqtt-explorer-wis2box-broker-everyone-everyone.png" width="800"></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Nunca necesitas compartir las credenciales de tu broker interno con usuarios externos. El usuario 'everyone' es un usuario público para habilitar la compartición de notificaciones WIS2.</p>
<p>Las credenciales <code>everyone/everyone</code> tienen acceso de solo lectura en el tema 'origin/a/wis2/#'. Este es el tema donde se publican las notificaciones WIS2. El Broker Global puede suscribirse con estas credenciales públicas para recibir las notificaciones.</p>
<p>El usuario 'everyone' no verá temas internos ni podrá publicar mensajes.</p>
</div>
<p>Abre un navegador y abre una página a <code>http://&lt;tu-host&gt;/wis2box-webapp</code>. Asegúrate de estar conectado y poder acceder a la página 'editor de conjuntos de datos'.</p>
<p>Consulta la sección sobre <a href="#practical-sessions-initializing-wis2box">Iniciando wis2box</a> si necesitas recordar cómo conectarte al broker o acceder a la wis2box-webapp.</p>
<h2 id="es-practical-sessions-configuring-wis2box-datasets-crear-un-token-de-autorizacion-para-procesoswis2box">Crear un token de autorización para procesos/wis2box</h2>
<p>Necesitarás un token de autorización para el punto final 'procesos/wis2box' para publicar tu conjunto de datos.</p>
<p>Para crear un token de autorización, accede a tu VM de entrenamiento por SSH y usa los siguientes comandos para iniciar sesión en el contenedor de gestión de wis2box:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box-1.0.0rc1
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login
</code></pre></div>
<p>Luego ejecuta el siguiente comando para crear un token de autorización generado aleatoriamente para el punto final 'procesos/wis2box':</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>auth<span class="w"> </span>add-token<span class="w"> </span>--path<span class="w"> </span>processes/wis2box
</code></pre></div>
<p>También puedes crear un token con un valor específico proporcionando el token como argumento al comando:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>auth<span class="w"> </span>add-token<span class="w"> </span>--path<span class="w"> </span>processes/wis2box<span class="w"> </span>MyS3cretToken
</code></pre></div>
<p>Asegúrate de copiar el valor del token y almacenarlo en tu máquina local, ya que lo necesitarás más adelante.</p>
<p>Una vez que tengas tu token, puedes salir del contenedor de gestión de wis2box:</p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<h2 id="es-practical-sessions-configuring-wis2box-datasets-creando-un-nuevo-conjunto-de-datos-en-la-wis2box-webapp">Creando un nuevo conjunto de datos en la wis2box-webapp</h2>
<p>Navega a la página 'editor de conjuntos de datos' en la wis2box-webapp de tu instancia de wis2box yendo a <code>http://&lt;tu-host&gt;/wis2box-webapp</code> y seleccionando 'editor de conjuntos de datos' en el menú del lado izquierdo.</p>
<p>En la página 'editor de conjuntos de datos', bajo la pestaña 'Conjuntos de datos', haz clic en "Crear nuevo ...":</p>
<p><img alt="Crear nuevo conjunto de datos" src="../es/assets/img/wis2box-create-new-dataset.png" width="800"></p>
<p>Aparecerá una ventana emergente, pidiéndote que proporciones:</p>
<ul>
<li><strong>ID del Centro</strong>: este es el acrónimo de la agencia (en minúsculas y sin espacios), como lo especifica el Miembro de la OMM, que identifica el centro de datos responsable de publicar los datos.</li>
<li><strong>Tipo de Datos</strong>: El tipo de datos para los que estás creando metadatos. Puedes elegir entre usar una plantilla predefinida o seleccionar 'otro'. Si se selecciona 'otro', se tendrán que llenar más campos manualmente.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">ID del Centro</p>
<p>Tu id de centro debe comenzar con el TLD de tu país, seguido de un guión (<code>-</code>) y un nombre abreviado de tu organización (por ejemplo, <code>es-aemet</code>). El id de centro debe estar en minúsculas y usar solo caracteres alfanuméricos. La lista desplegable muestra todos los id de centro actualmente registrados en WIS2, así como cualquier id de centro que ya hayas creado en wis2box.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Plantillas de Tipo de Datos</p>
<p>El campo <em>Tipo de Datos</em> te permite seleccionar de una lista de plantillas disponibles en el editor de conjuntos de datos de la wis2box-webapp. Una plantilla prellenará el formulario con valores predeterminados sugeridos apropiados para el tipo de datos. Esto incluye títulos y palabras clave sugeridos para los metadatos y complementos de datos preconfigurados. El tema será fijo al tema predeterminado para el tipo de datos.</p>
<p>Para el propósito del entrenamiento, usaremos el tipo de datos <em>weather/surface-based-observations/synop</em> que incluye complementos de datos que aseguran que los datos se transformen al formato BUFR antes de ser publicados.</p>
<p>Si deseas publicar alertas CAP usando wis2box, utiliza la plantilla <em>weather/advisories-warnings</em>. Esta plantilla incluye un complemento de datos que verifica que los datos de entrada sean una alerta CAP válida antes de publicar. Para crear alertas CAP y publicarlas a través de wis2box, puedes usar <a href="https://github.com/wmo-raf/cap-composer">CAP Composer</a>.</p>
</div>
<p>Por favor, elige un id de centro apropiado para tu organización.</p>
<p>Para <strong>Tipo de Datos</strong>, selecciona <strong>weather/surface-based-observations/synop</strong>:</p>
<p><img alt="Formulario de Creación de Nuevo Conjunto de Datos: Información inicial" src="../es/assets/img/wis2box-create-new-dataset-form-initial.png" width="450"></p>
<p>Haz clic en <em>continuar al formulario</em> para proceder, ahora se te presentará el <strong>Formulario del Editor de Conjuntos de Datos</strong>.</p>
<p>Dado que seleccionaste el tipo de datos <strong>weather/surface-based-observations/synop</strong>, el formulario estará prellenado con algunos valores iniciales relacionados con este tipo de datos.</p>
<h2 id="es-practical-sessions-configuring-wis2box-datasets-creando-metadatos-de-descubrimiento">Creando metadatos de descubrimiento</h2>
<p>El Formulario del Editor de Conjuntos de Datos te permite proporcionar los Metadatos de Descubrimiento para tu conjunto de datos que el contenedor de gestión de wis2box utilizará para publicar un registro WCMP2.</p>
<p>Dado que has seleccionado el tipo de datos 'weather/surface-based-observations/synop', el formulario estará prellenado con algunos valores predeterminados.</p>
<p>Asegúrate de reemplazar el 'ID Local' generado automáticamente con un nombre descriptivo para tu conjunto de datos, por ejemplo, 'conjunto-datos-synop-wis2entrenamiento':</p>
<p><img alt="Editor de Metadatos: título, descripción, palabras clave" src="../es/assets/img/wis2box-metadata-editor-part1.png" width="800"></p>
<p>Revisa el título y las palabras clave, y actualízalos según sea necesario, y proporciona una descripción para tu conjunto de datos.</p>
<p>Nota que hay opciones para cambiar la 'Política de Datos de la OMM' de 'core' a 'recomendada' o modificar tu Identificador de Metadatos predeterminado, por favor, mantén la política de datos como 'core' y usa el Identificador de Metadatos predeterminado.</p>
<p>A continuación, revisa la sección que define tus 'Propiedades Temporales' y 'Propiedades Espaciales'. Puedes ajustar el cuadro delimitador actualizando los campos 'Latitud Norte', 'Latitud Sur', 'Longitud Este' y 'Longitud Oeste':</p>
<p><img alt="Editor de Metadatos: propiedades temporales, propiedades espaciales" src="../es/assets/img/wis2box-metadata-editor-part2.png" width="800"></p>
<p>A continuación, completa la sección que define la 'Información de Contacto del Proveedor de Datos':</p>
<p><img alt="Editor de Metadatos: información de contacto" src="../es/assets/img/wis2box-metadata-editor-part3.png" width="800"></p>
<p>Finalmente, completa la sección que define la 'Información de Calidad de los Datos':</p>
<p>Una vez que hayas completado todas las secciones, haz clic en 'VALIDAR FORMULARIO' y verifica el formulario en busca de errores:</p>
<p><img alt="Editor de Metadatos: validación" src="../es/assets/img/wis2box-metadata-validation-error.png" width="800"></p>
<p>Si hay errores, corrígelos y haz clic en 'VALIDAR FORMULARIO' nuevamente.</p>
<p>Asegurándote de que no haya errores y que recibas una indicación emergente de que tu formulario ha sido validado:</p>
<p><img alt="Editor de Metadatos: éxito en la validación" src="../es/assets/img/wis2box-metadata-validation-success.png" width="800"></p>
<p>A continuación, antes de enviar tu conjunto de datos, revisa los mapeos de datos para tu conjunto de datos.</p>
<h2 id="es-practical-sessions-configuring-wis2box-datasets-configurando-mapeos-de-datos">Configurando mapeos de datos</h2>
<p>Dado que usaste una plantilla para crear tu conjunto de datos, los mapeos de datos del conjunto han sido prellenados con los complementos predeterminados para el tipo de datos 'weather/surface-based-observations/synop'. Los complementos de datos se utilizan en wis2box para transformar datos antes de que se publiquen utilizando la notificación WIS2.</p>
<p><img alt="Mapeos de Datos: actualizar complemento" src="../es/assets/img/wis2box-data-mappings.png" width="800"></p>
<p>Nota que puedes hacer clic en el botón "actualizar" para cambiar configuraciones para el complemento, como la extensión de archivo y el patrón de archivo, puedes dejar las configuraciones predeterminadas por ahora. En una sesión posterior, aprenderás más sobre BUFR y la transformación de datos al formato BUFR.</p>
<h2 id="es-practical-sessions-configuring-wis2box-datasets-enviando-tu-conjunto-de-datos">Enviando tu conjunto de datos</h2>
<p>Finalmente, puedes hacer clic en 'enviar' para publicar tu conjunto de datos.</p>
<p>Necesitarás proporcionar el token de autorización para 'procesos/wis2box' que creaste anteriormente. Si aún no lo has hecho, puedes crear un nuevo token siguiendo las instrucciones en la sección de preparación.</p>
<p>Verifica que recibas el siguiente mensaje después de enviar tu conjunto de datos, indicando que el conjunto de datos fue enviado con éxito:</p>
<p><img alt="Éxito al enviar el conjunto de datos" src="../es/assets/img/wis2box-submit-dataset-success.png" width="400"></p>
<p>Después de hacer clic en 'OK', serás redirigido a la página de inicio del Editor de Conjuntos de Datos. Ahora, si haces clic en la pestaña 'Conjunto de Datos', deberías ver tu nuevo conjunto de datos listado:</p>
<p><img alt="Editor de Conjuntos de Datos: nuevo conjunto de datos" src="../es/assets/img/wis2box-dataset-editor-new-dataset.png" width="800"></p>
<h2 id="es-practical-sessions-configuring-wis2box-datasets-revisando-la-notificacion-wis2-para-tus-metadatos-de-descubrimiento">Revisando la notificación WIS2 para tus metadatos de descubrimiento</h2>
<p>Ve a MQTT Explorer, si estabas conectado al broker, deberías ver una nueva notificación WIS2 publicada en el tema <code>origin/a/wis2/&lt;tu-id-de-centro&gt;/metadata</code>:</p>
<p><img alt="MQTT Explorer: Notificación WIS2" src="../es/assets/img/mqtt-explorer-wis2-notification-metadata.png" width="800"></p>
<p>Inspecciona el contenido de la notificación WIS2 que publicaste. Deberías ver un JSON con una estructura que corresponde al formato del Mensaje de Notificación WIS (WNM).</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿En qué tema se publica la notificación WIS2?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>La notificación WIS2 se publica en el tema <code>origin/a/wis2/&lt;tu-id-de-centro&gt;/metadata</code>.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Intenta encontrar el título, la descripción y las palabras clave que proporcionaste en los metadatos de descubrimiento en la notificación WIS2. ¿Puedes encontrarlos?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>¡Nota que el título, la descripción y las palabras clave que proporcionaste en los metadatos de descubrimiento <strong>no</strong> están presentes en la carga útil de la notificación WIS2!</p>
<p>En su lugar, intenta buscar el enlace canónico en la sección "links" en la notificación WIS2:</p>
<p><img alt="Notificación WIS2 para metadatos, secciones de enlaces" src="../es/assets/img/wis2-notification-metadata-links.png" width="800"></p>
<p>La notificación WIS2 contiene un enlace canónico al registro WCMP2 que fue publicado. Si copias y pegas este enlace en un navegador, descargarás el registro WCMP2 y verás el título, la descripción y las palabras clave que proporcionaste.</p>
</details>
<h2 id="es-practical-sessions-configuring-wis2box-datasets-conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica, aprendiste cómo:</p>
<ul>
<li>crear un nuevo conjunto de datos</li>
<li>definir tus metadatos de descubrimiento</li>
<li>revisar tus mapeos de datos</li>
<li>publicar metadatos de descubrimiento</li>
<li>revisar la notificación WIS2 para tus metadatos de descubrimiento</li>
</ul>
</div></section><section class="print-page" id="es-practical-sessions-configuring-station-metadata" heading-number="2.5"><h1 id="es-practical-sessions-configuring-station-metadata-configuracion-de-metadatos-de-estaciones">Configuración de metadatos de estaciones</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje</p>
<p>Al final de esta sesión práctica, serás capaz de:</p>
<ul>
<li>crear un token de autorización para el endpoint <code>collections/stations</code></li>
<li>añadir metadatos de estaciones a wis2box</li>
<li>actualizar/eliminar metadatos de estaciones usando el <strong>wis2box-webapp</strong></li>
</ul>
</div>
<h2 id="es-practical-sessions-configuring-station-metadata-introduccion">Introducción</h2>
<p>Para compartir datos internacionalmente entre los Miembros de la OMM, es importante tener un entendimiento común de las estaciones que están produciendo los datos. El Sistema Global Integrado de Observación de la OMM (WIGOS) proporciona un marco para la integración de sistemas de observación y sistemas de gestión de datos. El <strong>Identificador de Estación WIGOS (WSI)</strong> se utiliza como la referencia única de la estación que produjo un conjunto específico de datos de observación.</p>
<p>wis2box tiene una colección de metadatos de estaciones que se utiliza para describir las estaciones que están produciendo los datos de observación y deben ser recuperados de <strong>OSCAR/Surface</strong>. Los metadatos de estaciones en wis2box son utilizados por las herramientas de transformación BUFR para verificar que los datos de entrada contengan un Identificador de Estación WIGOS (WSI) válido y para proporcionar un mapeo entre el WSI y los metadatos de la estación.</p>
<h2 id="es-practical-sessions-configuring-station-metadata-crear-un-token-de-autorizacion-para-collectionsstations">Crear un token de autorización para collections/stations</h2>
<p>Para editar estaciones a través del <strong>wis2box-webapp</strong> primero necesitarás crear un token de autorización.</p>
<p>Inicia sesión en tu VM de estudiante y asegúrate de estar en el directorio <code>wis2box-1.0.0rc1</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box-1.0.0rc1
</code></pre></div>
<p>Luego inicia sesión en el contenedor <strong>wis2box-management</strong> con el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login
</code></pre></div>
<p>Dentro del contenedor <strong>wis2box-management</strong> puedes crear un token de autorización para un endpoint específico usando el comando: <code>wis2box auth add-token --path &lt;mi-endpoint&gt;</code>.</p>
<p>Por ejemplo, para usar un token generado automáticamente al azar para el endpoint <code>collections/stations</code>:</p>
<div class="highlight"><pre><span></span><code>wis2box auth add-token --path collections/stations
</code></pre></div>
<p>La salida se verá así:</p>
<div class="highlight"><pre><span></span><code>Continuar con token: 7ca20386a131f0de384e6ffa288eb1ae385364b3694e47e3b451598c82e899d1 [y/N]? y
Token creado exitosamente
</code></pre></div>
<p>O, si quieres definir tu propio token para el endpoint <code>collections/stations</code>, puedes usar el siguiente ejemplo:</p>
<div class="highlight"><pre><span></span><code>wis2box auth add-token --path collections/stations DataIsMagic
</code></pre></div>
<p>Salida:</p>
<div class="highlight"><pre><span></span><code>Continuar con token: DataIsMagic [y/N]? y
Token creado exitosamente
</code></pre></div>
<p>Por favor, crea un token de autorización para el endpoint <code>collections/stations</code> usando las instrucciones anteriores.</p>
<h2 id="es-practical-sessions-configuring-station-metadata-anadir-metadatos-de-estacion-usando-el-wis2box-webapp">Añadir metadatos de estación usando el <strong>wis2box-webapp</strong></h2>
<p>El <strong>wis2box-webapp</strong> proporciona una interfaz gráfica de usuario para editar metadatos de estaciones.</p>
<p>Abre el <strong>wis2box-webapp</strong> en tu navegador navegando a <code>http://&lt;tu-host&gt;/wis2box-webapp</code>:</p>
<p><img alt="wis2box-webapp" src="../es/assets/img/wis2box-webapp.png" width="800"></p>
<p>Y selecciona estaciones:</p>
<p><img alt="wis2box-webapp-select-stations" src="../es/assets/img/wis2box-webapp-select-stations.png" width="250"></p>
<p>Cuando hagas clic en 'añadir nueva estación', se te pedirá que proporciones el identificador de estación WIGOS para la estación que deseas añadir:</p>
<p><img alt="wis2box-webapp-import-station-from-oscar" src="../es/assets/img/wis2box-webapp-import-station-from-oscar.png" width="800"></p>
<div class="admonition note">
<p class="admonition-title">Añadir metadatos de estación para 3 o más estaciones</p>
<p>Por favor, añade tres o más estaciones a la colección de metadatos de estaciones de tu wis2box.</p>
<p>Si es posible, utiliza estaciones de tu país, especialmente si trajiste tus propios datos.</p>
<p>Si tu país no tiene estaciones en OSCAR/Surface, puedes usar las siguientes estaciones para el propósito de este ejercicio:</p>
<ul>
<li>0-20000-0-91334</li>
<li>0-20000-0-96323 (nota la elevación de la estación faltante en OSCAR)</li>
<li>0-20000-0-96749 (nota la elevación de la estación faltante en OSCAR)</li>
</ul>
</div>
<p>Cuando hagas clic en buscar, los datos de la estación se recuperarán de OSCAR/Surface, ten en cuenta que esto puede tardar unos segundos.</p>
<p>Revisa los datos devueltos por OSCAR/Surface y añade datos faltantes donde sea necesario. Selecciona un tema para la estación y proporciona tu token de autorización para el endpoint <code>collections/stations</code> y haz clic en 'guardar':</p>
<p><img alt="wis2box-webapp-create-station-save" src="../es/assets/img/wis2box-webapp-create-station-save.png" width="800"></p>
<p><img alt="wis2box-webapp-create-station-success" src="../es/assets/img/wis2box-webapp-create-station-success.png" width="500"></p>
<p>Regresa a la lista de estaciones y verás la estación que añadiste:</p>
<p><img alt="wis2box-webapp-stations-with-one-station" src="../es/assets/img/wis2box-webapp-stations-with-one-station.png" width="800"></p>
<p>Repite este proceso hasta que tengas al menos 3 estaciones configuradas.</p>
<div class="admonition tip">
<p class="admonition-title">Derivando información de elevación faltante</p>
<p>Si falta la elevación de tu estación, hay servicios en línea para ayudar a buscar la elevación usando datos de elevación abiertos. Un ejemplo es la <a href="https://www.opentopodata.org">API de Open Topo Data</a>.</p>
<p>Por ejemplo, para obtener la elevación en la latitud -6.15558 y longitud 106.84204, puedes copiar y pegar la siguiente URL en una nueva pestaña del navegador:</p>
<div class="highlight"><pre><span></span><code>https://api.opentopodata.org/v1/aster30m?locations=-6.15558,106.84204
</code></pre></div>
<p>Salida:</p>
<div class="highlight"><pre><span></span><code>{
  &quot;results&quot;: [
    {
      &quot;dataset&quot;: &quot;aster30m&quot;, 
      &quot;elevation&quot;: 7.0, 
      &quot;location&quot;: {
        &quot;lat&quot;: -6.15558, 
        &quot;lng&quot;: 106.84204
      }
    }
  ], 
  &quot;status&quot;: &quot;OK&quot;
}
</code></pre></div>
</div>
<h2 id="es-practical-sessions-configuring-station-metadata-revisar-tus-metadatos-de-estacion">Revisar tus metadatos de estación</h2>
<p>Los metadatos de estación se almacenan en el backend de wis2box y están disponibles a través del <strong>wis2box-api</strong>.</p>
<p>Si abres un navegador y navegas a <code>http://&lt;tu-host&gt;/oapi/collections/stations/items</code> verás los metadatos de estación que añadiste:</p>
<p><img alt="wis2box-api-stations" src="../es/assets/img/wis2box-api-stations.png" width="800"></p>
<div class="admonition note">
<p class="admonition-title">Revisar tus metadatos de estación</p>
<p>Verifica que las estaciones que añadiste estén asociadas a tu conjunto de datos visitando <code>http://&lt;tu-host&gt;/oapi/collections/stations/items</code> en tu navegador.</p>
</div>
<p>También tienes la opción de ver/actualizar/eliminar la estación en el <strong>wis2box-webapp</strong>. Ten en cuenta que se requiere proporcionar tu token de autorización para el endpoint <code>collections/stations</code> para actualizar/eliminar la estación.</p>
<div class="admonition note">
<p class="admonition-title">Actualizar/eliminar metadatos de estación</p>
<p>Intenta ver si puedes actualizar/eliminar los metadatos de estación para una de las estaciones que añadiste usando el <strong>wis2box-webapp</strong>.</p>
</div>
<h2 id="es-practical-sessions-configuring-station-metadata-carga-masiva-de-metadatos-de-estacion">Carga masiva de metadatos de estación</h2>
<p>Ten en cuenta que wis2box también tiene la capacidad de realizar la carga "masiva" de metadatos de estación desde un archivo CSV usando la línea de comandos en el contenedor <strong>wis2box-management</strong>.</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login
wis2box<span class="w"> </span>metadata<span class="w"> </span>station<span class="w"> </span>publish-collection<span class="w"> </span>-p<span class="w"> </span>/data/wis2box/metadata/station/station_list.csv<span class="w"> </span>-th<span class="w"> </span>origin/a/wis2/centre-id/weather/surface-based-observations/synop
</code></pre></div>
<p>Esto te permite subir un gran número de estaciones a la vez y asociarlas con un tema específico.</p>
<p>Puedes crear el archivo CSV usando Excel o un editor de texto y luego subirlo al wis2box-host-datadir para hacerlo disponible en el directorio <code>/data/wis2box/</code>.</p>
<p>Después de realizar una carga masiva de estaciones, se recomienda revisar las estaciones en el <strong>wis2box-webapp</strong> para asegurarse de que los datos se subieron correctamente.</p>
<p>Consulta la <a href="https://docs.wis2box.wis.wmo.int">documentación oficial de wis2box</a> para más información sobre cómo usar esta característica.</p>
<h2 id="es-practical-sessions-configuring-station-metadata-conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica, aprendiste cómo:</p>
<ul>
<li>crear un token de autorización para el endpoint <code>collections/stations</code> para ser usado con el <strong>wis2box-webapp</strong></li>
<li>añadir metadatos de estación a wis2box usando el <strong>wis2box-webapp</strong></li>
<li>ver/actualizar/eliminar metadatos de estación usando el <strong>wis2box-webapp</strong></li>
</ul>
</div></section><section class="print-page" id="es-practical-sessions-monitoring-wis2-notifications" heading-number="2.6"><h1 id="es-practical-sessions-monitoring-wis2-notifications-monitoreo-de-notificaciones-wis2">Monitoreo de Notificaciones WIS2</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje</p>
<p>Al final de esta sesión práctica, podrás:</p>
<ul>
<li>activar el flujo de trabajo de wis2box subiendo datos en MinIO usando el comando <code>wis2box data ingest</code></li>
<li>ver advertencias y errores mostrados en el tablero de Grafana</li>
<li>verificar el contenido de los datos que se están publicando</li>
</ul>
</div>
<h2 id="es-practical-sessions-monitoring-wis2-notifications-introduccion">Introducción</h2>
<p>El <strong>tablero de Grafana</strong> utiliza datos de Prometheus y Loki para mostrar el estado de tu wis2box. Prometheus almacena datos de series temporales de las métricas recogidas, mientras que Loki almacena los registros de los contenedores que se ejecutan en tu instancia de wis2box. Estos datos te permiten verificar cuántos datos se reciben en MinIO y cuántas notificaciones WIS2 se publican, y si se detectan errores en los registros.</p>
<p>Para ver el contenido de las notificaciones WIS2 que se están publicando en diferentes temas de tu wis2box puedes usar la pestaña 'Monitor' en el <strong>wis2box-webapp</strong>.</p>
<h2 id="es-practical-sessions-monitoring-wis2-notifications-preparacion">Preparación</h2>
<p>Esta sección utilizará el conjunto de datos "surface-based-observations/synop" creado previamente en la sesión práctica <a href="#practical-sessions-configuring-wis2box-datasets">Configurando conjuntos de datos en wis2box</a>.</p>
<p>Inicia sesión en tu VM de estudiante usando tu cliente SSH (PuTTY u otro).</p>
<p>Asegúrate de que wis2box esté funcionando:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box-1.0.0rc1/
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>start
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>status
</code></pre></div>
<p>Asegúrate de tener MQTT Explorer en funcionamiento y conectado a tu instancia usando las credenciales públicas <code>everyone/everyone</code> con una suscripción al tema <code>origin/a/wis2/#</code>.</p>
<p>Asegúrate de tener acceso a la interfaz web de MinIO yendo a <code>http://&lt;tu-host&gt;:9000</code> y que estás registrado (usando <code>WIS2BOX_STORAGE_USERNAME</code> y <code>WIS2BOX_STORAGE_PASSWORD</code> de tu archivo <code>wis2box.env</code>).</p>
<p>Asegúrate de tener un navegador web abierto con el tablero de Grafana para tu instancia yendo a <code>http://&lt;tu-host&gt;:3000</code>.</p>
<h2 id="es-practical-sessions-monitoring-wis2-notifications-ingestando-algunos-datos">Ingestando algunos datos</h2>
<p>Por favor, ejecuta los siguientes comandos desde tu sesión de cliente SSH:</p>
<p>Copia el archivo de datos de ejemplo <code>aws-example.csv</code> al directorio que definiste como <code>WI2BOX_HOST_DATADIR</code> en tu archivo <code>wis2box.env</code>.</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>~/exercise-materials/monitoring-exercises/aws-example.csv<span class="w"> </span>~/wis2box-data/
</code></pre></div>
<p>Asegúrate de estar en el directorio <code>wis2box-1.0.0rc1</code> e inicia sesión en el contenedor <strong>wis2box-management</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box-1.0.0rc1
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login
</code></pre></div>
<p>Verifica que los datos de muestra estén disponibles en el directorio <code>/data/wis2box/</code> dentro del contenedor <strong>wis2box-management</strong>:</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-lh<span class="w"> </span>/data/wis2box/aws-example.csv
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>El <code>WIS2BOX_HOST_DATADIR</code> está montado como <code>/data/wis2box/</code> dentro del contenedor de gestión de wis2box por el archivo <code>docker-compose.yml</code> incluido en el directorio <code>wis2box-1.0.0rc1</code>.</p>
<p>Esto te permite compartir datos entre el host y el contenedor.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Ejercicio 1: ingestando datos usando <code>wis2box data ingest</code></p>
<p>Ejecuta el siguiente comando para ingestar el archivo de datos de muestra <code>aws-example.csv</code> en tu instancia de wis2box:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>data<span class="w"> </span>ingest<span class="w"> </span>-p<span class="w"> </span>/data/wis2box/aws-example.csv<span class="w"> </span>--metadata-id<span class="w"> </span>urn:wmo:md:not-my-centre:core.surface-based-observations.synop
</code></pre></div>
<p>¿Se ingestaron correctamente los datos? Si no, ¿cuál fue el mensaje de error y cómo puedes solucionarlo?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Verás el siguiente resultado:</p>
<div class="highlight"><pre><span></span><code>Error:<span class="w"> </span><span class="nv">metadata_id</span><span class="o">=</span>urn:wmo:md:not-my-centre:core.surface-based-observations.synop<span class="w"> </span>not<span class="w"> </span>found<span class="w"> </span><span class="k">in</span><span class="w"> </span>data<span class="w"> </span>mappings
</code></pre></div>
<p>El mensaje de error indica que el identificador de metadatos que proporcionaste no coincide con ninguno de los conjuntos de datos que has configurado en tu instancia de wis2box.</p>
<p>Proporciona el metadata-id correcto que coincida con el conjunto de datos que creaste en la sesión práctica anterior y repite el comando de ingestión de datos hasta que veas el siguiente resultado:</p>
<div class="highlight"><pre><span></span><code>Processing<span class="w"> </span>/data/wis2box/aws-example.csv
Done
</code></pre></div>
</details>
<p>Ve a la consola de MinIO en tu navegador y verifica si el archivo <code>aws-example.csv</code> fue subido al bucket <code>wis2box-incoming</code>. Deberías ver que hay un nuevo directorio con el nombre del conjunto de datos que proporcionaste en la opción <code>--metadata-id</code>:</p>
<p><img alt="minio-wis2box-incoming-dataset-folder" src="../es/assets/img/minio-wis2box-incoming-dataset-folder.png" width="800"></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>El comando <code>wis2box data ingest</code> subió el archivo al bucket <code>wis2box-incoming</code> en MinIO en un directorio nombrado después del identificador de metadatos que proporcionaste.</p>
</div>
<p>Ve al tablero de Grafana en tu navegador y verifica el estado de la ingestión de datos.</p>
<div class="admonition question">
<p class="admonition-title">Ejercicio 2: verifica el estado de la ingestión de datos</p>
<p>Ve al tablero de Grafana en tu navegador y verifica el estado de la ingestión de datos.</p>
<p>¿Se ingestaron correctamente los datos?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>El panel en la parte inferior del tablero de inicio de Grafana informa las siguientes advertencias:    </p>
<p><code>WARNING - input=aws-example.csv warning=Station 0-20000-0-60355 not in station list; skipping</code>
<code>WARNING - input=aws-example.csv warning=Station 0-20000-0-60360 not in station list; skipping</code></p>
<p>Esta advertencia indica que las estaciones no están definidas en la lista de estaciones de tu wis2box. No se publicarán notificaciones WIS2 para esta estación hasta que la agregues a la lista de estaciones y la asocies con el tema para tu conjunto de datos.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Ejercicio 3: agrega las estaciones de prueba y repite la ingestión de datos</p>
<p>Agrega las estaciones a tu wis2box usando el editor de estaciones en <strong>wis2box-webapp</strong>, y asocia las estaciones con el tema para tu conjunto de datos.</p>
<p>Ahora vuelve a subir el archivo de datos de muestra <code>aws-example.csv</code> al mismo camino en MinIO que usaste en el ejercicio anterior.</p>
<p>Verifica el tablero de Grafana, ¿hay nuevos errores o advertencias? ¿Cómo puedes ver que los datos de prueba se ingestaron y publicaron correctamente?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Puedes verificar los gráficos en el tablero de inicio de Grafana para ver si los datos de prueba se ingestaron y publicaron correctamente.</p>
<p>Si fue exitoso, deberías ver lo siguiente:</p>
<p><img alt="grafana_success" src="../es/assets/img/grafana_success.png" width="800"></p>
</details>
<div class="admonition question">
<p class="admonition-title">Ejercicio 4: verifica el broker MQTT para las notificaciones WIS2</p>
<p>Ve al MQTT Explorer y verifica si puedes ver el Mensaje de Notificación WIS2 para los datos que acabas de ingestar.</p>
<p>¿Cuántas notificaciones de datos WIS2 fueron publicadas por tu wis2box?</p>
<p>¿Cómo accedes al contenido de los datos que se están publicando?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Deberías ver 6 notificaciones de datos WIS2 publicadas por tu wis2box.</p>
<p>Para acceder al contenido de los datos que se están publicando, puedes expandir la estructura del tema para ver los diferentes niveles del mensaje hasta llegar al último nivel y revisar el contenido del mensaje de uno de los mensajes.</p>
<p>El contenido del mensaje tiene una sección de "enlaces" con una clave "rel" de "canonical" y una clave "href" con la URL para descargar los datos. La URL estará en el formato <code>http://&lt;tu-host&gt;/data/...</code>. </p>
<p>Ten en cuenta que el formato de datos es BUFR y necesitarás un analizador de BUFR para ver el contenido de los datos. El formato BUFR es un formato binario utilizado por los servicios meteorológicos para intercambiar datos. Los plugins de datos dentro de wis2box transformaron los datos de CSV a BUFR antes de publicarlos.</p>
</details>
<h2 id="es-practical-sessions-monitoring-wis2-notifications-viendo-el-contenido-de-los-datos-que-has-publicado">Viendo el contenido de los datos que has publicado</h2>
<p>Puedes usar el <strong>wis2box-webapp</strong> para ver el contenido de las notificaciones de datos WIS2 que han sido publicadas por tu wis2box.</p>
<p>Abre el <strong>wis2box-webapp</strong> en tu navegador navegando a <code>http://&lt;tu-host&gt;/wis2box-webapp</code> y selecciona la pestaña <strong>Monitoring</strong>:</p>
<p><img alt="wis2box-webapp-monitor" src="../es/assets/img/wis2box-webapp-monitor.png" width="220"></p>
<p>En la pestaña de monitoreo selecciona tu dataset-id y haz clic en "UPDATE"</p>
<details class="question">
<summary>Ejercicio 5: ver las notificaciones WIS2 en el wis2box-webapp</summary>
<p>¿Cuántas notificaciones de datos WIS2 fueron publicadas por tu wis2box? </p>
<p>¿Cuál es la temperatura del aire reportada en la última notificación en la estación con el identificador WIGOS=0-20000-0-60355?</p>
</details>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Si has ingestado correctamente los datos de prueba, deberías ver 6 notificaciones de datos WIS2 publicadas por tu wis2box.</p>
<p>Para ver la temperatura del aire medida para la estación con el identificador WIGOS=0-20000-0-60355, haz clic en el botón "INSPECT" junto al archivo para esa estación para abrir una ventana emergente que muestra el contenido analizado del archivo de datos. La temperatura del aire medida en esta estación fue de 25.0 grados Celsius.</p>
</details>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>El contenedor wis2box-api incluye herramientas para analizar archivos BUFR y mostrar el contenido en un formato legible por humanos. Esto no es un requisito central para la implementación de WIS2.0, pero se incluyó en wis2box para ayudar a los publicadores de datos a verificar el contenido de los datos que están publicando.</p>
</div>
<h2 id="es-practical-sessions-monitoring-wis2-notifications-conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica, aprendiste cómo:</p>
<ul>
<li>activar el flujo de trabajo de wis2box subiendo datos en MinIO usando el comando <code>wis2box data ingest</code></li>
<li>ver las notificaciones WIS2 publicadas por tu wis2box en el tablero de Grafana y el Explorador MQTT</li>
<li>verificar el contenido de los datos que se están publicando usando el <strong>wis2box-webapp</strong></li>
</ul>
</div></section><section class="print-page" id="es-practical-sessions-converting-synop-data-to-bufr" heading-number="2.7"><h1 id="es-practical-sessions-converting-synop-data-to-bufr-conversion-de-datos-synop-a-bufr-desde-la-linea-de-comandos">Conversión de datos SYNOP a BUFR desde la línea de comandos</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje</p>
<p>Al final de esta sesión práctica, podrás:</p>
<ul>
<li>usar la herramienta synop2bufr para convertir informes SYNOP FM-12 a BUFR;</li>
<li>diagnosticar y corregir errores de codificación simples en informes SYNOP FM-12 antes de la conversión de formato;</li>
</ul>
</div>
<h2 id="es-practical-sessions-converting-synop-data-to-bufr-introduccion">Introducción</h2>
<p>Los informes meteorológicos de superficie de las estaciones terrestres se han informado históricamente cada hora o en las horas sinópticas principales
(00, 06, 12 y 18 UTC) e intermedias (03, 09, 15, 21 UTC). Antes de la migración
a BUFR, estos informes se codificaban en el formato de texto plano SYNOP FM-12. Aunque la migración a BUFR
estaba programada para completarse en 2012, todavía se intercambian un gran número de informes en el formato legado
FM-12 SYNOP. Puedes encontrar más información sobre el formato FM-12 SYNOP en el Manual de Códigos de la OMM, 
Volumen I.1 (OMM-No. 306, Volumen I.1).</p>
<p><a href="https://library.wmo.int/records/item/35713-manual-on-codes-international-codes-volume-i-1">Manual de Códigos de la OMM, Volumen I.1</a></p>
<p>Para ayudar a completar la migración a BUFR, se han desarrollado algunas herramientas para
codificar informes SYNOP FM-12 a BUFR, en esta sesión aprenderás a usar estas herramientas así
como la relación entre la información contenida en los informes SYNOP FM-12 y los mensajes BUFR.</p>
<h2 id="es-practical-sessions-converting-synop-data-to-bufr-preparacion">Preparación</h2>
<div class="admonition warning">
<p class="admonition-title">Prerrequisitos</p>
<ul>
<li>Asegúrate de que tu wis2box ha sido configurado y iniciado.</li>
<li>Confirma el estado visitando la API de wis2box (<code>http://&lt;tu-nombre-de-host&gt;/oapi</code>) y verificando que la API está funcionando.</li>
<li>Asegúrate de leer las secciones <strong>synop2bufr primer</strong> y <strong>ecCodes primer</strong> antes de comenzar los ejercicios.</li>
</ul>
</div>
<h2 id="es-practical-sessions-converting-synop-data-to-bufr-synop2bufr-primer">synop2bufr primer</h2>
<p>A continuación, se presentan los comandos y configuraciones esenciales de <code>synop2bufr</code>:</p>
<h3 id="es-practical-sessions-converting-synop-data-to-bufr-transform">transform</h3>
<p>La función <code>transform</code> convierte un mensaje SYNOP a BUFR:</p>
<div class="highlight"><pre><span></span><code>synop2bufr<span class="w"> </span>data<span class="w"> </span>transform<span class="w"> </span>--metadata<span class="w"> </span>my_file.csv<span class="w"> </span>--output-dir<span class="w"> </span>./my_directory<span class="w"> </span>--year<span class="w"> </span>message_year<span class="w"> </span>--month<span class="w"> </span>message_month<span class="w"> </span>my_SYNOP.txt
</code></pre></div>
<p>Nota que si no se especifican las opciones de metadatos, directorio de salida, año y mes, asumirán sus valores predeterminados:</p>
<table>
<thead>
<tr>
<th>Opción</th>
<th>Predeterminado</th>
</tr>
</thead>
<tbody>
<tr>
<td>--metadata</td>
<td>station_list.csv</td>
</tr>
<tr>
<td>--output-dir</td>
<td>El directorio de trabajo actual.</td>
</tr>
<tr>
<td>--year</td>
<td>El año actual.</td>
</tr>
<tr>
<td>--month</td>
<td>El mes actual.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Debe tenerse cuidado al usar el año y mes predeterminados, ya que el día del mes especificado en el informe puede no corresponder (por ejemplo, junio no tiene 31 días).</p>
</div>
<p>En los ejemplos, no se dan el año y el mes, así que siéntete libre de especificar una fecha tú mismo o usar los valores predeterminados.</p>
<h2 id="es-practical-sessions-converting-synop-data-to-bufr-eccodes-primer">ecCodes primer</h2>
<p>ecCodes proporciona tanto herramientas de línea de comandos como puede ser integrado en tus propias aplicaciones. A continuación, se presentan algunas utilidades de línea de comandos útiles para trabajar con datos BUFR.</p>
<h3 id="es-practical-sessions-converting-synop-data-to-bufr-bufr_dump">bufr_dump</h3>
<p>El comando <code>bufr_dump</code> es una herramienta genérica de información BUFR. Tiene muchas opciones, pero las siguientes serán las más aplicables a los ejercicios:</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>my_bufr.bufr4
</code></pre></div>
<p>Esto mostrará el contenido BUFR en tu pantalla. Si estás interesado en los valores que toma una variable en particular, usa el comando <code>egrep</code>:</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>my_bufr.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span>temperature
</code></pre></div>
<p>Esto mostrará variables relacionadas con la temperatura en tus datos BUFR. Si quieres hacer esto para múltiples tipos de variables, filtra la salida usando un pipe (<code>|</code>):</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>my_bufr.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;temperature|wind&#39;</span>
</code></pre></div>
<h2 id="es-practical-sessions-converting-synop-data-to-bufr-conversion-de-synop-fm-12-a-bufr-usando-synop2bufr-desde-la-linea-de-comandos">Conversión de SYNOP FM-12 a BUFR usando synop2bufr desde la línea de comandos</h2>
<p>La biblioteca eccodes y el módulo synop2bufr están instalados en el contenedor wis2box-api. Para realizar los próximos ejercicios, copiaremos el directorio synop2bufr-exercises al contenedor wis2box-api y ejecutaremos los ejercicios desde allí.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>cp<span class="w"> </span>~/exercise-materials/synop2bufr-exercises<span class="w"> </span>wis2box-api:/root
</code></pre></div>
<p>Ahora podemos entrar al contenedor y ejecutar los ejercicios:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>wis2box-api<span class="w"> </span>/bin/bash
</code></pre></div>
<h3 id="es-practical-sessions-converting-synop-data-to-bufr-ejercicio-1">Ejercicio 1</h3>
<p>Navega al directorio <code>/root/synop2bufr-exercises/ex_1</code> e inspecciona el archivo de mensaje SYNOP message.txt:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/synop2bufr-exercises/ex_1
more<span class="w"> </span>message.txt
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuántos informes SYNOP hay en este archivo?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Hay 1 informe SYNOP, ya que solo hay 1 delimitador (=) al final del mensaje.</p>
</details>
<p>Inspecciona la lista de estaciones:</p>
<div class="highlight"><pre><span></span><code>more<span class="w"> </span>station_list.csv
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuántas estaciones están listadas en la lista de estaciones?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Hay 1 estación, el archivo station_list.csv contiene una fila de metadatos de estación.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Intenta convertir <code>message.txt</code> a formato BUFR.</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Para convertir el mensaje SYNOP a formato BUFR, usa el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>synop2bufr<span class="w"> </span>data<span class="w"> </span>transform<span class="w"> </span>--metadata<span class="w"> </span>station_list.csv<span class="w"> </span>--output-dir<span class="w"> </span>./<span class="w"> </span>--year<span class="w"> </span><span class="m">2024</span><span class="w"> </span>--month<span class="w"> </span><span class="m">09</span><span class="w"> </span>message.txt
</code></pre></div>
</details>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Consulta la sección <a href="#es-practical-sessions-converting-synop-data-to-bufr-synop2bufr-primer">synop2bufr primer</a>.</p>
</div>
<p>Inspecciona los datos BUFR resultantes usando <code>bufr_dump</code>.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Averigua cómo comparar los valores de latitud y longitud con los de la lista de estaciones.</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Para comparar los valores de latitud y longitud en los datos BUFR con los de la lista de estaciones, usa el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-15015_20240921T120000.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;latitude|longitude&#39;</span>
</code></pre></div>
<p>Esto mostrará los valores de latitud y longitud en los datos BUFR.</p>
</details>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Consulta la sección <a href="#es-practical-sessions-converting-synop-data-to-bufr-eccodes-primer">ecCodes primer</a>.</p>
</div>
<h3 id="es-practical-sessions-converting-synop-data-to-bufr-ejercicio-2">Ejercicio 2</h3>
<p>Navega al directorio <code>exercise-materials/synop2bufr-exercises/ex_2</code> e inspecciona el archivo de mensaje SYNOP message.txt:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/synop2bufr-exercises/ex_2
more<span class="w"> </span>message.txt
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuántos informes SYNOP hay en este archivo?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Hay 3 informes SYNOP, ya que hay 3 delimitadores (=) al final del mensaje.</p>
</details>
<p>Inspecciona la lista de estaciones:</p>
<div class="highlight"><pre><span></span><code>more<span class="w"> </span>station_list.csv
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuántas estaciones están listadas en la lista de estaciones?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Hay 3 estaciones, el archivo station_list.csv contiene tres filas de metadatos de estación.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Convierte <code>message.txt</code> a formato BUFR.</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Para convertir el mensaje SYNOP a formato BUFR, usa el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>synop2bufr<span class="w"> </span>data<span class="w"> </span>transform<span class="w"> </span>--metadata<span class="w"> </span>station_list.csv<span class="w"> </span>--output-dir<span class="w"> </span>./<span class="w"> </span>--year<span class="w"> </span><span class="m">2024</span><span class="w"> </span>--month<span class="w"> </span><span class="m">09</span><span class="w"> </span>message.txt
</code></pre></div>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Basado en los resultados de los ejercicios en esta y la sesión anterior, ¿cómo predecirías el número de
archivos BUFR resultantes basado en el número de informes SYNOP y estaciones listadas en el archivo de metadatos de la estación?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Para ver los archivos BUFR producidos ejecuta el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-l<span class="w"> </span>*.bufr4
</code></pre></div>
<p>El número de archivos BUFR producidos será igual al número de informes SYNOP en el archivo de mensaje.</p>
</details>
<p>Inspecciona los datos BUFR resultantes usando <code>bufr_dump</code>.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cómo puedes verificar el ID de Estación WIGOS codificado dentro de los datos BUFR de cada archivo producido?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Esto se puede hacer usando los siguientes comandos:</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-15015_20240921T120000.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;wigos&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-15020_20240921T120000.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;wigos&#39;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-15090_20240921T120000.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;wigos&#39;</span>
</code></pre></div>
<p>Ten en cuenta que si tienes un directorio con solo estos 3 archivos BUFR, puedes usar comodines de Linux de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>*.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;wigos&#39;</span>
</code></pre></div>
</details>
<h3 id="es-practical-sessions-converting-synop-data-to-bufr-ejercicio-3">Ejercicio 3</h3>
<p>Navega al directorio <code>exercise-materials/synop2bufr-exercises/ex_3</code> e inspecciona el archivo de mensaje SYNOP message.txt:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/synop2bufr-exercises/ex_3
more<span class="w"> </span>message.txt
</code></pre></div>
<p>Este mensaje SYNOP solo contiene un informe más largo con más secciones.</p>
<p>Inspecciona la lista de estaciones:</p>
<div class="highlight"><pre><span></span><code>more<span class="w"> </span>station_list.csv
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Es problemático que este archivo contenga más estaciones de las que hay informes en el mensaje SYNOP?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>No, esto no es un problema siempre y cuando exista una fila en el archivo de la lista de estaciones con un TSI de estación que coincida con el del informe SYNOP que estamos tratando de convertir.</p>
</details>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>El archivo de la lista de estaciones es una fuente de metadatos para <code>synop2bufr</code> para proporcionar la información que falta en el informe SYNOP alfanumérico y que se requiere en el SYNOP BUFR.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Convierte <code>message.txt</code> a formato BUFR.</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Esto se hace usando el comando <code>transform</code>, por ejemplo:</p>
<div class="highlight"><pre><span></span><code>synop2bufr<span class="w"> </span>data<span class="w"> </span>transform<span class="w"> </span>--metadata<span class="w"> </span>station_list.csv<span class="w"> </span>--output-dir<span class="w"> </span>./<span class="w"> </span>--year<span class="w"> </span><span class="m">2024</span><span class="w"> </span>--month<span class="w"> </span><span class="m">09</span><span class="w"> </span>message.txt
</code></pre></div>
</details>
<p>Inspecciona los datos BUFR resultantes usando <code>bufr_dump</code>.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Encuentra las siguientes variables:</p>
<ul>
<li>Temperatura del aire (K) del informe</li>
<li>Cobertura total de nubes (%) del informe</li>
<li>Periodo total de sol (minutos) del informe</li>
<li>Velocidad del viento (m/s) del informe</li>
</ul>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Para encontrar las variables por palabra clave en los datos BUFR, puedes usar los siguientes comandos:</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-15260_20240921T115500.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;temperature&#39;</span>
</code></pre></div>
<p>Puedes usar el siguiente comando para buscar múltiples palabras clave:</p>
<div class="highlight"><pre><span></span><code>bufr_dump<span class="w"> </span>-p<span class="w"> </span>WIGOS_0-20000-0-15260_20240921T115500.bufr4<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;temperature|cover|sunshine|wind&#39;</span>
</code></pre></div>
</details>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Puedes encontrar útil el último comando de la sección <a href="#es-practical-sessions-converting-synop-data-to-bufr-eccodes-primer">ecCodes primer</a>.</p>
</div>
<h3 id="es-practical-sessions-converting-synop-data-to-bufr-ejercicio-4">Ejercicio 4</h3>
<p>Navega al directorio <code>exercise-materials/synop2bufr-exercises/ex_4</code> e inspecciona el archivo de mensaje SYNOP message.txt:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/synop2bufr-exercises/ex_4
more<span class="w"> </span>message_incorrect.txt
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Qué es incorrecto sobre este archivo SYNOP?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>El informe SYNOP para 15015 está faltando el delimitador (<code>=</code>) que permite a <code>synop2bufr</code> distinguir este informe del siguiente.</p>
</details>
<p>Intenta convertir <code>message_incorrect.txt</code> usando <code>station_list.csv</code></p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Qué problema(s) encontraste con esta conversión?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Para convertir el mensaje SYNOP a formato BUFR, usa el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>synop2bufr<span class="w"> </span>data<span class="w"> </span>transform<span class="w"> </span>--metadata<span class="w"> </span>station_list.csv<span class="w"> </span>--output-dir<span class="w"> </span>./<span class="w"> </span>--year<span class="w"> </span><span class="m">2024</span><span class="w"> </span>--month<span class="w"> </span><span class="m">09</span><span class="w"> </span>message_incorrect.txt
</code></pre></div>
<p>Intentar convertir debería generar los siguientes errores:</p>
<ul>
<li><code>[ERROR] No se pudo decodificar el mensaje SYNOP</code></li>
<li><code>[ERROR] Error al analizar el informe SYNOP: AAXX 21121 15015 02999 02501 10103 21090 39765 42952 57020 60001 15020 02997 23104 10130 21075 30177 40377 58020 60001 81041. ¡10130 no es un grupo válido!</code></li>
</ul>
</details>
<h3 id="es-practical-sessions-converting-synop-data-to-bufr-ejercicio-5">Ejercicio 5</h3>
<p>Navega al directorio <code>exercise-materials/synop2bufr-exercises/ex_5</code> e inspecciona el archivo de mensaje SYNOP message.txt:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/synop2bufr-exercises/ex_5
more<span class="w"> </span>message.txt
</code></pre></div>
<p>Intenta convertir <code>message.txt</code> a formato BUFR usando <code>station_list_incorrect.csv</code> </p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Qué problema(s) encontraste con esta conversión?<br />
Considerando el error presentado, justifica el número de archivos BUFR producidos.</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Para convertir el mensaje SYNOP a formato BUFR, usa el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>synop2bufr<span class="w"> </span>data<span class="w"> </span>transform<span class="w"> </span>--metadata<span class="w"> </span>station_list_incorrect.csv<span class="w"> </span>--output-dir<span class="w"> </span>./<span class="w"> </span>--year<span class="w"> </span><span class="m">2024</span><span class="w"> </span>--month<span class="w"> </span><span class="m">09</span><span class="w"> </span>message.txt
</code></pre></div>
<p>Uno de los TSIs de la estación (<code>15015</code>) no tiene metadatos correspondientes en la lista de estaciones, lo que impedirá que synop2bufr acceda a metadatos adicionales necesarios para convertir el primer informe SYNOP a BUFR.</p>
<p>Verás la siguiente advertencia:</p>
<ul>
<li><code>[ADVERTENCIA] Estación 15015 no encontrada en el archivo de estaciones</code></li>
</ul>
<p>Puedes ver el número de archivos BUFR producidos ejecutando el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-l<span class="w"> </span>*.bufr4
</code></pre></div>
<p>Hay 3 informes SYNOP en message.txt pero solo se han producido 2 archivos BUFR. Esto es porque a uno de los informes SYNOP le faltaban los metadatos necesarios como se mencionó anteriormente.</p>
</details>
<h2 id="es-practical-sessions-converting-synop-data-to-bufr-conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica, aprendiste:</p>
<ul>
<li>cómo la herramienta synop2bufr puede ser usada para convertir informes SYNOP FM-12 a BUFR;</li>
<li>cómo diagnosticar y corregir errores de codificación simples en informes SYNOP FM-12 antes de la conversión de formato;</li>
</ul>
</div></section><section class="print-page" id="es-practical-sessions-converting-synop-data-to-bufr-form" heading-number="2.8"><h1 id="es-practical-sessions-converting-synop-data-to-bufr-form-conversion-de-datos-synop-a-bufr-usando-la-aplicacion-web-wis2box-webapp">Conversión de datos SYNOP a BUFR usando la aplicación web wis2box-webapp</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje</p>
<p>Al final de esta sesión práctica, serás capaz de:</p>
<ul>
<li>enviar boletines FM-12 SYNOP válidos a través de la aplicación web wis2box para su conversión a BUFR y su intercambio a través del WIS2.0</li>
<li>validar, diagnosticar y corregir errores simples de codificación en un boletín FM-12 SYNOP antes de la conversión de formato e intercambio</li>
<li>asegurar que los metadatos de la estación requeridos estén disponibles en wis2box</li>
<li>confirmar e inspeccionar los boletines convertidos exitosamente</li>
</ul>
</div>
<h2 id="es-practical-sessions-converting-synop-data-to-bufr-form-introduccion">Introducción</h2>
<p>Para permitir a los observadores manuales enviar datos directamente al WIS2.0, la aplicación web wis2box-webapp tiene un formulario para convertir boletines FM-12 SYNOP a BUFR. El formulario también permite a los usuarios diagnosticar y corregir errores simples de codificación en el boletín FM-12 SYNOP antes de la conversión de formato e intercambio e inspeccionar los datos BUFR resultantes.</p>
<h2 id="es-practical-sessions-converting-synop-data-to-bufr-form-preparacion">Preparación</h2>
<div class="admonition warning">
<p class="admonition-title">Prerrequisitos</p>
<ul>
<li>Asegúrate de que tu wis2box ha sido configurado y está en funcionamiento.</li>
<li>Abre una terminal y conéctate a tu VM de estudiante usando SSH.</li>
<li>Conéctate al broker MQTT de tu instancia wis2box usando MQTT Explorer.</li>
<li>Abre la aplicación web wis2box (<code>http://&lt;tu-nombre-de-host&gt;/wis2box-webapp</code>) y asegúrate de estar conectado.</li>
</ul>
</div>
<h2 id="es-practical-sessions-converting-synop-data-to-bufr-form-uso-de-la-aplicacion-web-wis2box-webapp-para-convertir-fm-12-synop-a-bufr">Uso de la aplicación web wis2box-webapp para convertir FM-12 SYNOP a BUFR</h2>
<h3 id="es-practical-sessions-converting-synop-data-to-bufr-form-ejercicio-1-usando-la-aplicacion-web-wis2box-webapp-para-convertir-fm-12-synop-a-bufr">Ejercicio 1 - usando la aplicación web wis2box-webapp para convertir FM-12 SYNOP a BUFR</h3>
<p>Asegúrate de tener el token de autenticación para "procesos/wis2box" que generaste en el ejercicio anterior y que estás conectado a tu broker wis2box en MQTT Explorer.</p>
<p>Copia el siguiente mensaje:</p>
<div class="highlight"><pre><span></span><code>AAXX 27031
15015 02999 02501 10103 21090 39765 42952 57020 60001=
</code></pre></div>
<p>Abre la aplicación web wis2box y navega a la página synop2bufr usando el cajón de navegación izquierdo y procede de la siguiente manera:</p>
<ul>
<li>Pega el contenido que has copiado en el cuadro de entrada de texto.</li>
<li>Selecciona el mes y el año usando el selector de fecha, asume el mes actual para este ejercicio.</li>
<li>Selecciona un tema del menú desplegable (las opciones se basan en los conjuntos de datos configurados en wis2box).</li>
<li>Ingresa el token de autenticación "procesos/wis2box" que generaste anteriormente</li>
<li>Asegúrate de que "Publicar en WIS2" esté activado</li>
<li>Haz clic en "ENVIAR"</li>
</ul>
<p><center><img alt="Diálogo mostrando la página synop2bufr, incluyendo el botón de alternancia" src="../es/assets/img/synop2bufr-toggle.png"></center></p>
<p>Haz clic en enviar. Recibirás un mensaje de advertencia ya que la estación no está registrada en wis2box. Ve al editor de estaciones e importa la siguiente estación:</p>
<div class="highlight"><pre><span></span><code>0-20000-0-15015
</code></pre></div>
<p>Asegúrate de que la estación esté asociada con el tema que seleccionaste en el paso anterior y luego regresa a la página synop2bufr y repite el proceso con los mismos datos que antes.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cómo puedes ver el resultado de la conversión de FM-12 SYNOP a BUFR?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>La sección de resultados de la página muestra Advertencias, Errores y archivos BUFR de salida.</p>
<p>Haz clic en "Archivos BUFR de salida" para ver una lista de los archivos que se han generado. Deberías ver un archivo listado.</p>
<p>El botón de descarga permite que los datos BUFR se descarguen directamente a tu computadora.</p>
<p>El botón de inspección ejecuta un proceso para convertir y extraer los datos de BUFR.</p>
<p><center><img alt="Diálogo mostrando el resultado de enviar un mensaje exitosamente"
     src="../es/assets/img/synop2bufr-ex2-success.png"></center></p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Los datos de entrada FM-12 SYNOP no incluían la ubicación de la estación, la elevación o la altura del barómetro.
Confirma que estos están en los datos BUFR de salida, ¿de dónde provienen?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Hacer clic en el botón de inspección debería mostrar un diálogo como el que se muestra a continuación.</p>
<p><center><img alt="Resultados del botón de inspección mostrando los metadatos básicos de la estación, la ubicación de la estación y las propiedades observadas"
     src="../es/assets/img/synop2bufr-ex2.png"></center></p>
<p>Esto incluye la ubicación de la estación mostrada en un mapa y metadatos básicos, así como las observaciones en el mensaje.</p>
<p>Como parte de la transformación de FM-12 SYNOP a BUFR, se agregaron metadatos adicionales al archivo BUFR.</p>
<p>El archivo BUFR también puede ser inspeccionado descargando el archivo y validándolo usando una herramienta como el validador BUFR de ECMWF ecCodes.</p>
</details>
<p>Ve a MQTT Explorer y verifica el tema de notificaciones WIS2 para ver las notificaciones WIS2 que se han publicado.</p>
<h3 id="es-practical-sessions-converting-synop-data-to-bufr-form-ejercicio-2-entendiendo-la-lista-de-estaciones">Ejercicio 2 - entendiendo la lista de estaciones</h3>
<p>Para este próximo ejercicio convertirás un archivo que contiene múltiples informes, mira los datos a continuación:</p>
<div class="highlight"><pre><span></span><code>AAXX 27031
15015 02999 02501 10103 21090 39765 42952 57020 60001=
15020 02997 23104 10130 21075 30177 40377 58020 60001 81041=
15090 02997 53102 10139 21075 30271 40364 58031 60001 82046=
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Basado en el ejercicio anterior, observa el mensaje FM-12 SYNOP y predice cuántos mensajes BUFR
serán generados.</p>
<p>Ahora copia y pega este mensaje en el formulario SYNOP y envía los datos.</p>
<p>¿El número de mensajes generados coincidió con tu expectativa y si no, por qué no?</p>
</div>
<details class="warning">
<summary>Haz clic para revelar la respuesta</summary>
<p>Podrías haber esperado que se generaran tres mensajes BUFR, uno para cada informe meteorológico. Sin embargo, en lugar de eso, recibiste 2 advertencias y solo un archivo BUFR.</p>
<p>Para que un informe meteorológico se convierta a BUFR, se requieren los metadatos básicos contenidos en la lista de estaciones. Aunque el ejemplo anterior incluye tres informes meteorológicos, dos de las
tres estaciones que informaron no estaban registradas en tu wis2box.</p>
<p>Como resultado, solo uno de los tres informes meteorológicos resultó en un archivo BUFR generado y una notificación WIS2 publicada. Los otros dos informes meteorológicos fueron ignorados y se generaron advertencias.</p>
</details>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Toma nota de la relación entre el Identificador WIGOS y el identificador de estación tradicional incluido en la salida BUFR. En muchos casos, para estaciones listadas en el Volumen A del WMO-No. 9 en el momento de migrar a identificadores de estación WIGOS, el identificador de estación WIGOS se da por el identificador de estación tradicional con <code>0-20000-0</code> antepuesto,
por ejemplo, <code>15015</code> se ha convertido en <code>0-20000-0-15015</code>.</p>
</div>
<p>Usando la página de lista de estaciones, importa las siguientes estaciones:</p>
<div class="highlight"><pre><span></span><code>0-20000-0-15020
0-20000-0-15090
</code></pre></div>
<p>Asegúrate de que las estaciones estén asociadas con el tema que seleccionaste en el ejercicio anterior y luego regresa a la página synop2bufr y repite el proceso.</p>
<p>Ahora se deberían generar tres archivos BUFR y no debería haber advertencias ni errores listados en la aplicación web.</p>
<p>Además de la información básica de la estación, se requieren metadatos adicionales como la elevación de la estación sobre el nivel del mar y la altura del barómetro sobre el nivel del mar para la codificación a BUFR. Los campos están incluidos en las páginas de lista de estaciones y editor de estaciones.</p>
<h3 id="es-practical-sessions-converting-synop-data-to-bufr-form-ejercicio-3-depuracion">Ejercicio 3 - depuración</h3>
<p>En este último ejercicio identificarás y corregirás dos de los problemas más comunes encontrados al
usar esta herramienta para convertir FM-12 SYNOP a BUFR.</p>
<p>El ejemplo de datos se muestra en el cuadro a continuación, examina los datos e intenta resolver cualquier problema que pueda haber antes de enviar los datos a través de la aplicación web.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Puedes editar los datos en el cuadro de entrada en la página de la aplicación web. Si te pierdes algún problema, estos deberían ser detectados y resaltados como una advertencia o error una vez que se haya hecho clic en el botón de enviar.</p>
</div>
<div class="highlight"><pre><span></span><code>AAXX 27031
15015 02999 02501 10103 21090 39765 42952 57020 60001
15020 02997 23104 10130 21075 30177 40377 58020 60001 81041=
15090 02997 53102 10139 21075 30271 40364 58031 60001 82046=
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Qué problemas esperabas encontrar al convertir los datos a BUFR y cómo los superaste? ¿Hubo algún problema que no esperabas?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>En este primer ejemplo falta el símbolo de "fin de texto" (=), o delimitador de registro, entre el
primer y segundo informe meteorológico. En consecuencia, las líneas 2 y 3 se tratan como un solo informe,
lo que lleva a errores en el análisis del mensaje.</p>
</details>
<p>El segundo ejemplo a continuación contiene varios problemas comunes encontrados en los informes FM-12 SYNOP. Examina los
datos e intenta identificar los problemas y luego envía los datos corregidos a través de la aplicación web.</p>
<div class="highlight"><pre><span></span><code>AAXX 27031
15020 02997 23104 10/30 21075 30177 40377 580200 60001 81041=
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Qué problemas encontraste y cómo los resolviste?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Hay dos problemas en el informe meteorológico.</p>
<p>El primero, en el grupo de temperatura del aire firmada, tiene el carácter de las decenas establecido como ausente (/),
lo que lleva a un grupo inválido. En este ejemplo sabemos que la temperatura es de 13.0 grados
Celsius (de los ejemplos anteriores) y por lo tanto este problema puede ser corregido. Operacionalmente, el
valor correcto necesitaría ser confirmado con el observador.</p>
<p>El segundo problema ocurre en el grupo 5 donde hay un carácter adicional, con el carácter final duplicado. Este problema puede ser solucionado eliminando el carácter extra.</p>
</details>
<h2 id="es-practical-sessions-converting-synop-data-to-bufr-form-limpieza">Limpieza</h2>
<p>Durante los ejercicios en esta sesión habrás importado varios archivos en tu lista de estaciones. Navega a la
página de lista de estaciones y haz clic en los iconos de basura para eliminar las estaciones. Puede que necesites actualizar la página para que las estaciones se eliminen de la lista después de borrar.</p>
<p><center><img alt="Visor de metadatos de estación"
         src="../es/assets/img/synop2bufr-trash.png" width="600"></center></p>
<h2 id="es-practical-sessions-converting-synop-data-to-bufr-form-conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica, aprendiste:</p>
<ul>
<li>cómo se puede usar la herramienta synop2bufr para convertir informes FM-12 SYNOP a BUFR;</li>
<li>cómo enviar un informe FM-12 SYNOP a través de la aplicación web;</li>
<li>cómo diagnosticar y corregir errores simples en un informe FM-12 SYNOP;</li>
<li>la importancia de registrar estaciones en wis2box (y OSCAR/Surface);</li>
<li>y el uso del botón de inspección para ver el contenido de los datos BUFR.</li>
</ul>
</div></section><section class="print-page" id="es-practical-sessions-converting-csv-data-to-bufr" heading-number="2.9"><h1 id="es-practical-sessions-converting-csv-data-to-bufr-convertir-datos-csv-a-bufr">Convertir datos CSV a BUFR</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje</p>
<p>Al final de esta sesión práctica, serás capaz de:</p>
<ul>
<li>usar la <strong>Interfaz de Usuario de MinIO</strong> para subir archivos de datos CSV de entrada y monitorear el resultado</li>
<li>conocer el formato de datos CSV para usar con la plantilla automática de estación meteorológica BUFR por defecto</li>
<li>usar el editor de conjuntos de datos en la <strong>aplicación web wis2box</strong> para crear un conjunto de datos para publicar mensajes DAYCLI</li>
<li>conocer el formato de datos CSV para usar con la plantilla DAYCLI BUFR</li>
<li>usar <strong>wis2box webapp</strong> para validar y convertir datos de muestra para estaciones AWS a BUFR (opcional)</li>
</ul>
</div>
<h2 id="es-practical-sessions-converting-csv-data-to-bufr-introduccion">Introducción</h2>
<p>Los archivos de datos de valores separados por comas (CSV) se utilizan a menudo para registrar datos observacionales y otros datos en un formato tabular.
La mayoría de los registradores de datos utilizados para registrar la salida de sensores pueden exportar las observaciones en archivos delimitados, incluyendo en CSV.
De manera similar, cuando los datos se ingieren en una base de datos, es fácil exportar los datos requeridos en archivos formateados CSV.
Para ayudar en el intercambio de datos originalmente almacenados en formatos de datos tabulares, se ha implementado un convertidor de CSV a BUFR en
wis2box utilizando el mismo software que para SYNOP a BUFR.</p>
<p>En esta sesión aprenderás sobre el uso del convertidor csv2bufr en wis2box para las siguientes plantillas integradas:</p>
<ul>
<li><strong>AWS</strong> (aws-template.json) : Plantilla de mapeo para convertir datos CSV de un archivo simplificado de estación meteorológica automática a la secuencia BUFR 301150, 307096"</li>
<li><strong>DayCLI</strong> (daycli-template.json) : Plantilla de mapeo para convertir datos CSV climáticos diarios a la secuencia BUFR 307075</li>
</ul>
<h2 id="es-practical-sessions-converting-csv-data-to-bufr-preparacion">Preparación</h2>
<p>Asegúrate de que el stack de wis2box haya sido iniciado con <code>python3 wis2box.py start</code></p>
<p>Asegúrate de que tienes un navegador web abierto con la Interfaz de Usuario de MinIO para tu instancia yendo a <code>http://&lt;tu-host&gt;:9000</code>
Si no recuerdas tus credenciales de MinIO, puedes encontrarlas en el archivo <code>wis2box.env</code> en el directorio <code>wis2box-1.0.0rc1</code> en tu VM de estudiante.</p>
<p>Asegúrate de que tienes MQTT Explorer abierto y conectado a tu broker usando las credenciales <code>everyone/everyone</code>.</p>
<h2 id="es-practical-sessions-converting-csv-data-to-bufr-ejercicio-1-usar-csv2bufr-con-la-plantilla-aws">Ejercicio 1: Usar csv2bufr con la plantilla 'AWS'</h2>
<p>La plantilla 'AWS' proporciona una plantilla de mapeo predefinida para convertir datos CSV de estaciones AWS en apoyo a los requisitos de informes de GBON.</p>
<p>La descripción de la plantilla AWS se puede encontrar <a href="#csv2bufr-templates-aws-template">aquí</a>.</p>
<h3 id="es-practical-sessions-converting-csv-data-to-bufr-revisar-los-datos-de-entrada-de-ejemplo-aws">Revisar los datos de entrada de ejemplo aws</h3>
<p>Descarga el ejemplo para este ejercicio desde el enlace a continuación:</p>
<p><a href="/sample-data/aws-example.csv">aws-example.csv</a></p>
<p>Abre el archivo que descargaste en un editor e inspecciona el contenido:</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Examinando los campos de fecha, hora e identificación (identificadores WIGOS y tradicionales) ¿qué
notas? ¿Cómo se representaría la fecha de hoy?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Cada columna contiene una sola pieza de información. Por ejemplo, la fecha se divide en
año, mes y día, reflejando cómo se almacenan los datos en BUFR. La fecha de hoy se dividiría
en las columnas "año", "mes" y "día". De manera similar, la hora necesita ser
dividida en "hora" y "minuto" y el identificador de la estación WIGOS en sus respectivos componentes.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Mirando el archivo de datos, ¿cómo se codifican los datos faltantes?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Los datos faltantes en el archivo están representados por celdas vacías. En un archivo CSV esto sería
codificado por <code>,,</code>. Nota que esto es una celda vacía y no codificada como una cadena de longitud cero,
e.g. <code>,"",</code>.</p>
</details>
<div class="admonition hint">
<p class="admonition-title">Datos faltantes</p>
<p>Se reconoce que los datos pueden faltar por una variedad de razones, ya sea debido a fallos del sensor
o al parámetro no observado. En estos casos, los datos faltantes pueden codificarse
según la respuesta anterior, los otros datos en el informe siguen siendo válidos.</p>
</div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuáles son los identificadores de estación WIGOS para las estaciones que reportan datos en el archivo de ejemplo? ¿Cómo se definen en el archivo de entrada?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>El identificador de estación WIGOS está definido por 4 columnas separadas en el archivo:</p>
<ul>
<li><strong>wsi_series</strong>: Serie de identificador WIGOS</li>
<li><strong>wsi_issuer</strong>: Emisor WIGOS del identificador</li>
<li><strong>wsi_issue_number</strong>: Número de emisión WIGOS</li>
<li><strong>wsi_local</strong>: Identificador local WIGOS</li>
</ul>
<p>Los identificadores de estación WIGOS utilizados en el archivo de ejemplo son <code>0-20000-0-60351</code>, <code>0-20000-0-60355</code> y <code>0-20000-0-60360</code>. </p>
</details>
<h3 id="es-practical-sessions-converting-csv-data-to-bufr-actualizar-el-archivo-de-ejemplo">Actualizar el archivo de ejemplo</h3>
<p>Actualiza el archivo de ejemplo que descargaste para usar la fecha y hora de hoy y cambia los identificadores de estación WIGOS para usar estaciones que hayas registrado en wis2box-webapp.</p>
<h3 id="es-practical-sessions-converting-csv-data-to-bufr-subir-los-datos-a-minio-y-verificar-el-resultado">Subir los datos a MinIO y verificar el resultado</h3>
<p>Navega a la Interfaz de Usuario de MinIO y inicia sesión usando las credenciales del archivo <code>wis2box.env</code>.</p>
<p>Navega a <strong>wis2box-incoming</strong> y haz clic en el botón "Crear nueva ruta":</p>
<p><img alt="Imagen mostrando la Interfaz de Usuario de MinIO con el botón de crear carpeta destacado" src="../es/assets/img/minio-create-new-path.png"/></p>
<p>Crea una nueva carpeta en el bucket de MinIO que coincida con el id de conjunto de datos para el conjunto de datos que creaste con la plantilla='weather/surface-weather-observations/synop':</p>
<p><img alt="Imagen mostrando la Interfaz de Usuario de MinIO con el botón de crear carpeta destacado" src="../es/assets/img/minio-create-new-path-metadata_id.png"/></p>
<p>Sube el archivo de ejemplo que descargaste a la carpeta que creaste en el bucket de MinIO:</p>
<p><img alt="Imagen mostrando la Interfaz de Usuario de MinIO con aws-example subido" src="../es/assets/img/minio-upload-aws-example.png"/></center></p>
<p>Revisa el tablero de Grafana en <code>http://&lt;tu-host&gt;:3000</code> para ver si hay alguna ADVERTENCIA o ERROR. Si ves alguno, intenta solucionarlo y repite el ejercicio.</p>
<p>Revisa el MQTT Explorer para ver si recibes notificaciones de datos WIS2.</p>
<p>Si has ingestado los datos con éxito, deberías ver 3 notificaciones en el explorador MQTT en el tema <code>origin/a/wis2/&lt;id-centro&gt;/data/weather/surface-weather-observations/synop</code> para las 3 estaciones de las que informaste datos:</p>
<p><img width="450" alt="Imagen mostrando el explorador MQTT después de subir AWS" src="../es/assets/img/mqtt-explorer-aws-upload.png"/></p>
<h2 id="es-practical-sessions-converting-csv-data-to-bufr-ejercicio-2-usar-la-plantilla-daycli">Ejercicio 2 - Usar la plantilla 'DayCLI'</h2>
<p>En el ejercicio anterior usamos el conjunto de datos que creaste con el tipo de datos='weather/surface-weather-observations/synop', que ha preconfigurado la plantilla de conversión de CSV a BUFR a la plantilla AWS.</p>
<p>En el próximo ejercicio usaremos la plantilla 'DayCLI' para convertir datos climáticos diarios a BUFR.</p>
<p>La descripción de la plantilla DAYCLI se puede encontrar <a href="#csv2bufr-templates-daycli-template">aquí</a>.</p>
<div class="admonition note">
<p class="admonition-title">Acerca de la plantilla DAYCLI</p>
<p>Ten en cuenta que la secuencia BUFR DAYCLI se actualizará durante 2025 para incluir información adicional y banderas de control de calidad revisadas. La plantilla DAYCLI incluida en wis2box se actualizará para reflejar estos cambios. La OMM comunicará cuando el software de wis2box se actualice para incluir la nueva plantilla DAYCLI, para permitir a los usuarios actualizar sus sistemas en consecuencia.</p>
</div>
<h3 id="es-practical-sessions-converting-csv-data-to-bufr-crear-un-conjunto-de-datos-wis2box-para-publicar-mensajes-daycli">Crear un conjunto de datos wis2box para publicar mensajes DAYCLI</h3>
<p>Ve al editor de conjuntos de datos en la aplicación web wis2box y crea un nuevo conjunto de datos. Usa el mismo id de centro que en las sesiones prácticas anteriores y selecciona <strong>Tipo de Datos='climate/surface-based-observations/daily'</strong>:</p>
<p><img alt="Crear un nuevo conjunto de datos en la aplicación web wis2box para DAYCLI" src="../es/assets/img/wis2box-webapp-create-dataset-daycli.png"/></p>
<p>Haz clic en "CONTINUAR AL FORMULARIO" y añade una descripción para tu conjunto de datos, establece el cuadro delimitador y proporciona la información de contacto para el conjunto de datos. Una vez que hayas terminado de llenar todas las secciones, haz clic en 'VALIDAR FORMULARIO' y revisa el formulario.</p>
<p>Revisa los complementos de datos para los conjuntos de datos. Haz clic en "ACTUALIZAR" al lado del complemento con nombre "Datos CSV convertidos a BUFR" y verás que la plantilla está configurada para <strong>DayCLI</strong>:</p>
<p><img alt="Actualizar el complemento de datos para el conjunto de datos para usar la plantilla DAYCLI" src="../es/assets/img/wis2box-webapp-update-data-plugin-daycli.png"/></p>
<p>Cierra la configuración del complemento y envía el formulario usando el token de autenticación que creaste en la sesión práctica anterior.</p>
<p>Ahora deberías tener un segundo conjunto de datos en la aplicación web wis2box configurado para usar la plantilla DAYCLI para convertir datos CSV a BUFR.</p>
<h3 id="es-practical-sessions-converting-csv-data-to-bufr-revisar-los-datos-de-entrada-de-ejemplo-daycli">Revisar los datos de entrada de ejemplo daycli</h3>
<p>Descarga el ejemplo para este ejercicio desde el enlace a continuación:</p>
<p><a href="/sample-data/daycli-example.csv">daycli-example.csv</a></p>
<p>Abre el archivo que descargaste en un editor e inspecciona el contenido:</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Qué variables adicionales están incluidas en la plantilla daycli?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>La plantilla daycli incluye metadatos importantes sobre el emplazamiento del instrumento y las clasificaciones de calidad de medición para temperatura y humedad, banderas de control de calidad e información sobre cómo se ha calculado la temperatura media diaria.</p>
</details>
<h3 id="es-practical-sessions-converting-csv-data-to-bufr-actualizar-el-archivo-de-ejemplo_1">Actualizar el archivo de ejemplo</h3>
<p>El archivo de ejemplo contiene una fila de datos para cada día en un mes, e informa datos para una estación. Actualiza el archivo de ejemplo que descargaste para usar la fecha y hora de hoy y cambia los identificadores de estación WIGOS para usar una estación que hayas registrado en wis2box-webapp.</p>
<h3 id="es-practical-sessions-converting-csv-data-to-bufr-subir-los-datos-a-minio-y-verificar-el-resultado_1">Subir los datos a MinIO y verificar el resultado</h3>
<p>Como antes, necesitarás subir los datos al bucket 'wis2box-incoming' en MinIO para ser procesados por el convertidor csv2bufr. Esta vez necesitarás crear una nueva carpeta en el bucket de MinIO que coincida con el id de conjunto de datos para el conjunto de datos que creaste con la plantilla='climate/surface-based-observations/daily' que será diferente del id de conjunto de datos que usaste en el ejercicio anterior:</p>
<p><img alt="Imagen mostrando la Interfaz de Usuario de MinIO con DAYCLI-example subido" src="../es/assets/img/minio-upload-daycli-example.png"/></center></p>
<p>Después de subir los datos, verifica que no haya ADVERTENCIAS o ERRORES en el tablero de Grafana y revisa el explorador MQTT para ver si recibes notificaciones de datos WIS2.</p>
<p>Si has ingestado los datos con éxito, deberías ver 30 notificaciones en el explorador MQTT en el tema <code>origin/a/wis2/&lt;id-centro&gt;/data/climate/surface-based-observations/daily</code> para los 30 días del mes que informaste datos para:</p>
<p><img width="450" alt="Imagen mostrando el explorador MQTT después de subir DAYCLI" src="../es/assets/img/mqtt-daycli-template-success.png"/></p>
<h2 id="es-practical-sessions-converting-csv-data-to-bufr-ejercicio-3-usando-el-formulario-csv-en-wis2box-webapp-opcional">Ejercicio 3 - usando el formulario CSV en wis2box-webapp (opcional)</h2>
<p>La aplicación web wis2box proporciona una interfaz para subir datos CSV y convertirlos a BUFR antes de publicarlos en WIS2, usando la plantilla AWS.</p>
<p>El uso de este formulario está destinado a propósitos de depuración y validación, el método de envío recomendado para publicar datos de Estaciones Meteorológicas Automatizadas es configurar un proceso que suba automáticamente los datos al bucket de MinIO.</p>
<h3 id="es-practical-sessions-converting-csv-data-to-bufr-usar-el-formulario-csv-en-la-aplicacion-web-wis2box">Usar el formulario CSV en la aplicación web wis2box</h3>
<p>Navega al formulario CSV en la aplicación web wis2box
(<code>http://&lt;tu-nombre-de-host&gt;/wis2box-webapp/csv2bufr_form</code>).
Usa el archivo <a href="/sample-data/aws-example.csv">aws-example.csv</a> para este ejercicio.
Ahora deberías poder hacer clic en siguiente para previsualizar y validar el archivo.</p>
<p><center><img alt="Imagen mostrando la pantalla de carga de CSV a BUFR" src="../es/assets/img/csv2bufr-ex1.png"/></center></p>
<p>Al hacer clic en el botón siguiente, se carga el archivo en el navegador y se valida el contenido contra un esquema predefinido.
Aún no se ha convertido ni publicado ningún dato. En la pestaña de previsualización / validación, se te debería presentar una lista de advertencias
sobre datos faltantes, pero en este ejercicio se pueden ignorar.</p>
<p><center><img alt="Imagen mostrando la página de validación de ejemplo de CSV a BUFR con advertencias" src="../es/assets/img/csv2bufr-warnings.png"/></center></p>
<p>Haz clic en <em>siguiente</em> para continuar y se te pedirá que proporciones un id de conjunto de datos para los datos a publicar. Selecciona el id de conjunto de datos que creaste anteriormente y haz clic en <em>siguiente</em>.</p>
<p>Ahora deberías estar en una página de autorización donde se te pedirá que ingreses el token <code>processes/wis2box</code>
que has creado previamente. Ingresa este token y haz clic en el interruptor "Publicar en WIS2" para asegurarte
de que "Publicar en WIS2" esté seleccionado (ver captura de pantalla a continuación).</p>
<p><center><img alt="pantalla de autenticación y publicación csv2bufr" src="../es/assets/img/csv2bufr-toggle-publish.png"/></center></p>
<p>Haz clic en siguiente para transformar a BUFR y publicar, luego deberías ver la siguiente pantalla:</p>
<p><center><img alt="Imagen mostrando la pantalla de éxito de ejemplo de CSV a BUFR" src="../es/assets/img/csv2bufr-success.png"/></center></p>
<p>Al hacer clic en la flecha hacia abajo a la derecha de <code>Archivos BUFR de salida</code> deberían aparecer los botones <code>Descargar</code> e <code>Inspeccionar</code>.
Haz clic en inspeccionar para ver los datos y confirmar que los valores son los esperados.</p>
<p><center><img alt="Imagen mostrando la inspección de salida de CSV a BUFR" src="../es/assets/img/csv2bufr-inspect.png"/></center></p>
<h3 id="es-practical-sessions-converting-csv-data-to-bufr-depuracion-de-datos-de-entrada-invalidos">Depuración de datos de entrada inválidos</h3>
<p>En este ejercicio examinaremos qué sucede con los datos de entrada inválidos. Descarga el siguiente archivo de ejemplo haciendo clic en el
enlace a continuación. Este contiene los mismos datos que el primer archivo pero con las columnas vacías eliminadas.
Examina el archivo y confirma qué columnas han sido eliminadas y luego sigue el mismo proceso para convertir los datos a BUFR.</p>
<p><a href="/sample-data/csv2bufr-ex3a.csv">csv2bufr-ex3a.csv</a></p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Con las columnas faltantes en el archivo, ¿pudiste convertir los datos a BUFR?
¿Notaste algún cambio en las advertencias en la página de validación?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Deberías haber podido convertir los datos a BUFR, pero los mensajes de advertencia se habrán actualizado
para indicar que las columnas faltaban completamente en lugar de contener un valor faltante.</p>
</details>
<p>En este siguiente ejemplo se ha añadido una columna adicional al archivo CSV.</p>
<p><a href="/sample-data/csv2bufr-ex3b.csv">csv2bufr-ex3b.csv</a></p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Sin subir ni enviar el archivo, ¿puedes predecir qué sucederá cuando lo hagas?</p>
</div>
<p>Ahora sube y confirma si tu predicción fue correcta.</p>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Cuando se valide el archivo, ahora deberías recibir una advertencia de que la columna <code>index</code>
no se encuentra en el esquema y que los datos serán omitidos. Deberías poder hacer clic
y convertir a BUFR como en el ejemplo anterior.</p>
</details>
<p>En el último ejemplo de este ejercicio, los datos han sido modificados. Examina el contenido del archivo CSV.</p>
<p><a href="/sample-data/csv2bufr-ex3c.csv">csv2bufr-ex3c.csv</a></p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Qué ha cambiado en el archivo y qué crees que sucederá?</p>
</div>
<p>Ahora sube el archivo y confirma si estabas en lo correcto.</p>
<details class="warning">
<summary>Haz clic para revelar la respuesta</summary>
<p>Los campos de presión han sido convertidos de Pa a hPa en los datos de entrada. Sin embargo, el convertidor de CSV a BUFR
espera las mismas unidades que BUFR (Pa) y, como resultado, estos campos fallan la validación por estar
fuera de rango. Deberías poder editar el CSV para corregir el problema y volver a enviar los datos regresando
a la primera pantalla y</p>
</details></section><section class="print-page" id="es-practical-sessions-automating-data-ingestion" heading-number="2.10"><h1 id="es-practical-sessions-automating-data-ingestion-automatizacion-de-la-ingestion-de-datos">Automatización de la ingestión de datos</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje</p>
<p>Al final de esta sesión práctica, serás capaz de:</p>
<ul>
<li>entender cómo los plugins de datos de tu conjunto de datos determinan el flujo de trabajo de ingestión de datos</li>
<li>ingresar datos en wis2box usando un script con el cliente Python de MinIO</li>
<li>ingresar datos en wis2box accediendo a MinIO a través de SFTP</li>
</ul>
</div>
<h2 id="es-practical-sessions-automating-data-ingestion-introduccion">Introducción</h2>
<p>El contenedor <strong>wis2box-management</strong> escucha eventos del servicio de almacenamiento MinIO para activar la ingestión de datos basada en los plugins de datos configurados para tu conjunto de datos. Esto te permite subir datos al bucket de MinIO y activar el flujo de trabajo de wis2box para publicar datos en el broker WIS2.</p>
<p>Los plugins de datos definen los módulos de Python que son cargados por el contenedor <strong>wis2box-management</strong> y determinan cómo se transforman y publican los datos.</p>
<p>En el ejercicio anterior deberías haber creado un conjunto de datos usando la plantilla <code>surface-based-observations/synop</code> que incluía los siguientes plugins de datos:</p>
<p><img alt="mapeos de datos" src="../es/assets/img/wis2box-data-mappings.png" width="800"></p>
<p>Cuando se sube un archivo a MinIO, wis2box coincidirá el archivo con un conjunto de datos cuando la ruta del archivo contenga el id del conjunto de datos (<code>metadata_id</code>) y determinará los plugins de datos a usar basándose en la extensión del archivo y el patrón de archivo definido en los mapeos del conjunto de datos.</p>
<p>En las sesiones anteriores, activamos el flujo de trabajo de ingestión de datos usando la funcionalidad de línea de comandos de wis2box, que sube datos al almacenamiento de MinIO en la ruta correcta.</p>
<p>Los mismos pasos se pueden realizar programáticamente usando cualquier software cliente de MinIO o S3, permitiéndote automatizar tu ingestión de datos como parte de tus flujos de trabajo operativos.</p>
<p>Alternativamente, también puedes acceder a MinIO usando el protocolo SFTP para subir datos y activar el flujo de trabajo de ingestión de datos.</p>
<h2 id="es-practical-sessions-automating-data-ingestion-preparacion">Preparación</h2>
<p>Inicia sesión en tu VM de estudiante usando tu cliente SSH (PuTTY u otro).</p>
<p>Asegúrate de que wis2box está funcionando:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box-1.0.0rc1/
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>start
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>status
</code></pre></div>
<p>Asegúrate de que MQTT Explorer está funcionando y conectado a tu instancia. Si todavía estás conectado desde la sesión anterior, borra cualquier mensaje anterior que puedas haber recibido de la cola.
Esto se puede hacer desconectándote y reconectándote o haciendo clic en el icono del cubo de basura para el tema dado.</p>
<p>Asegúrate de tener un navegador web abierto con el tablero de Grafana para tu instancia yendo a <code>http://&lt;tu-host&gt;:3000</code></p>
<p>Y asegúrate de tener una segunda pestaña abierta con la interfaz de usuario de MinIO en <code>http://&lt;tu-host&gt;:9001</code>. Recuerda que necesitas iniciar sesión con el <code>WIS2BOX_STORAGE_USER</code> y <code>WIS2BOX_STORAGE_PASSWORD</code> definidos en tu archivo <code>wis2box.env</code>.</p>
<h2 id="es-practical-sessions-automating-data-ingestion-ejercicio-1-configurar-un-script-de-python-para-ingresar-datos-en-minio">Ejercicio 1: configurar un script de Python para ingresar datos en MinIO</h2>
<p>En este ejercicio usaremos el cliente Python de MinIO para copiar datos en MinIO.</p>
<p>MinIO proporciona un cliente Python que se puede instalar de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code>pip3<span class="w"> </span>install<span class="w"> </span>minio
</code></pre></div>
<p>En tu VM de estudiante el paquete 'minio' para Python ya estará instalado.</p>
<p>Ve al directorio <code>exercise-materials/data-ingest-exercises</code>; este directorio contiene un script de muestra <code>copy_file_to_incoming.py</code> que usa el cliente Python de MinIO para copiar un archivo en MinIO.</p>
<p>Intenta ejecutar el script para copiar el archivo de datos de muestra <code>csv-aws-example.csv</code> en el bucket <code>wis2box-incoming</code> en MinIO de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/exercise-materials/data-ingest-exercises
python3<span class="w"> </span>copy_file_to_incoming.py<span class="w"> </span>csv-aws-example.csv
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Obtendrás un error ya que el script no está configurado para acceder al punto final de MinIO en tu wis2box aún.</p>
</div>
<p>El script necesita conocer el punto final correcto para acceder a MinIO en tu wis2box. Si wis2box está ejecutándose en tu host, el punto final de MinIO está disponible en <code>http://&lt;tu-host&gt;:9000</code>. El script también necesita ser actualizado con tu contraseña de almacenamiento y la ruta en el bucket de MinIO para almacenar los datos.</p>
<div class="admonition question">
<p class="admonition-title">Actualiza el script e ingresa los datos CSV</p>
<p>Edita el script <code>copy_file_to_incoming.py</code> para corregir los errores, utilizando uno de los siguientes métodos:
- Desde la línea de comandos: usa el editor de texto <code>nano</code> o <code>vim</code> para editar el script
- Usando WinSCP: inicia una nueva conexión usando el Protocolo de Archivo <code>SCP</code> y las mismas credenciales que tu cliente SSH. Navega al directorio <code>exercise-materials/data-ingest-exercises</code> y edita <code>copy_file_to_incoming.py</code> usando el editor de texto incorporado</p>
<p>Asegúrate de:</p>
<ul>
<li>definir el punto final correcto de MinIO para tu host</li>
<li>proporcionar la contraseña de almacenamiento correcta para tu instancia de MinIO</li>
<li>proporcionar la ruta correcta en el bucket de MinIO para almacenar los datos</li>
</ul>
<p>Vuelve a ejecutar el script para ingresar el archivo de datos de muestra <code>csv-aws-example.csv</code> en MinIO:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>copy_file_to_incoming.py<span class="w"> </span>csv-aws-example.csv
</code></pre></div>
<p>Y asegúrate de que los errores estén resueltos.</p>
</div>
<p>Puedes verificar que los datos se subieron correctamente revisando la interfaz de usuario de MinIO y viendo si los datos de muestra están disponibles en el directorio correcto en el bucket <code>wis2box-incoming</code>.</p>
<p>Puedes usar el tablero de Grafana para verificar el estado del flujo de trabajo de ingestión de datos.</p>
<p>Finalmente, puedes usar MQTT Explorer para verificar si se publicaron notificaciones para los datos que ingresaste. Deberías ver que los datos CSV fueron transformados al formato BUFR y que se publicó una notificación de datos WIS2 con una URL "canónica" para habilitar la descarga de los datos BUFR.</p>
<h2 id="es-practical-sessions-automating-data-ingestion-ejercicio-2-ingestion-de-datos-binarios">Ejercicio 2: Ingestión de datos binarios</h2>
<p>A continuación, intentaremos ingresar datos binarios en formato BUFR usando el cliente Python de MinIO.</p>
<p>wis2box puede ingresar datos binarios en formato BUFR usando el plugin <code>wis2box.data.bufr4.ObservationDataBUFR</code> incluido en wis2box.</p>
<p>Este plugin dividirá el archivo BUFR en mensajes BUFR individuales y publicará cada mensaje en el broker MQTT. Si la estación para el mensaje BUFR correspondiente no está definida en los metadatos de la estación de wis2box, el mensaje no será publicado.</p>
<p>Dado que usaste la plantilla <code>surface-based-observations/synop</code> en la sesión anterior, tus mapeos de datos incluyen el plugin <code>FM-12 data converted to BUFR</code> para los mapeos del conjunto de datos. Este plugin carga el módulo <code>wis2box.data.synop2bufr.ObservationDataSYNOP2BUFR</code> para ingresar los datos.</p>
<div class="admonition question">
<p class="admonition-title">Ingestión de datos binarios en formato BUFR</p>
<p>Ejecuta el siguiente comando para copiar el archivo de datos binarios <code>bufr-example.bin</code> en el bucket <code>wis2box-incoming</code> en MinIO:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>copy_file_to_incoming.py<span class="w"> </span>bufr-example.bin
</code></pre></div>
</div>
<p>Revisa el tablero de Grafana y MQTT Explorer para ver si los datos de prueba fueron ingresados y publicados con éxito y si ves algún error, intenta resolverlo.</p>
<div class="admonition question">
<p class="admonition-title">Verifica la ingestión de datos</p>
<p>¿Cuántos mensajes fueron publicados en el broker MQTT para esta muestra de datos?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Si ingresaste y publicaste con éxito la última muestra de datos, deberías haber recibido 10 nuevas notificaciones en el broker MQTT de wis2box. Cada notificación corresponde a datos para una estación para una marca de tiempo de observación.</p>
<p>El plugin <code>wis2box.data.bufr4.ObservationDataBUFR</code> divide el archivo BUFR en mensajes BUFR individuales y publica un mensaje para cada estación y marca de tiempo de observación.</p>
</details>
<h2 id="es-practical-sessions-automating-data-ingestion-ejercicio-3-ingestion-de-datos-synop-en-formato-ascii">Ejercicio 3: Ingestión de datos SYNOP en formato ASCII</h2>
<p>En la sesión anterior usamos el formulario SYNOP en la <strong>wis2box-webapp</strong> para ingresar datos SYNOP en formato ASCII. También puedes ingresar datos SYNOP en formato ASCII subiéndolos a MinIO.</p>
<p>En la sesión anterior deberías haber creado un conjunto de datos que incluyera el plugin 'FM-12 data converted to BUFR' para los mapeos del conjunto de datos:</p>
<p><img alt="mapeos del conjunto de datos" src="../es/assets/img/wis2box-data-mappings.png" width="800"></p>
<p>Este plugin carga el módulo <code>wis2box.data.synop2bufr.ObservationDataSYNOP2BUFR</code> para ingresar los datos.</p>
<p>Intenta usar el cliente Python de MinIO para ingresar los datos de prueba <code>synop-202307.txt</code> y <code>synop-202308.txt</code> en tu instancia de wis2box.</p>
<p>Ten en cuenta que los 2 archivos contienen el mismo contenido, pero el nombre del archivo es diferente. El nombre del archivo se utiliza para determinar la fecha de la muestra de datos.</p>
<p>El plugin synop2bufr depende de un patrón de archivo para extraer la fecha del nombre del archivo. El primer grupo en la expresión regular se utiliza para extraer el año y el segundo grupo se utiliza para extraer el mes.</p>
<div class="admonition question">
<p class="admonition-title">Ingesta de datos SYNOP FM-12 en formato ASCII</p>
<p>Regresa a la interfaz de MinIO en tu navegador y navega al bucket <code>wis2box-incoming</code> y al camino donde subiste los datos de prueba en el ejercicio anterior.</p>
<p>Sube los nuevos archivos en el camino correcto en el bucket <code>wis2box-incoming</code> en MinIO para activar el flujo de trabajo de ingestión de datos.</p>
<p>Revisa el tablero de Grafana y MQTT Explorer para ver si los datos de prueba fueron ingresados y publicados con éxito.</p>
<p>¿Cuál es la diferencia en el <code>properties.datetime</code> entre los dos mensajes publicados en el broker MQTT?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Revisa las propiedades de las últimas 2 notificaciones en MQTT Explorer y notarás que una notificación tiene:</p>
<div class="highlight"><pre><span></span><code>&quot;properties&quot;: {
    &quot;data_id&quot;: &quot;wis2/urn:wmo:md:nl-knmi-test:surface-based-observations.synop/WIGOS_0-20000-0-60355_20230703T090000&quot;,
    &quot;datetime&quot;: &quot;2023-07-03T09:00:00Z&quot;,
    ...
</code></pre></div>
<p>y la otra notificación tiene:</p>
<div class="highlight"><pre><span></span><code>&quot;properties&quot;: {
    &quot;data_id&quot;: &quot;wis2/urn:wmo:md:nl-knmi-test:surface-based-observations.synop/WIGOS_0-20000-0-60355_20230803T09:00:00Z&quot;,
    ...
</code></pre></div>
<p>El nombre del archivo fue utilizado para determinar el año y el mes de la muestra de datos.</p>
</details>
<h2 id="es-practical-sessions-automating-data-ingestion-ejercicio-4-ingestion-de-datos-en-minio-usando-sftp">Ejercicio 4: Ingestión de datos en MinIO usando SFTP</h2>
<p>Los datos también pueden ser ingresados en MinIO a través de SFTP.</p>
<p>El servicio MinIO habilitado en el stack de wis2box tiene SFTP habilitado en el puerto 8022. Puedes acceder a MinIO a través de SFTP usando las mismas credenciales que para la interfaz de usuario de MinIO. En este ejercicio usaremos las credenciales de administrador para el servicio MinIO como se define en <code>wis2box.env</code>, pero también puedes crear usuarios adicionales en la interfaz de usuario de MinIO.</p>
<p>Para acceder a MinIO a través de SFTP puedes usar cualquier software cliente SFTP. En este ejercicio usaremos WinSCP, que es un cliente SFTP gratuito para Windows.</p>
<p>Usando WinSCP, tu conexión se vería de la siguiente manera:</p>
<p><img alt="conexión sftp-winscp" src="../es/assets/img/winscp-sftp-connection.png" width="400"></p>
<p>Para el nombre de usuario y contraseña, usa los valores de las variables de entorno <code>WIS2BOX_STORAGE_USERNAME</code> y <code>WIS2BOX_STORAGE_PASSWORD</code> de tu archivo <code>wis2box.env</code>. Haz clic en 'guardar' para guardar la sesión y luego en 'iniciar sesión' para conectar.</p>
<p>Cuando inicies sesión verás el bucket <code>wis2box-incoming</code> y <code>wis2box-public</code> en el directorio raíz. Puedes subir datos al bucket <code>wis2box-incoming</code> para activar el flujo de trabajo de ingestión de datos.</p>
<p>Haz clic en el bucket <code>wis2box-incoming</code> para navegar a este bucket, luego haz clic derecho y selecciona <em>Nuevo</em>-&gt;<em>Directorio</em> para crear un nuevo directorio en el bucket <code>wis2box-incoming</code>.</p>
<p>Crea el directorio <em>not-a-valid-path</em> y sube el archivo <em>randomfile.txt</em> en este directorio (puedes usar cualquier archivo que desees).</p>
<p>Luego revisa el tablero de Grafana en el puerto 3000 para ver si se activó el flujo de trabajo de ingestión de datos. Deberías ver:</p>
<p><em>ERROR - Error de validación de ruta: No se pudo coincidir http://minio:9000/wis2box-incoming/not-a-valid-path/randomfile.txt con el conjunto de datos, la ruta debería incluir uno de los siguientes: ...</em></p>
<p>El error indica que el archivo fue subido a MinIO y se activó el flujo de trabajo de ingestión de datos, pero dado que la ruta no coincide con ningún conjunto de datos en la instancia de wis2box, el mapeo de datos falló.</p>
<p>También puedes usar <code>sftp</code> desde la línea de comandos:</p>
<p><div class="highlight"><pre><span></span><code>sftp<span class="w"> </span>-P<span class="w"> </span><span class="m">8022</span><span class="w"> </span>-oBatchMode<span class="o">=</span>no<span class="w"> </span>-o<span class="w"> </span><span class="nv">StrictHostKeyChecking</span><span class="o">=</span>no<span class="w"> </span>&lt;mi-hostname-o-ip&gt;
</code></pre></div>
Inicia sesión usando las credenciales definidas en <code>wis2box.env</code> para las variables de entorno <code>WIS2BOX_STORAGE_USERNAME</code> y <code>WIS2BOX_STORAGE_PASSWORD</code>, navega al bucket <code>wis2box-incoming</code> y luego crea un directorio y sube un archivo de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>wis2box-incoming
mkdir<span class="w"> </span>not-a-valid-path
<span class="nb">cd</span><span class="w"> </span>not-a-valid-path
put<span class="w"> </span>~/exercise-materials/data-ingest-exercises/synop.txt<span class="w"> </span>.
</code></pre></div>
<p>Esto resultará en un "Error de validación de ruta" en el tablero de Grafana indicando que el archivo fue subido a MinIO.</p>
<p>Para salir del cliente sftp, escribe <code>exit</code>. </p>
<div class="admonition question">
<p class="admonition-title">Ingesta de datos en MinIO usando SFTP</p>
<p>Intenta ingresar el archivo <code>synop.txt</code> en tu instancia de wis2box usando SFTP para activar el flujo de trabajo de ingestión de datos.</p>
<p>Revisa la interfaz de usuario de MinIO para ver si el archivo fue subido al camino correcto en el bucket <code>wis2box-incoming</code>.</p>
<p>Revisa el tablero de Grafana para ver si se activó el flujo de trabajo de ingestión de datos o si hubo algún error.</p>
</div>
<p>Para asegurarte de que tus datos se ingieren correctamente, asegúrate de que el archivo se suba en el bucket <code>wis2box-incoming</code> en un directorio que coincida con el id del conjunto de datos o el tema de tu conjunto de datos.</p>
<h2 id="es-practical-sessions-automating-data-ingestion-conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica, aprendiste cómo:</p>
<ul>
<li>activar el flujo de trabajo de wis2box usando un script de Python y el cliente Python de MinIO</li>
<li>usar diferentes plugins de datos para ingresar diferentes formatos de datos</li>
<li>subir datos a MinIO usando SFTP</li>
</ul>
</div></section><section class="print-page" id="es-practical-sessions-adding-gts-headers-to-wis2-notifications" heading-number="2.11"><h1 id="es-practical-sessions-adding-gts-headers-to-wis2-notifications-anadiendo-encabezados-gts-a-las-notificaciones-wis2">Añadiendo encabezados GTS a las notificaciones WIS2</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje</p>
<p>Al final de esta sesión práctica, serás capaz de:</p>
<ul>
<li>configurar un mapeo entre el nombre del archivo y los encabezados GTS</li>
<li>ingerir datos con un nombre de archivo que coincida con los encabezados GTS</li>
<li>ver los encabezados GTS en las notificaciones WIS2</li>
</ul>
</div>
<h2 id="es-practical-sessions-adding-gts-headers-to-wis2-notifications-introduccion">Introducción</h2>
<p>Los miembros de la OMM que deseen detener su transmisión de datos en el GTS durante la fase de transición a WIS2 necesitarán añadir encabezados GTS a sus notificaciones WIS2. Estos encabezados permiten que la puerta de enlace de WIS2 a GTS reenvíe los datos a la red GTS.</p>
<p>Esto permite a los miembros que han migrado a usar un nodo WIS2 para la publicación de datos desactivar su sistema MSS y asegurar que sus datos sigan estando disponibles para los miembros que aún no han migrado a WIS2.</p>
<p>La propiedad GTS en el Mensaje de Notificación WIS2 necesita ser añadida como una propiedad adicional al Mensaje de Notificación WIS2. La propiedad GTS es un objeto JSON que contiene los encabezados GTS que se requieren para que los datos sean reenviados a la red GTS.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;gts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;ttaaii&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FTAE31&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;cccc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;VTBB&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Dentro de wis2box puedes añadir esto a las Notificaciones WIS2 automáticamente proporcionando un archivo adicional llamado <code>gts_headers_mapping.csv</code> que contiene la información requerida para mapear los encabezados GTS a los nombres de archivos entrantes.</p>
<p>Este archivo debe ser colocado en el directorio definido por <code>WIS2BOX_HOST_DATADIR</code> en tu <code>wis2box.env</code> y debe tener las siguientes columnas:</p>
<ul>
<li><code>string_in_filepath</code>: una cadena que es parte del nombre del archivo que se utilizará para coincidir con los encabezados GTS</li>
<li><code>TTAAii</code>: el encabezado TTAAii que se añadirá a la notificación WIS2</li>
<li><code>CCCC</code>: el encabezado CCCC que se añadirá a la notificación WIS2</li>
</ul>
<h2 id="es-practical-sessions-adding-gts-headers-to-wis2-notifications-preparacion">Preparación</h2>
<p>Asegúrate de tener acceso SSH a tu VM de estudiante y que tu instancia de wis2box esté funcionando.</p>
<p>Asegúrate de estar conectado al broker MQTT de tu instancia de wis2box usando MQTT Explorer. Puedes usar las credenciales públicas <code>everyone/everyone</code> para conectarte al broker.</p>
<p>Asegúrate de tener un navegador web abierto con el tablero de Grafana para tu instancia yendo a <code>http://&lt;tu-host&gt;:3000</code></p>
<h2 id="es-practical-sessions-adding-gts-headers-to-wis2-notifications-creando-gts_headers_mappingcsv">Creando <code>gts_headers_mapping.csv</code></h2>
<p>Para añadir encabezados GTS a tus notificaciones WIS2, se requiere un archivo CSV que mapee los encabezados GTS a los nombres de archivos entrantes.</p>
<p>El archivo CSV debe ser nombrado (exactamente) <code>gts_headers_mapping.csv</code> y debe ser colocado en el directorio definido por <code>WIS2BOX_HOST_DATADIR</code> en tu <code>wis2box.env</code>.</p>
<h2 id="es-practical-sessions-adding-gts-headers-to-wis2-notifications-ejercicio-1-proporcionando-un-archivo-gts_headers_mappingcsv">Ejercicio 1: proporcionando un archivo <code>gts_headers_mapping.csv</code></h2>
<p>Copia el archivo <code>exercise-materials/gts-headers-exercises/gts_headers_mapping.csv</code> a tu instancia de wis2box y colócalo en el directorio definido por <code>WIS2BOX_HOST_DATADIR</code> en tu <code>wis2box.env</code>.</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>~/exercise-materials/gts-headers-exercises/gts_headers_mapping.csv<span class="w"> </span>~/wis2box-data
</code></pre></div>
<p>Luego reinicia el contenedor de gestión de wis2box para aplicar los cambios:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>restart<span class="w"> </span>wis2box-management
</code></pre></div>
<h2 id="es-practical-sessions-adding-gts-headers-to-wis2-notifications-ejercicio-2-ingeriendo-datos-con-encabezados-gts">Ejercicio 2: Ingeriendo datos con encabezados GTS</h2>
<p>Copia el archivo <code>exercise-materials/gts-headers-exercises/A_SMRO01YRBK171200_C_EDZW_20240717120502.txt</code> al directorio definido por <code>WIS2BOX_HOST_DATADIR</code> en tu <code>wis2box.env</code>:</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>~/exercise-materials/gts-headers-exercises/A_SMRO01YRBK171200_C_EDZW_20240717120502.txt<span class="w"> </span>~/wis2box-data
</code></pre></div>
<p>Luego inicia sesión en el contenedor <strong>wis2box-management</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box-1.0.0rc1
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login
</code></pre></div>
<p>Desde la línea de comandos de wis2box podemos ingerir el archivo de datos de muestra <code>A_SMRO01YRBK171200_C_EDZW_20240717120502.txt</code> en un conjunto de datos específico de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>data<span class="w"> </span>ingest<span class="w"> </span>-p<span class="w"> </span>/data/wis2box/A_SMRO01YRBK171200_C_EDZW_20240717120502.txt<span class="w"> </span>--metadata-id<span class="w"> </span>urn:wmo:md:not-my-centre:core.surface-based-observations.synop
</code></pre></div>
<p>Asegúrate de reemplazar la opción <code>metadata-id</code> con el identificador correcto para tu conjunto de datos.</p>
<p>Revisa el tablero de Grafana para ver si los datos fueron ingeridos correctamente. Si ves algún AVISO o ERROR, intenta solucionarlo y repite el comando <code>wis2box data ingest</code>.</p>
<h2 id="es-practical-sessions-adding-gts-headers-to-wis2-notifications-ejercicio-3-viendo-los-encabezados-gts-en-la-notificacion-wis2">Ejercicio 3: Viendo los encabezados GTS en la Notificación WIS2</h2>
<p>Ve al MQTT Explorer y busca el Mensaje de Notificación WIS2 para los datos que acabas de ingerir.</p>
<p>El Mensaje de Notificación WIS2 debería contener los encabezados GTS que proporcionaste en el archivo <code>gts_headers_mapping.csv</code>.</p>
<h2 id="es-practical-sessions-adding-gts-headers-to-wis2-notifications-conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica, aprendiste cómo:
  - añadir encabezados GTS a tus notificaciones WIS2
  - verificar que los encabezados GTS están disponibles a través de tu instalación de wis2box</p>
</div></section><section class="print-page" id="es-practical-sessions-datasets-with-access-control" heading-number="2.12"><h1 id="es-practical-sessions-datasets-with-access-control-configuracion-de-un-conjunto-de-datos-recomendado-con-control-de-acceso">Configuración de un conjunto de datos recomendado con control de acceso</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje</p>
<p>Al final de esta sesión práctica, podrás:</p>
<ul>
<li>crear un nuevo conjunto de datos con política de datos 'recomendado'</li>
<li>añadir un token de acceso al conjunto de datos</li>
<li>validar que el conjunto de datos no se puede acceder sin el token de acceso</li>
<li>añadir el token de acceso a las cabeceras HTTP para acceder al conjunto de datos</li>
</ul>
</div>
<h2 id="es-practical-sessions-datasets-with-access-control-introduccion">Introducción</h2>
<p>Los conjuntos de datos que no se consideran 'núcleo' en la WMO pueden configurarse opcionalmente con una política de control de acceso. wis2box proporciona un mecanismo para añadir un token de acceso a un conjunto de datos que evitará que los usuarios descarguen datos a menos que proporcionen el token de acceso en las cabeceras HTTP.</p>
<h2 id="es-practical-sessions-datasets-with-access-control-preparacion">Preparación</h2>
<p>Asegúrate de tener acceso SSH a tu VM de estudiante y que tu instancia de wis2box esté funcionando.</p>
<p>Asegúrate de estar conectado al broker MQTT de tu instancia de wis2box usando MQTT Explorer. Puedes usar las credenciales públicas <code>everyone/everyone</code> para conectarte al broker.</p>
<p>Asegúrate de tener un navegador web abierto con la wis2box-webapp para tu instancia accediendo a <code>http://&lt;tu-host&gt;/wis2box-webapp</code>.</p>
<h2 id="es-practical-sessions-datasets-with-access-control-ejercicio-1-crear-un-nuevo-conjunto-de-datos-con-politica-de-datos-recomendado">Ejercicio 1: crear un nuevo conjunto de datos con política de datos 'recomendado'</h2>
<p>Ve a la página 'editor de conjuntos de datos' en la wis2box-webapp y crea un nuevo conjunto de datos. Usa el mismo centro-id que en las sesiones prácticas anteriores y usa la plantilla='observaciones-meteorológicas-de-superficie/synop'.</p>
<p>Haz clic en 'OK' para continuar.</p>
<p>En el editor de conjuntos de datos, establece la política de datos a 'recomendado' (nota que cambiar la política de datos actualizará la 'Jerarquía de Temas').
Reemplaza el 'ID Local' generado automáticamente con un nombre descriptivo para el conjunto de datos, por ejemplo, 'datos-recomendados-con-control-de-acceso':</p>
<p><img alt="crear-conjunto-datos-recomendado" src="../es/assets/img/create-dataset-recommended.png" width="800"></p>
<p>Continúa llenando los campos requeridos para Propiedades Espaciales e Información de Contacto, y 'Valida el formulario' para buscar errores.</p>
<p>Finalmente, envía el conjunto de datos, utilizando el token de autenticación creado previamente, y verifica que el nuevo conjunto de datos se haya creado en la wis2box-webapp.</p>
<p>Revisa MQTT-explorer para ver que recibes el Mensaje de Notificación WIS2 anunciando el nuevo registro de Metadatos de Descubrimiento en el tema <code>origin/a/wis2/&lt;tu-centro-id&gt;/metadata</code>.</p>
<h2 id="es-practical-sessions-datasets-with-access-control-ejercicio-2-anadir-un-token-de-acceso-al-conjunto-de-datos">Ejercicio 2: añadir un token de acceso al conjunto de datos</h2>
<p>Inicia sesión en el contenedor de gestión de wis2box,</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box-1.0.0rc1
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login
</code></pre></div>
<p>Desde la línea de comandos dentro del contenedor puedes asegurar un conjunto de datos usando el comando <code>wis2box auth add-token</code>, usando la bandera <code>--metadata-id</code> para especificar el identificador de metadatos del conjunto de datos y el token de acceso como argumento.</p>
<p>Por ejemplo, para añadir el token de acceso <code>S3cr3tT0k3n</code> al conjunto de datos con identificador de metadatos <code>urn:wmo:md:not-my-centre:core.surface-based-observations.synop</code>:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>auth<span class="w"> </span>add-token<span class="w"> </span>--metadata-id<span class="w"> </span>urn:wmo:md:not-my-centre:reco.surface-based-observations.synop<span class="w"> </span>S3cr3tT0k3n
</code></pre></div>
<p>Sal del contenedor de gestión de wis2box:</p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<h2 id="es-practical-sessions-datasets-with-access-control-ejercicio-3-publicar-algunos-datos-en-el-conjunto-de-datos">Ejercicio 3: publicar algunos datos en el conjunto de datos</h2>
<p>Copia el archivo <code>exercise-materials/access-control-exercises/aws-example2.csv</code> al directorio definido por <code>WIS2BOX_HOST_DATADIR</code> en tu <code>wis2box.env</code>:</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>~/exercise-materials/access-control-exercises/aws-example2.csv<span class="w"> </span>~/wis2box-data
</code></pre></div>
<p>Luego usa WinSCP o un editor de línea de comandos para editar el archivo <code>aws-example2.csv</code> y actualizar los identificadores de estación WIGOS en los datos de entrada para que coincidan con las estaciones que tienes en tu instancia de wis2box.</p>
<p>A continuación, ve al editor de estaciones en la wis2box-webapp. Para cada estación que usaste en <code>aws-example2.csv</code>, actualiza el campo 'tema' para que coincida con el 'tema' del conjunto de datos que creaste en el ejercicio anterior.</p>
<p>Esta estación ahora estará asociada a 2 temas, uno para el conjunto de datos 'núcleo' y otro para el conjunto de datos 'recomendado':</p>
<p><img alt="editar-estaciones-añadir-temas" src="../es/assets/img/edit-stations-add-topics.png" width="600"></p>
<p>Necesitarás usar tu token para <code>collections/stations</code> para guardar los datos de la estación actualizada.</p>
<p>A continuación, inicia sesión en el contenedor de gestión de wis2box:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/wis2box-1.0.0rc1
python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login
</code></pre></div>
<p>Desde la línea de comandos de wis2box podemos ingerir el archivo de datos de muestra <code>aws-example2.csv</code> en un conjunto de datos específico de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code>wis2box<span class="w"> </span>data<span class="w"> </span>ingest<span class="w"> </span>-p<span class="w"> </span>/data/wis2box/aws-example2.csv<span class="w"> </span>--metadata-id<span class="w"> </span>urn:wmo:md:not-my-centre:reco.surface-based-observations.synop
</code></pre></div>
<p>Asegúrate de proporcionar el identificador de metadatos correcto para tu conjunto de datos y <strong>verifica que recibes notificaciones de datos WIS2 en MQTT Explorer</strong>, en el tema <code>origin/a/wis2/&lt;tu-centro-id&gt;/data/recommended/surface-based-observations/synop</code>.</p>
<p>Revisa el enlace canónico en el Mensaje de Notificación WIS2 y copia/pega el enlace en el navegador para intentar descargar los datos.</p>
<p>Deberías ver un error 403 Prohibido.</p>
<h2 id="es-practical-sessions-datasets-with-access-control-ejercicio-4-anadir-el-token-de-acceso-a-las-cabeceras-http-para-acceder-al-conjunto-de-datos">Ejercicio 4: añadir el token de acceso a las cabeceras HTTP para acceder al conjunto de datos</h2>
<p>Para demostrar que se requiere el token de acceso para acceder al conjunto de datos, reproduciremos el error que viste en el navegador usando la función de línea de comandos <code>wget</code>.</p>
<p>Desde la línea de comandos en tu VM de estudiante, usa el comando <code>wget</code> con el enlace canónico que copiaste del Mensaje de Notificación WIS2.</p>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>&lt;enlace-canónico&gt;
</code></pre></div>
<p>Deberías ver que la solicitud HTTP devuelve <em>401 No autorizado</em> y los datos no se descargan.</p>
<p>Ahora añade el token de acceso a las cabeceras HTTP para acceder al conjunto de datos.</p>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>--header<span class="o">=</span><span class="s2">&quot;Authorization: Bearer S3cr3tT0k3n&quot;</span><span class="w"> </span>&lt;enlace-canónico&gt;
</code></pre></div>
<p>Ahora los datos deberían descargarse correctamente.</p>
<h2 id="es-practical-sessions-datasets-with-access-control-conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica, aprendiste cómo:</p>
<ul>
<li>crear un nuevo conjunto de datos con política de datos 'recomendado'</li>
<li>añadir un token de acceso al conjunto de datos</li>
<li>validar que el conjunto de datos no se puede acceder sin el token de acceso</li>
<li>añadir el token de acceso a las cabeceras HTTP para acceder al conjunto de datos</li>
</ul>
</div></section><section class="print-page" id="es-practical-sessions-downloading-data-from-wis2" heading-number="2.13"><h1 id="es-practical-sessions-downloading-data-from-wis2-descarga-y-decodificacion-de-datos-desde-wis2">Descarga y decodificación de datos desde WIS2</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje!</p>
<p>Al final de esta sesión práctica, serás capaz de:</p>
<ul>
<li>usar el "wis2downloader" para suscribirte a las notificaciones de datos de WIS2 y descargar datos a tu sistema local</li>
<li>ver el estado de las descargas en el tablero de Grafana</li>
<li>decodificar algunos datos descargados usando el contenedor "decode-bufr-jupyter"</li>
</ul>
</div>
<h2 id="es-practical-sessions-downloading-data-from-wis2-introduccion">Introducción</h2>
<p>En esta sesión aprenderás cómo configurar una suscripción a un Broker de WIS2 y descargar datos automáticamente a tu sistema local usando el servicio "wis2downloader" incluido en wis2box.</p>
<div class="admonition note">
<p class="admonition-title">Acerca de wis2downloader</p>
<p>El wis2downloader también está disponible como un servicio independiente que puede ejecutarse en un sistema diferente al que está publicando las notificaciones de WIS2. Consulta <a href="https://pypi.org/project/wis2downloader/">wis2downloader</a> para más información sobre cómo usar el wis2downloader como un servicio independiente.</p>
<p>Si deseas desarrollar tu propio servicio para suscribirte a las notificaciones de WIS2 y descargar datos, puedes usar el <a href="https://github.com/wmo-im/wis2downloader">código fuente de wis2downloader</a> como referencia.</p>
</div>
<div class="admonition otros herramientas para acceder a datos de wis2">
<p class="admonition-title">Otros</p>
<p>Las siguientes herramientas también pueden usarse para descubrir y acceder a datos de WIS2:</p>
<ul>
<li><a href="https://github.com/wmo-im/pywiscat">pywiscat</a> proporciona capacidad de búsqueda sobre el Catálogo Global de Descubrimiento de WIS2 en apoyo al reporte y análisis del Catálogo de WIS2 y sus metadatos de descubrimiento asociados</li>
<li><a href="https://github.com/wmo-im/pywis-pubsub">pywis-pubsub</a> proporciona capacidad de suscripción y descarga de datos de la OMM desde servicios de infraestructura de WIS2</li>
</ul>
</div>
<h2 id="es-practical-sessions-downloading-data-from-wis2-preparacion">Preparación</h2>
<p>Antes de comenzar, por favor inicia sesión en tu VM de estudiante y asegúrate de que tu instancia de wis2box esté funcionando.</p>
<h2 id="es-practical-sessions-downloading-data-from-wis2-ejercicio-1-visualizacion-del-tablero-de-wis2download-en-grafana">Ejercicio 1: visualización del tablero de wis2download en Grafana</h2>
<p>Abre un navegador web y navega al tablero de Grafana para tu instancia de wis2box yendo a <code>http://&lt;tu-host&gt;:3000</code>.</p>
<p>Haz clic en tableros en el menú de la izquierda, y luego selecciona el <strong>tablero de wis2downloader</strong>.</p>
<p>Deberías ver el siguiente tablero:</p>
<p><img alt="Tablero de wis2downloader" src="../es/assets/img/wis2downloader-dashboard.png" /></p>
<p>Este tablero se basa en métricas publicadas por el servicio de wis2downloader y te mostrará el estado de las descargas que están en curso.</p>
<p>En la esquina superior izquierda puedes ver las suscripciones que están actualmente activas.</p>
<p>Mantén este tablero abierto ya que lo usarás para monitorear el progreso de la descarga en el próximo ejercicio.</p>
<h2 id="es-practical-sessions-downloading-data-from-wis2-ejercicio-2-revision-de-la-configuracion-de-wis2downloader">Ejercicio 2: revisión de la configuración de wis2downloader</h2>
<p>El servicio de wis2downloader iniciado por el stack de wis2box puede configurarse usando las variables de entorno definidas en tu archivo wis2box.env.</p>
<p>Las siguientes variables de entorno son utilizadas por el wis2downloader:</p>
<pre><code>- DOWNLOAD_BROKER_HOST: El nombre de host del broker MQTT al que conectar. Por defecto es globalbroker.meteo.fr
- DOWNLOAD_BROKER_PORT: El puerto del broker MQTT al que conectar. Por defecto es 443 (HTTPS para websockets)
- DOWNLOAD_BROKER_USERNAME: El nombre de usuario para conectar al broker MQTT. Por defecto es everyone
- DOWNLOAD_BROKER_PASSWORD: La contraseña para conectar al broker MQTT. Por defecto es everyone
- DOWNLOAD_BROKER_TRANSPORT: websockets o tcp, el mecanismo de transporte para conectar al broker MQTT. Por defecto es websockets,
- DOWNLOAD_RETENTION_PERIOD_HOURS: El período de retención en horas para los datos descargados. Por defecto es 24
- DOWNLOAD_WORKERS: El número de trabajadores de descarga para usar. Por defecto es 8. Determina el número de descargas paralelas.
- DOWNLOAD_MIN_FREE_SPACE_GB: El espacio libre mínimo en GB para mantener en el volumen que aloja las descargas. Por defecto es 1.
</code></pre>
<p>Para revisar la configuración actual del wis2downloader, puedes usar el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>~/wis2box-1.0.0rc1/wis2box.env<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>DOWNLOAD
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Revisa la configuración del wis2downloader</p>
<p>¿Cuál es el broker MQTT predeterminado al que se conecta el wis2downloader?</p>
<p>¿Cuál es el período de retención predeterminado para los datos descargados?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>El broker MQTT predeterminado al que se conecta el wis2downloader es <code>globalbroker.meteo.fr</code>.</p>
<p>El período de retención predeterminado para los datos descargados es de 24 horas.</p>
</details>
<div class="admonition note">
<p class="admonition-title">Actualizando la configuración del wis2downloader</p>
<p>Para actualizar la configuración del wis2downloader, puedes editar el archivo wis2box.env. Para aplicar los cambios puedes volver a ejecutar el comando de inicio para el stack de wis2box:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>start
</code></pre></div>
<p>Y verás que el servicio de wis2downloader se reinicia con la nueva configuración.</p>
</div>
<p>Puedes mantener la configuración predeterminada para el propósito de este ejercicio.</p>
<h2 id="es-practical-sessions-downloading-data-from-wis2-ejercicio-3-anadiendo-suscripciones-al-wis2downloader">Ejercicio 3: añadiendo suscripciones al wis2downloader</h2>
<p>Dentro del contenedor <strong>wis2downloader</strong>, puedes usar la línea de comandos para listar, añadir y eliminar suscripciones.</p>
<p>Para iniciar sesión en el contenedor <strong>wis2downloader</strong>, usa el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login<span class="w"> </span>wis2downloader
</code></pre></div>
<p>Luego usa el siguiente comando para listar las suscripciones que están actualmente activas:</p>
<div class="highlight"><pre><span></span><code>wis2downloader<span class="w"> </span>list-subscriptions
</code></pre></div>
<p>Este comando devuelve una lista vacía ya que actualmente no hay suscripciones activas.</p>
<p>Para el propósito de este ejercicio, nos suscribiremos al siguiente tema <code>cache/a/wis2/de-dwd-gts-to-wis2/#</code>, para suscribirnos a los datos publicados por el gateway GTS-to-WIS2 alojado por DWD y las notificaciones de descarga desde el Cache Global.</p>
<p>Para añadir esta suscripción, usa el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>wis2downloader<span class="w"> </span>add-subscription<span class="w"> </span>--topic<span class="w"> </span>cache/a/wis2/de-dwd-gts-to-wis2/#
</code></pre></div>
<p>Luego sal del contenedor <strong>wis2downloader</strong> escribiendo <code>exit</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<p>Revisa el tablero de wis2downloader en Grafana para ver la nueva suscripción añadida. Espera unos minutos y deberías ver que las primeras descargas comienzan. Ve al siguiente ejercicio una vez que hayas confirmado que las descargas están comenzando.</p>
<h2 id="es-practical-sessions-downloading-data-from-wis2-ejercicio-4-visualizacion-de-los-datos-descargados">Ejercicio 4: visualización de los datos descargados</h2>
<p>El servicio de wis2downloader en el stack de wis2box descarga los datos en el directorio 'downloads' en el directorio que definiste como WIS2BOX_HOST_DATADIR en tu archivo wis2box.env. Para ver el contenido del directorio de descargas, puedes usar el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-R<span class="w"> </span>~/wis2box-data/downloads
</code></pre></div>
<p>Nota que los datos descargados se almacenan en directorios nombrados según el tema en el que se publicó la Notificación de WIS2.</p>
<h2 id="es-practical-sessions-downloading-data-from-wis2-ejercicio-5-eliminando-suscripciones-del-wis2downloader">Ejercicio 5: eliminando suscripciones del wis2downloader</h2>
<p>A continuación, vuelve a iniciar sesión en el contenedor de wis2downloader:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login<span class="w"> </span>wis2downloader
</code></pre></div>
<p>y elimina la suscripción que hiciste del wis2downloader, usando el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>wis2downloader<span class="w"> </span>remove-subscription<span class="w"> </span>--topic<span class="w"> </span>cache/a/wis2/de-dwd-gts-to-wis2/#
</code></pre></div>
<p>Y sal del contenedor de wis2downloader escribiendo <code>exit</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<p>Revisa el tablero de wis2downloader en Grafana para ver la suscripción eliminada. Deberías ver que las descargas se detienen.</p>
<h2 id="es-practical-sessions-downloading-data-from-wis2-ejercicio-6-suscribirse-al-wis2training-broker-y-configurar-una-nueva-suscripcion">Ejercicio 6: suscribirse al wis2training-broker y configurar una nueva suscripción</h2>
<p>Para el próximo ejercicio nos suscribiremos al wis2training-broker.</p>
<p>Esto demuestra cómo suscribirse a un broker que no es el broker predeterminado y te permitirá descargar algunos datos publicados desde el Broker de Entrenamiento de WIS2.</p>
<p>Edita el archivo wis2box.env y cambia DOWNLOAD_BROKER_HOST a <code>wis2training-broker.wis2dev.io</code>, cambia DOWNLOAD_BROKER_PORT a <code>1883</code> y cambia DOWNLOAD_BROKER_TRANSPORT a <code>tcp</code>:</p>
<div class="highlight"><pre><span></span><code># configuración del descargador
DOWNLOAD_BROKER_HOST=wis2training-broker.wis2dev.io
DOWNLOAD_BROKER_PORT=1883
DOWNLOAD_BROKER_USERNAME=everyone
DOWNLOAD_BROKER_PASSWORD=everyone
# mecanismo de transporte de descarga (tcp o websockets)
DOWNLOAD_BROKER_TRANSPORT=tcp
</code></pre></div>
<p>Luego reinicia el stack de wis2box para aplicar los cambios:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>start
</code></pre></div>
<p>Revisa los registros del wis2downloader para ver si la conexión con el nuevo broker fue exitosa:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>logs<span class="w"> </span>wis2downloader
</code></pre></div>
<p>Deberías ver el siguiente mensaje de registro:</p>
<div class="highlight"><pre><span></span><code>...
INFO - Conectando...
INFO - Host: wis2training-broker.wis2dev.io, puerto: 1883
INFO - Conectado exitosamente
</code></pre></div>
<p>Ahora configuraremos una nueva suscripción al tema para descargar datos de trayectoria de ciclones del Broker de Entrenamiento de WIS2.</p>
<p>Inicia sesión en el contenedor <strong>wis2downloader</strong>:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login<span class="w"> </span>wis2downloader
</code></pre></div>
<p>Y ejecuta el siguiente comando (copia y pega esto para evitar errores tipográficos):</p>
<div class="highlight"><pre><span></span><code>wis2downloader<span class="w"> </span>add-subscription<span class="w"> </span>--topic<span class="w"> </span>origin/a/wis2/int-wis2-training/data/core/weather/prediction/forecast/medium-range/probabilistic/trajectory
</code></pre></div>
<p>Sal del contenedor <strong>wis2downloader</strong> escribiendo <code>exit</code>.</p>
<p>Espera hasta que veas que las descargas comienzan en el tablero de wis2downloader en Grafana.</p>
<div class="admonition note">
<p class="admonition-title">Descargando datos del Broker de Entrenamiento de WIS2</p>
<p>El Broker de Entrenamiento de WIS2 es un broker de prueba que se utiliza con fines de entrenamiento y puede no publicar datos todo el tiempo.</p>
<p>Durante las sesiones de entrenamiento en persona, el entrenador local asegurará que el Broker de Entrenamiento de WIS2 publique datos para que los descargues.</p>
<p>Si estás haciendo este ejercicio fuera de una sesión de entrenamiento, es posible que no veas ningún dato siendo descargado.</p>
</div>
<p>Revisa que los datos fueron descargados revisando los registros de wis2downloader nuevamente con:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>logs<span class="w"> </span>wis2downloader
</code></pre></div>
<p>Deberías ver un mensaje de registro similar al siguiente:</p>
<div class="highlight"><pre><span></span><code>[...] INFO - Mensaje recibido bajo el tema origin/a/wis2/int-wis2-training/data/core/weather/prediction/forecast/medium-range/probabilistic/trajectory
[...] INFO - Descargado A_JSXX05ECEP020000_C_ECMP_...
</code></pre></div>
<h2 id="es-practical-sessions-downloading-data-from-wis2-ejercicio-7-decodificacion-de-los-datos-descargados">Ejercicio 7: decodificación de los datos descargados</h2>
<p>Para demostrar cómo puedes decodificar los datos descargados, iniciaremos un nuevo contenedor usando la imagen 'decode-bufr-jupyter'.</p>
<p>Este contenedor iniciará un servidor de cuadernos Jupyter en tu instancia que incluye la biblioteca "ecCodes" que puedes usar para decodificar datos BUFR.</p>
<p>Usaremos los cuadernos de ejemplo incluidos en <code>~/exercise-materials/notebook-examples</code> para decodificar los datos descargados de las trayectorias de ciclones tropicales.</p>
<p>Para iniciar el contenedor, usa el siguiente comando:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>decode-bufr-jupyter<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-v<span class="w"> </span>~/wis2box-data/downloads:/root/downloads<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-p<span class="w"> </span><span class="m">8888</span>:8888<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">JUPYTER_TOKEN</span><span class="o">=</span>dataismagic!<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>mlimper/decode-bufr-jupyter
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Acerca del contenedor decode-bufr-jupyter</p>
<p>El contenedor <code>decode-bufr-jupyter</code> es un contenedor personalizado que incluye la biblioteca ecCodes y ejecuta un servidor de cuadernos Jupyter. El contenedor se basa en una imagen que incluye la biblioteca <code>ecCodes</code> para decodificar datos BUFR, junto con bibliotecas para trazar y analizar datos.</p>
<p>El comando anterior inicia el contenedor en modo separado, con el nombre <code>decode-bufr-jupyter</code>, el puerto 8888 está mapeado al sistema host y la variable de entorno <code>JUPYTER_TOKEN</code> está configurada como <code>dataismagic!</code>.</p>
<p>El comando anterior también monta el directorio <code>~/wis2box-data/downloads</code> en <code>/root/downloads</code> en el contenedor. Esto asegura que los datos descargados estén disponibles para el servidor de cuadernos Jupyter.</p>
</div>
<p>Una vez que el contenedor esté iniciado, puedes acceder al servidor de cuadernos Jupyter navegando a <code>http://&lt;tu-host&gt;:8888</code> en tu navegador web.</p>
<p>Verás una pantalla solicitándote que ingreses una "Contraseña o token".</p>
<p>Proporciona el token <code>dataismagic!</code> para iniciar sesión en el servidor de cuadernos Jupyter.</p>
<p>Después de iniciar sesión, deberías ver la siguiente pantalla que lista los directorios en el contenedor:</p>
<p><img alt="Inicio de Jupyter notebook" src="../es/assets/img/jupyter-files-screen1.png" /></p>
<p>Haz doble clic en el directorio <code>example-notebooks</code> para abrirlo.</p>
<p>Deberías ver la siguiente pantalla que lista los cuadernos de ejemplo, haz doble clic en el cuaderno <code>tropical_cyclone_track.ipynb</code> para abrirlo:</p>
<p><img alt="Cuadernos de ejemplo de Jupyter notebook" src="../es/assets/img/jupyter-files-screen2.png" /></p>
<p>Ahora deberías estar en el cuaderno Jupyter para decodificar los datos de la trayectoria del ciclón tropical:</p>
<p><img alt="Cuaderno Jupyter de trayectoria de ciclón tropical" src="../es/assets/img/jupyter-tropical-cyclone-track.png" /></p>
<p>Lee las instrucciones en el cuaderno y ejecuta las celdas para decodificar los datos descargados de las trayectorias de los ciclones tropicales. Ejecuta cada celda haciendo clic en la celda y luego haciendo clic en el botón de ejecutar en la barra de herramientas o presionando <code>Shift+Enter</code>.</p>
<p>Al final deberías ver un gráfico de la probabilidad de impacto de las trayectorias de los ciclones tropicales:</p>
<p><img alt="Trayectorias de ciclones tropicales" src="../es/assets/img/tropical-cyclone-track-map.png" /></p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>El resultado muestra la probabilidad predicha de la trayectoria de la tormenta tropical dentro de 200 km. ¿Cómo actualizarías el cuaderno para mostrar la probabilidad predicha de la trayectoria de la tormenta tropical dentro de 300 km?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Para actualizar el cuaderno para mostrar la probabilidad predicha de la trayectoria de la tormenta tropical dentro de una distancia diferente, puedes actualizar la variable <code>distance_threshold</code> en el bloque de código que calcula la probabilidad de impacto.</p>
<p>Para mostrar la probabilidad predicha de la trayectoria de la tormenta tropical dentro de 300 km,</p>
<div class="highlight"><pre><span></span><code><span class="c1"># establecer el umbral de distancia (metros)</span>
<span class="n">distance_threshold</span> <span class="o">=</span> <span class="mi">300000</span>  <span class="c1"># 300 km en metros</span>
</code></pre></div>
<p>Luego vuelve a ejecutar las celdas en el cuaderno para ver el gráfico actualizado.</p>
</details>
<div class="admonition note">
<p class="admonition-title">Decodificación de datos BUFR</p>
<p>El ejercicio que acabas de hacer proporcionó un ejemplo específico de cómo puedes decodificar datos BUFR usando la biblioteca ecCodes. Diferentes tipos de datos pueden requerir diferentes pasos de decodificación y es posible que necesites consultar la documentación del tipo de datos con el que estás trabajando.</p>
<p>Para más información, por favor consulta la <a href="https://confluence.ecmwf.int/display/ECC">documentación de ecCodes</a>.</p>
</div>
<h2 id="es-practical-sessions-downloading-data-from-wis2-conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica, aprendiste cómo:</p>
<ul>
<li>usar el 'wis2downloader' para suscribirte a un Broker de WIS2 y descargar datos a tu sistema local</li>
<li>ver el estado de las descargas en el tablero de Grafana</li>
<li>decodificar algunos datos descargados usando el contenedor 'decode-bufr-jupyter'</li>
</ul>
</div></section><section class="print-page" id="es-practical-sessions-discovering-datasets-from-wis2-gdc" heading-number="2.14"><h1 id="es-practical-sessions-discovering-datasets-from-wis2-gdc-descubriendo-conjuntos-de-datos-del-catalogo-global-de-descubrimiento-wis2">Descubriendo conjuntos de datos del Catálogo Global de Descubrimiento WIS2</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje!</p>
<p>Al final de esta sesión práctica, podrás:</p>
<ul>
<li>usar pywiscat para descubrir conjuntos de datos del Catálogo Global de Descubrimiento (GDC)</li>
</ul>
</div>
<h2 id="es-practical-sessions-discovering-datasets-from-wis2-gdc-introduccion">Introducción</h2>
<p>En esta sesión aprenderás cómo descubrir datos del Catálogo Global de Descubrimiento WIS2 (GDC).</p>
<p>Actualmente, están disponibles los siguientes GDCs:</p>
<ul>
<li>Medio Ambiente y Cambio Climático Canadá, Servicio Meteorológico de Canadá: <a href="https://wis2-gdc.weather.gc.ca">https://wis2-gdc.weather.gc.ca</a></li>
<li>Administración Meteorológica de China: <a href="https://gdc.wis.cma.cn/api">https://gdc.wis.cma.cn/api</a></li>
<li>Servicio Meteorológico Alemán: <a href="https://wis2.dwd.de/gdc">https://wis2.dwd.de/gdc</a></li>
</ul>
<p>Durante las sesiones de capacitación locales, se configura un GDC local para permitir a los participantes consultar el GDC sobre los metadatos que publicaron desde sus instancias de wis2box. En este caso, los instructores proporcionarán la URL al GDC local.</p>
<h2 id="es-practical-sessions-discovering-datasets-from-wis2-gdc-preparacion">Preparación</h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Antes de comenzar, por favor inicia sesión en tu VM de estudiante.</p>
</div>
<h2 id="es-practical-sessions-discovering-datasets-from-wis2-gdc-instalacion-de-pywiscat">Instalación de pywiscat</h2>
<p>Usa el instalador de paquetes de Python <code>pip3</code> para instalar pywiscat en tu VM:
<div class="highlight"><pre><span></span><code>pip3<span class="w"> </span>install<span class="w"> </span>pywiscat
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Si encuentras el siguiente error:</p>
<div class="highlight"><pre><span></span><code>WARNING: The script pywiscat is installed in &#39;/home/username/.local/bin&#39; which is not on PATH.
Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.
</code></pre></div>
<p>Entonces ejecuta el siguiente comando:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/home/<span class="nv">$USER</span>/.local/bin
</code></pre></div>
<p>...donde <code>$USER</code> es tu nombre de usuario en tu VM.</p>
</div>
<p>Verifica que la instalación haya sido exitosa:</p>
<div class="highlight"><pre><span></span><code>pywiscat<span class="w"> </span>--version
</code></pre></div>
<h2 id="es-practical-sessions-discovering-datasets-from-wis2-gdc-encontrando-datos-con-pywiscat">Encontrando datos con pywiscat</h2>
<p>Por defecto, pywiscat se conecta al Catálogo Global de Descubrimiento de Canadá. Vamos a configurar pywiscat para consultar el GDC de entrenamiento estableciendo la variable de entorno <code>PYWISCAT_GDC_URL</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">PYWISCAT_GDC_URL</span><span class="o">=</span>http://&lt;local-gdc-host-or-ip&gt;
</code></pre></div>
<p>Vamos a usar <a href="https://github.com/wmo-im/pywiscat">pywiscat</a> para consultar el GDC configurado como parte del entrenamiento.</p>
<div class="highlight"><pre><span></span><code>pywiscat<span class="w"> </span>search<span class="w"> </span>--help
</code></pre></div>
<p>Ahora busca en el GDC todos los registros:</p>
<div class="highlight"><pre><span></span><code>pywiscat<span class="w"> </span>search
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuántos registros se devuelven de la búsqueda?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>El número de registros depende del GDC que estés consultando. Al usar el GDC de entrenamiento local, deberías ver que el número de registros es igual al número de conjuntos de datos que han sido ingresados en el GDC durante las otras sesiones prácticas.</p>
</details>
<p>Intentemos consultar el GDC con una palabra clave:</p>
<div class="highlight"><pre><span></span><code>pywiscat<span class="w"> </span>search<span class="w"> </span>-q<span class="w"> </span>observations
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuál es la política de datos de los resultados?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Todos los datos devueltos deben especificar datos "core"</p>
</details>
<p>Intenta consultas adicionales con <code>-q</code></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>La bandera <code>-q</code> permite la siguiente sintaxis:</p>
<ul>
<li><code>-q synop</code>: encuentra todos los registros con la palabra "synop"</li>
<li><code>-q temp</code>: encuentra todos los registros con la palabra "temp"</li>
<li><code>-q "observations AND fiji"</code>: encuentra todos los registros con las palabras "observations" y "fiji"</li>
<li><code>-q "observations NOT fiji"</code>: encuentra todos los registros que contienen la palabra "observations" pero no la palabra "fiji"</li>
<li><code>-q "synop OR temp"</code>: encuentra todos los registros con "synop" o "temp"</li>
<li><code>-q "obs~"</code>: búsqueda difusa</li>
</ul>
<p>Cuando busques términos con espacios, enciérralos en comillas dobles.</p>
</div>
<p>Obtengamos más detalles sobre un resultado de búsqueda específico que nos interese:</p>
<div class="highlight"><pre><span></span><code>pywiscat<span class="w"> </span>get<span class="w"> </span>&lt;id&gt;
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Usa el valor <code>id</code> de la búsqueda anterior.</p>
</div>
<h2 id="es-practical-sessions-discovering-datasets-from-wis2-gdc-conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica, aprendiste a:</p>
<ul>
<li>usar pywiscat para descubrir conjuntos de datos del Catálogo Global de Descubrimiento WIS2</li>
</ul>
</div></section><section class="print-page" id="es-practical-sessions-querying-data-using-the-wis2box-api" heading-number="2.15"><h1 id="es-practical-sessions-querying-data-using-the-wis2box-api-consulta-de-datos-usando-la-api-de-wis2box">Consulta de datos usando la API de wis2box</h1>
<div class="admonition abstract">
<p class="admonition-title">Resultados de aprendizaje</p>
<p>Al final de esta sesión práctica, serás capaz de:</p>
<ul>
<li>usar la API de wis2box para consultar y filtrar tus estaciones</li>
<li>usar la API de wis2box para consultar y filtrar tus datos</li>
</ul>
</div>
<h2 id="es-practical-sessions-querying-data-using-the-wis2box-api-introduccion">Introducción</h2>
<p>La API de wis2box proporciona acceso de descubrimiento y consulta de manera legible por máquina a los datos que han sido ingeridos en wis2box. La API se basa en el estándar OGC API - Features y está implementada usando <a href="https://pygeoapi.io">pygeoapi</a>.</p>
<p>La API de wis2box proporciona acceso a las siguientes colecciones:</p>
<ul>
<li>Estaciones</li>
<li>Metadatos de descubrimiento</li>
<li>Notificaciones de datos</li>
<li>más una colección por conjunto de datos configurado, que almacena la salida de bufr2geojson (el complemento <code>bufr2geojson</code> debe estar habilitado en la configuración de mapeo de datos para llenar los elementos en la colección de conjunto de datos).</li>
</ul>
<p>En esta sesión práctica aprenderás a utilizar la API de datos para navegar y consultar datos que han sido ingeridos en wis2box.</p>
<h2 id="es-practical-sessions-querying-data-using-the-wis2box-api-preparacion">Preparación</h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Navega a la página de inicio de la API de wis2box en tu navegador web:</p>
<p><code>http://&lt;tu-host&gt;/oapi</code></p>
</div>
<p><img alt="wis2box-api-página-de-inicio" src="../es/assets/img/wis2box-api-landing-page.png" width="600"></p>
<h2 id="es-practical-sessions-querying-data-using-the-wis2box-api-inspeccionando-colecciones">Inspeccionando colecciones</h2>
<p>Desde la página de inicio, haz clic en el enlace 'Colecciones'.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuántas colecciones de conjuntos de datos ves en la página resultante? ¿Qué crees que representa cada colección?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Debería haber 4 colecciones mostradas, incluyendo "Estaciones", "Metadatos de descubrimiento" y "Notificaciones de datos"</p>
</details>
<h2 id="es-practical-sessions-querying-data-using-the-wis2box-api-inspeccionando-estaciones">Inspeccionando estaciones</h2>
<p>Desde la página de inicio, haz clic en el enlace 'Colecciones', luego haz clic en el enlace 'Estaciones'.</p>
<p><img alt="wis2box-api-colecciones-estaciones" src="../es/assets/img/wis2box-api-collections-stations.png" width="600"></p>
<p>Haz clic en el enlace 'Explorar', luego haz clic en el enlace 'json'.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuántas estaciones se devuelven? Compara este número con la lista de estaciones en <code>http://&lt;tu-host&gt;/wis2box-webapp/station</code></p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>El número de estaciones de la API debería ser igual al número de estaciones que ves en la webapp de wis2box.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cómo podemos consultar por una sola estación (por ejemplo, <code>Balaka</code>)?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Consulta la API con <code>http://&lt;tu-host&gt;/oapi/collections/stations/items?q=Balaka</code>.</p>
</details>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>El ejemplo anterior está basado en los datos de prueba de Malawi. Intenta probarlo con las estaciones que has ingerido como parte de los ejercicios anteriores.</p>
</div>
<h2 id="es-practical-sessions-querying-data-using-the-wis2box-api-inspeccionando-observaciones">Inspeccionando observaciones</h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>El ejemplo anterior está basado en los datos de prueba de Malawi. Intenta probarlo con las observaciones que has ingerido como parte de los ejercicios.</p>
</div>
<p>Desde la página de inicio, haz clic en el enlace 'Colecciones', luego haz clic en el enlace 'Observaciones meteorológicas de superficie de Malawi'.</p>
<p><img alt="wis2box-api-colecciones-observaciones-de-malawi" src="../es/assets/img/wis2box-api-collections-malawi-obs.png" width="600"></p>
<p>Haz clic en el enlace 'Consultables'.</p>
<p><img alt="wis2box-api-colecciones-observaciones-de-malawi-consultables" src="../es/assets/img/wis2box-api-collections-malawi-obs-queryables.png" width="600"></p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Qué consultable se usaría para filtrar por identificador de estación?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>El <code>wigos_station_identifer</code> es el consultable correcto.</p>
</details>
<p>Navega a la página anterior (es decir, <code>http://&lt;tu-host&gt;/oapi/collections/urn:wmo:md:mwi:mwi_met_centre:surface-weather-observations</code>)</p>
<p>Haz clic en el enlace 'Explorar'.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cómo podemos visualizar la respuesta JSON?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Haciendo clic en el enlace 'JSON' en la parte superior derecha de la página, o añadiendo <code>f=json</code> a la solicitud de la API en el navegador web.</p>
</details>
<p>Inspecciona la respuesta JSON de las observaciones.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cuántos registros se devuelven?</p>
</div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cómo podemos limitar la respuesta a 3 observaciones?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Añade <code>limit=3</code> a la solicitud de la API.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cómo podemos ordenar la respuesta por las observaciones más recientes?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Añade <code>sortby=-resultTime</code> a la solicitud de la API (nota el signo <code>-</code> para denotar orden descendente). Para ordenar por las observaciones más antiguas, actualiza la solicitud para incluir <code>sortby=resultTime</code>.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cómo podemos filtrar las observaciones por una sola estación?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Añade <code>wigos_station_identifier=&lt;WSI&gt;</code> a la solicitud de la API.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cómo podemos recibir las observaciones como un CSV?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Añade <code>f=csv</code> a la solicitud de la API.</p>
</details>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>¿Cómo podemos mostrar una sola observación (id)?</p>
</div>
<details class="success">
<summary>Haz clic para revelar la respuesta</summary>
<p>Usando el identificador de característica de una solicitud de API contra las observaciones, consulta la API para <code>http://&lt;tu-host&gt;/oapi/collections/{collectionId}/items/{featureId}</code>, donde <code>{collectionId}</code> es el nombre de tu colección de observaciones y <code>{itemId}</code> es el identificador de la única observación de interés.</p>
</details>
<h2 id="es-practical-sessions-querying-data-using-the-wis2box-api-conclusion">Conclusión</h2>
<div class="admonition success">
<p class="admonition-title">¡Felicidades!</p>
<p>En esta sesión práctica, aprendiste cómo:</p>
<ul>
<li>usar la API de wis2box para consultar y filtrar tus estaciones</li>
<li>usar la API de wis2box para consultar y filtrar tus datos</li>
</ul>
</div></section></section>
                    <section class='print-page md-section' id='section-3' heading-number='3'>
                        <h1>Hojas de trucos<a class='headerlink' href='#section-3' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="es-cheatsheets-linux" heading-number="3.1"><h1 id="es-cheatsheets-linux-hoja-de-trucos-de-linux">Hoja de trucos de Linux</h1>
<h2 id="es-cheatsheets-linux-vision-general">Visión general</h2>
<p>Los conceptos básicos para trabajar en un sistema operativo Linux son <strong>archivos</strong> y <strong>directorios</strong> (carpetas) organizados en
una estructura de árbol dentro de un <strong>entorno</strong>.</p>
<p>Una vez que inicias sesión en un sistema Linux, estás trabajando en una <strong>shell</strong> en la que puedes trabajar con archivos y directorios,
ejecutando comandos que están instalados en el sistema. La shell Bash es una shell común y popular que
se encuentra típicamente en los sistemas Linux.</p>
<h2 id="es-cheatsheets-linux-bash">Bash</h2>
<h3 id="es-cheatsheets-linux-navegacion-de-directorios">Navegación de directorios</h3>
<ul>
<li>Ingresar a un directorio absoluto:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/dir1/dir2
</code></pre></div>
<ul>
<li>Ingresar a un directorio relativo:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>./somedir
</code></pre></div>
<ul>
<li>Subir un directorio:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>..
</code></pre></div>
<ul>
<li>Subir dos directorios:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>../..
</code></pre></div>
<ul>
<li>Moverse al directorio "home":</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>-
</code></pre></div>
<h3 id="es-cheatsheets-linux-gestion-de-archivos">Gestión de archivos</h3>
<ul>
<li>Listar archivos en el directorio actual:</li>
</ul>
<div class="highlight"><pre><span></span><code>ls
</code></pre></div>
<ul>
<li>Listar archivos en el directorio actual con más detalle:</li>
</ul>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-l
</code></pre></div>
<ul>
<li>Listar la raíz del sistema de archivos:</li>
</ul>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-l<span class="w"> </span>/
</code></pre></div>
<ul>
<li>Crear un archivo vacío:</li>
</ul>
<div class="highlight"><pre><span></span><code>touch<span class="w"> </span>foo.txt
</code></pre></div>
<ul>
<li>Crear un archivo desde un comando <code>echo</code>:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;hola&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>archivo-prueba.txt
</code></pre></div>
<ul>
<li>Ver el contenido de un archivo:</li>
</ul>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>archivo-prueba.txt
</code></pre></div>
<ul>
<li>Copiar un archivo:</li>
</ul>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>archivo1<span class="w"> </span>archivo2
</code></pre></div>
<ul>
<li>Comodines: operar con patrones de archivos:</li>
</ul>
<div class="highlight"><pre><span></span><code>ls<span class="w"> </span>-l<span class="w"> </span>arch*<span class="w">  </span><span class="c1"># coincide con archivo1 y archivo2</span>
</code></pre></div>
<ul>
<li>Concatenar dos archivos en un nuevo archivo llamado <code>nuevoarchivo</code>:</li>
</ul>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>archivo1<span class="w"> </span>archivo2<span class="w"> </span>&gt;<span class="w"> </span>nuevoarchivo
</code></pre></div>
<ul>
<li>Añadir otro archivo a <code>nuevoarchivo</code></li>
</ul>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>archivo3<span class="w"> </span>&gt;&gt;<span class="w"> </span>nuevoarchivo
</code></pre></div>
<ul>
<li>Eliminar un archivo:</li>
</ul>
<div class="highlight"><pre><span></span><code>rm<span class="w"> </span>nuevoarchivo
</code></pre></div>
<ul>
<li>Eliminar todos los archivos con la misma extensión de archivo:</li>
</ul>
<div class="highlight"><pre><span></span><code>rm<span class="w"> </span>*.dat
</code></pre></div>
<ul>
<li>Crear un directorio</li>
</ul>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>dir1
</code></pre></div>
<h3 id="es-cheatsheets-linux-encadenar-comandos-juntos-con-tuberias">Encadenar comandos juntos con tuberías</h3>
<p>Las tuberías permiten a un usuario enviar la salida de un comando a otro usando el símbolo de tubería <code>|</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;hola&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">&#39;s/hola/adiós/&#39;</span>
</code></pre></div>
<ul>
<li>Filtrar salidas de comandos usando grep:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;id,título&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>archivo-prueba.txt
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;1,pájaros&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>archivo-prueba.txt
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;2,peces&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>archivo-prueba.txt
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;3,gatos&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>archivo-prueba.txt

cat<span class="w"> </span>archivo-prueba.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>peces
</code></pre></div>
<ul>
<li>Ignorar mayúsculas y minúsculas:</li>
</ul>
<div class="highlight"><pre><span></span><code>grep<span class="w"> </span>-i<span class="w"> </span>PECES<span class="w"> </span>archivo-prueba.txt
</code></pre></div>
<ul>
<li>Contar líneas coincidentes:</li>
</ul>
<div class="highlight"><pre><span></span><code>grep<span class="w"> </span>-c<span class="w"> </span>peces<span class="w"> </span>archivo-prueba.txt
</code></pre></div>
<ul>
<li>Devolver salidas que no contienen la palabra clave:</li>
</ul>
<div class="highlight"><pre><span></span><code>grep<span class="w"> </span>-v<span class="w"> </span>pájaros<span class="w"> </span>archivo-prueba.txt
</code></pre></div>
<ul>
<li>Contar el número de líneas en <code>archivo-prueba.txt</code>:</li>
</ul>
<div class="highlight"><pre><span></span><code>wc<span class="w"> </span>-l<span class="w"> </span>archivo-prueba.txt
</code></pre></div>
<ul>
<li>Mostrar salida una pantalla a la vez:</li>
</ul>
<div class="highlight"><pre><span></span><code>more<span class="w"> </span>archivo-prueba.txt
</code></pre></div>
<p>...con controles:</p>
<ul>
<li>Desplazarse hacia abajo línea por línea: <em>enter</em></li>
<li>Ir a la siguiente página: <em>barra espaciadora</em></li>
<li>
<p>Regresar una página: <em>b</em></p>
</li>
<li>
<p>Mostrar las primeras 3 líneas del archivo:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>head<span class="w"> </span>-3<span class="w"> </span>archivo-prueba.txt
</code></pre></div>
<ul>
<li>Mostrar las últimas 2 líneas del archivo:</li>
</ul>
<div class="highlight"><pre><span></span><code>tail<span class="w"> </span>-2<span class="w"> </span>archivo-prueba.txt
</code></pre></div></section><section class="print-page" id="es-cheatsheets-docker" heading-number="3.2"><h1 id="es-cheatsheets-docker-hoja-de-trucos-de-docker">Hoja de trucos de Docker</h1>
<h2 id="es-cheatsheets-docker-vision-general">Visión general</h2>
<p>Docker permite la creación de entornos virtuales de manera aislada en apoyo de la virtualización de recursos informáticos. El concepto básico detrás de Docker es la contenerización, donde el software puede funcionar como servicios, interactuando con otros contenedores de software, por ejemplo.</p>
<p>El flujo de trabajo típico de Docker implica crear y construir <strong>imágenes</strong>, que luego se ejecutan como <strong>contenedores</strong> en vivo.</p>
<p>Docker se utiliza para ejecutar el conjunto de servicios que componen wis2box utilizando imágenes preconstruidas.</p>
<h3 id="es-cheatsheets-docker-gestion-de-imagenes">Gestión de imágenes</h3>
<ul>
<li>Listar imágenes disponibles</li>
</ul>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>image<span class="w"> </span>ls
</code></pre></div>
<ul>
<li>Actualizar una imagen:</li>
</ul>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>pull<span class="w"> </span>my-image:latest
</code></pre></div>
<ul>
<li>Eliminar una imagen:</li>
</ul>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>rmi<span class="w"> </span>my-image:local
</code></pre></div>
<h3 id="es-cheatsheets-docker-gestion-de-volumenes">Gestión de volúmenes</h3>
<ul>
<li>Listar todos los volúmenes creados:</li>
</ul>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>volume<span class="w"> </span>ls
</code></pre></div>
<ul>
<li>Mostrar información detallada de un volumen:</li>
</ul>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>volume<span class="w"> </span>inspect<span class="w"> </span>my-volume
</code></pre></div>
<ul>
<li>Eliminar un volumen:</li>
</ul>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>volume<span class="w"> </span>rm<span class="w"> </span>my-volume
</code></pre></div>
<ul>
<li>Eliminar todos los volúmenes no utilizados:</li>
</ul>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>volume<span class="w"> </span>prune
</code></pre></div>
<h3 id="es-cheatsheets-docker-gestion-de-contenedores">Gestión de contenedores</h3>
<ul>
<li>Mostrar una lista de contenedores actualmente en ejecución:</li>
</ul>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>ps
</code></pre></div>
<ul>
<li>Lista de todos los contenedores:</li>
</ul>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>ps<span class="w"> </span>-a
</code></pre></div>
<ul>
<li>Entrar al terminal interactivo de un contenedor en ejecución:</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>usa <code>docker ps</code> para usar el id del contenedor en el comando a continuación</p>
</div>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>my-container<span class="w"> </span>/bin/bash
</code></pre></div>
<ul>
<li>Eliminar un contenedor</li>
</ul>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>rm<span class="w"> </span>my-container
</code></pre></div>
<ul>
<li>Eliminar un contenedor en ejecución:</li>
</ul>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>rm<span class="w"> </span>-f<span class="w"> </span>my-container
</code></pre></div></section><section class="print-page" id="es-cheatsheets-wis2box" heading-number="3.3"><h1 id="es-cheatsheets-wis2box-hoja-de-referencia-rapida-de-wis2-en-una-caja">Hoja de referencia rápida de WIS2 en una caja</h1>
<h2 id="es-cheatsheets-wis2box-vision-general">Visión general</h2>
<p>wis2box se ejecuta como un conjunto de comandos de Docker Compose. El comando <code>wis2box-ctl.py</code> es una utilidad
(escrita en Python) para ejecutar comandos de Docker Compose fácilmente.</p>
<h2 id="es-cheatsheets-wis2box-esenciales-del-comando-wis2box">Esenciales del comando wis2box</h2>
<h3 id="es-cheatsheets-wis2box-iniciar-y-detener">Iniciar y detener</h3>
<ul>
<li>Iniciar wis2box:</li>
</ul>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>start
</code></pre></div>
<ul>
<li>Detener wis2box:</li>
</ul>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>stop
</code></pre></div>
<ul>
<li>Verificar que todos los contenedores de wis2box estén funcionando:</li>
</ul>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>status
</code></pre></div>
<ul>
<li>Iniciar sesión en un contenedor de wis2box (<em>wis2box-management</em> por defecto):</li>
</ul>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login
</code></pre></div>
<ul>
<li>Iniciar sesión en un contenedor específico de wis2box:</li>
</ul>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>wis2box-ctl.py<span class="w"> </span>login<span class="w"> </span>wis2box-api
</code></pre></div></section></section>
                    <section class='print-page md-section' id='section-4' heading-number='4'>
                        <h1>Plantillas csv2bufr<a class='headerlink' href='#section-4' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="es-csv2bufr-templates-aws-template" heading-number="4.1"><h1 id="es-csv2bufr-templates-aws-template-plantilla-csv2bufr-para-estaciones-meteorologicas-automaticas-que-reportan-datos-horarios-gbon">Plantilla csv2bufr para Estaciones Meteorológicas Automáticas que reportan datos horarios GBON</h1>
<p>La <strong>Plantilla AWS</strong> utiliza un formato CSV estandarizado para ingresar datos de Estaciones Meteorológicas Automáticas en apoyo a los requisitos de reporte de GBON. Esta plantilla de mapeo convierte datos CSV a la secuencia BUFR 301150, 307096.</p>
<p>El formato está destinado para uso con estaciones meteorológicas automáticas que reportan un número mínimo de parámetros, incluyendo presión, temperatura y humedad del aire, velocidad y dirección del viento y precipitación de manera horaria.</p>
<h2 id="es-csv2bufr-templates-aws-template-columnas-csv-y-descripcion">Columnas CSV y descripción</h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Units</th>
<th style="text-align: left;">Data type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">wsi_series</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">WIGOS identifier series</td>
</tr>
<tr>
<td style="text-align: left;">wsi_issuer</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">WIGOS issuer of identifier</td>
</tr>
<tr>
<td style="text-align: left;">wsi_issue_number</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">WIGOS issue number</td>
</tr>
<tr>
<td style="text-align: left;">wsi_local</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Character</td>
<td style="text-align: left;">WIGOS local identifier</td>
</tr>
<tr>
<td style="text-align: left;">wmo_block_number</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">WMO block number</td>
</tr>
<tr>
<td style="text-align: left;">wmo_station_number</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">WMO station number</td>
</tr>
<tr>
<td style="text-align: left;">station_type</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Type of observing station, encoding using code table 0 02 001 (set to 0, automatic)</td>
</tr>
<tr>
<td style="text-align: left;">year</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Year (UTC), the time of observation (based on the actual time the barometer is read)</td>
</tr>
<tr>
<td style="text-align: left;">month</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Month (UTC), the time of observation (based on the actual time the barometer is read)</td>
</tr>
<tr>
<td style="text-align: left;">day</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Day (UTC), the time of observation (based on the actual time the barometer is read)</td>
</tr>
<tr>
<td style="text-align: left;">hour</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Hour (UTC), the time of observation (based on the actual time the barometer is read)</td>
</tr>
<tr>
<td style="text-align: left;">minute</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Minute (UTC), the time of observation (based on the actual time the barometer is read)</td>
</tr>
<tr>
<td style="text-align: left;">latitude</td>
<td style="text-align: left;">degrees</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Latitude of the station (to 5 decimal places)</td>
</tr>
<tr>
<td style="text-align: left;">longitude</td>
<td style="text-align: left;">degrees</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Longitude of the station (to 5 decimal places)</td>
</tr>
<tr>
<td style="text-align: left;">station_height_above_msl</td>
<td style="text-align: left;">meters</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Height of the station ground above mean sea level (to 1 decimal place)</td>
</tr>
<tr>
<td style="text-align: left;">barometer_height_above_msl</td>
<td style="text-align: left;">meters</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Height of the barometer above mean sea level (to 1 decimal place), typically height of station ground plus the height of the sensor above local ground</td>
</tr>
<tr>
<td style="text-align: left;">station_pressure</td>
<td style="text-align: left;">Pa</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Pressure observed at the station level to the nearest 10 pascals</td>
</tr>
<tr>
<td style="text-align: left;">msl_pressure</td>
<td style="text-align: left;">Pa</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Pressure reduced to mean sea level to the nearest 10 pascals</td>
</tr>
<tr>
<td style="text-align: left;">geopotential_height</td>
<td style="text-align: left;">gpm</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Geoptential height expressed in geopotential meters (gpm) to 0 decimal places</td>
</tr>
<tr>
<td style="text-align: left;">thermometer_height</td>
<td style="text-align: left;">meters</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Height of thermometer or temperature sensor above the local ground to 2 decimal places</td>
</tr>
<tr>
<td style="text-align: left;">air_temperature</td>
<td style="text-align: left;">Kelvin</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Instantaneous air temperature to 2 decimal places</td>
</tr>
<tr>
<td style="text-align: left;">dewpoint_temperature</td>
<td style="text-align: left;">Kelvin</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Instantaneous dewpoint temperature to 2 decimal places</td>
</tr>
<tr>
<td style="text-align: left;">relative_humidity</td>
<td style="text-align: left;">%</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Instantaneous relative humidity to zero decimal places</td>
</tr>
<tr>
<td style="text-align: left;">method_of_ground_state_measurement</td>
<td style="text-align: left;">code table</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Method of observing the state of the ground, encoded using code table 0 02 176</td>
</tr>
<tr>
<td style="text-align: left;">ground_state</td>
<td style="text-align: left;">code table</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">State of the ground encoded using code table 0 20 062</td>
</tr>
<tr>
<td style="text-align: left;">method_of_snow_depth_measurement</td>
<td style="text-align: left;">code table</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Method of observing the snow depth encoded using code table 0 02 177</td>
</tr>
<tr>
<td style="text-align: left;">snow_depth</td>
<td style="text-align: left;">meters</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Snow depth at time of observation to 2 decimal places</td>
</tr>
<tr>
<td style="text-align: left;">precipitation_intensity</td>
<td style="text-align: left;">kg m-2 h-1</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Intensity of precipitation at time of observation to 5 decimal places</td>
</tr>
<tr>
<td style="text-align: left;">anemometer_height</td>
<td style="text-align: left;">meters</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Height of the anemometer above local ground  to 2 decimal place</td>
</tr>
<tr>
<td style="text-align: left;">time_period_of_wind</td>
<td style="text-align: left;">minutes</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Defines the time period over which the wind speed and direction have been averaged. Set to -10 to indicate a measurement period over the preceeding 10 minutes.</td>
</tr>
<tr>
<td style="text-align: left;">wind_direction</td>
<td style="text-align: left;">degrees</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Wind direction (at anemometer height) averaged from the caterisan components over the indicated time period, 0 decimal places</td>
</tr>
<tr>
<td style="text-align: left;">wind_speed</td>
<td style="text-align: left;">ms-1</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Wind speed (at anemometer height) averaged from the cartesian components over the indicated time period, 1 decimal place</td>
</tr>
<tr>
<td style="text-align: left;">maximum_wind_gust_direction_10_minutes</td>
<td style="text-align: left;">degrees</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Highest 3 second average over the preceeding 10 minutes, 0 decimal places</td>
</tr>
<tr>
<td style="text-align: left;">maximum_wind_gust_speed_10_minutes</td>
<td style="text-align: left;">ms-1</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Highest 3 second average over the preceeding 10 minutes, 1 decimal place</td>
</tr>
<tr>
<td style="text-align: left;">maximum_wind_gust_direction_1_hour</td>
<td style="text-align: left;">degrees</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Highest 3 second average over the preceeding hour, 0 decimal places</td>
</tr>
<tr>
<td style="text-align: left;">maximum_wind_gust_speed_1_hour</td>
<td style="text-align: left;">ms-1</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Highest 3 second average over the preceeding hour, 1 decimal place</td>
</tr>
<tr>
<td style="text-align: left;">maximum_wind_gust_direction_3_hours</td>
<td style="text-align: left;">degrees</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Highest 3 second average over the preceeding 3 hours, 0 decimal places</td>
</tr>
<tr>
<td style="text-align: left;">maximum_wind_gust_speed_3_hours</td>
<td style="text-align: left;">ms-1</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Highest 3 second average over the preceeding 3 hours, 1 decimal place</td>
</tr>
<tr>
<td style="text-align: left;">rain_sensor_height</td>
<td style="text-align: left;">meters</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Height of the rain gauge above local ground to 2 decimal place</td>
</tr>
<tr>
<td style="text-align: left;">total_precipitation_1_hour</td>
<td style="text-align: left;">kg m-2</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Total precipitation over the past hour, 1 decimal place</td>
</tr>
<tr>
<td style="text-align: left;">total_precipitation_3_hours</td>
<td style="text-align: left;">kg m-2</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Total precipitation over the past 3 hours, 1 decimal place</td>
</tr>
<tr>
<td style="text-align: left;">total_precipitation_6_hours</td>
<td style="text-align: left;">kg m-2</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Total precipitation over the past 6 hours, 1 decimal place</td>
</tr>
<tr>
<td style="text-align: left;">total_precipitation_12_hours</td>
<td style="text-align: left;">kg m-2</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Total precipitation over the past 12 hours, 1 decimal place</td>
</tr>
<tr>
<td style="text-align: left;">total_precipitation_24_hours</td>
<td style="text-align: left;">kg m-2</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Total precipitation over the past 24 hours, 1 decimal place</td>
</tr>
</tbody>
</table>
<h2 id="es-csv2bufr-templates-aws-template-ejemplo">Ejemplo</h2>
<p>Archivo CSV de ejemplo que se ajusta a la plantilla AWS: <a href="/sample-data/aws-example.csv">aws-example.csv</a>.</p></section><section class="print-page" id="es-csv2bufr-templates-daycli-template" heading-number="4.2"><h1 id="es-csv2bufr-templates-daycli-template-plantilla-csv2bufr-para-datos-climaticos-diarios-daycli">Plantilla csv2bufr para datos climáticos diarios (DAYCLI)</h1>
<p>La plantilla <strong>DAYCLI</strong> proporciona un formato CSV estandarizado para convertir datos climáticos diarios a la secuencia BUFR 307075.</p>
<p>El formato está destinado para su uso con Sistemas de Gestión de Datos Climáticos para publicar datos en WIS2, en apoyo a los requisitos de informes para observaciones climáticas diarias.</p>
<p>Esta plantilla mapea observaciones diarias de:</p>
<ul>
<li>Temperatura mínima, máxima y promedio durante un período de 24 horas</li>
<li>Precipitación total acumulada durante un período de 24 horas</li>
<li>Profundidad total de la nieve en el momento de la observación</li>
<li>Profundidad de nieve fresca durante un período de 24 horas</li>
</ul>
<p>Esta plantilla requiere metadatos adicionales con respecto a la plantilla simplificada de AWS: método de cálculo de la temperatura promedio; alturas del sensor y de la estación; exposición y clasificación de la calidad de la medición.</p>
<div class="admonition nota">
<p class="admonition-title">Acerca de la plantilla DAYCLI</p>
<p>Tenga en cuenta que la secuencia BUFR de DAYCLI se actualizará durante 2025 para incluir información adicional y banderas de control de calidad revisadas. La plantilla DAYCLI incluida en wis2box se actualizará para reflejar estos cambios. La OMM comunicará cuando el software de wis2box se actualice para incluir la nueva plantilla DAYCLI, para permitir a los usuarios actualizar sus sistemas en consecuencia.</p>
</div>
<h2 id="es-csv2bufr-templates-daycli-template-columnas-csv-y-descripcion">Columnas CSV y descripción</h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Units</th>
<th style="text-align: left;">Data Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">wsi_series</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">WIGOS Identifier series, set to 0 for stations</td>
</tr>
<tr>
<td style="text-align: left;">wsi_issuer</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">WIGOS Identifier issue, ISO 3 digit (number) country code or 20000 series</td>
</tr>
<tr>
<td style="text-align: left;">wsi_issue_number</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">WIGOS Identifier issue number</td>
</tr>
<tr>
<td style="text-align: left;">wsi_local</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Character</td>
<td style="text-align: left;">WIGOS Identifier local identifier, alphanumeric, max 16 characters</td>
</tr>
<tr>
<td style="text-align: left;">wmo_block_number</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">WMO block number for station 0 - 99</td>
</tr>
<tr>
<td style="text-align: left;">wmo_station_number</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">WMO station number 0 - 999</td>
</tr>
<tr>
<td style="text-align: left;">latitude</td>
<td style="text-align: left;">Degrees</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Latitude of the station (to 5 decimal places)</td>
</tr>
<tr>
<td style="text-align: left;">longitude</td>
<td style="text-align: left;">Degrees</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Longitude of the station (to 5 decimal places)</td>
</tr>
<tr>
<td style="text-align: left;">station_height_above_msl</td>
<td style="text-align: left;">Meters</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Height of the station ground above mean sea level (to 1 decimal place)</td>
</tr>
<tr>
<td style="text-align: left;">temperature_siting_classification</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Combined sensor siting and measurement quality classification (temperature). See references for siting classification</td>
</tr>
<tr>
<td style="text-align: left;">precipitation_siting_classification</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Combined sensor siting and measurement quality classification (precipitation). See references for siting classification</td>
</tr>
<tr>
<td style="text-align: left;">averaging_method</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Method used to calculate daily average temperature</td>
</tr>
<tr>
<td style="text-align: left;">year</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Year (UTC) of nominal reporting day</td>
</tr>
<tr>
<td style="text-align: left;">month</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Month (UTC) of nominal reporting day</td>
</tr>
<tr>
<td style="text-align: left;">day</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Day (UTC) of month for nominal reporting day</td>
</tr>
<tr>
<td style="text-align: left;">precipitation_day_offset</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Start of reporting period for precipitation, offset in days relative to nominal reporting day (-1 or 0)</td>
</tr>
<tr>
<td style="text-align: left;">precipitation_hour</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning hour (UTC) over which the precipitation is measured</td>
</tr>
<tr>
<td style="text-align: left;">precipitation_minute</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning minute (UTC) over which the precipitation is measured</td>
</tr>
<tr>
<td style="text-align: left;">precipitation_second</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning second (UTC) over which the precipitation is measured</td>
</tr>
<tr>
<td style="text-align: left;">precipitation</td>
<td style="text-align: left;">kg m-2</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Total accumulated precipitation over indicated 24 hour period (kg m-3, equivalent to mm)</td>
</tr>
<tr>
<td style="text-align: left;">precipitation_flag</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Quality control flag for total accumulated precipitation</td>
</tr>
<tr>
<td style="text-align: left;">fresh_snow_day_offset</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Start of reporting period for fresh snow depth, offset in days relative to nominal reporting day (-1 or 0)</td>
</tr>
<tr>
<td style="text-align: left;">fresh_snow_hour</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning hour (UTC) over which the fresh snow depth is measured</td>
</tr>
<tr>
<td style="text-align: left;">fresh_snow_minute</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning minute (UTC) over which the fresh snow depth is measured</td>
</tr>
<tr>
<td style="text-align: left;">fresh_snow_second</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning second (UTC) over which the fresh snow depth is measured</td>
</tr>
<tr>
<td style="text-align: left;">fresh_snow_depth</td>
<td style="text-align: left;">Meters</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Fresh snow depth over indicated 24 hour period (m, 2 d.p.)</td>
</tr>
<tr>
<td style="text-align: left;">fresh_snow_depth_flag</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Quality control flag for the fresh snow depth</td>
</tr>
<tr>
<td style="text-align: left;">total_snow_day_offset</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Start of reporting period for total snow depth, offset in days relative to nominal reporting day (-1 or 0)</td>
</tr>
<tr>
<td style="text-align: left;">total_snow_hour</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning hour (UTC) over which the total snow depth is measured</td>
</tr>
<tr>
<td style="text-align: left;">total_snow_minute</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning minute (UTC) over which the total snow depth is measured</td>
</tr>
<tr>
<td style="text-align: left;">total_snow_second</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning second (UTC) over which the total snow depth is measured</td>
</tr>
<tr>
<td style="text-align: left;">total_snow_depth</td>
<td style="text-align: left;">Meters</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Total snow depth over indicated 24 hour period (m, 2 d.p.)</td>
</tr>
<tr>
<td style="text-align: left;">total_snow_depth_flag</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Quality control flag for the total snow depth</td>
</tr>
<tr>
<td style="text-align: left;">thermometer_height</td>
<td style="text-align: left;">Meters</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Height of thermometer above local ground level (m)</td>
</tr>
<tr>
<td style="text-align: left;">maximum_temperature_day_offset</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Start of reporting period for maximum temperature, offset in days relative to nominal reporting day (-1 or 0)</td>
</tr>
<tr>
<td style="text-align: left;">maximum_temperature_hour</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning hour (UTC) over which the maximum temmperature is measured</td>
</tr>
<tr>
<td style="text-align: left;">maximum_temperature_minute</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning minute (UTC) over which the maximum temperature is measured</td>
</tr>
<tr>
<td style="text-align: left;">maximum_temperature_second</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning second (UTC) over which the maximum temperature is measured</td>
</tr>
<tr>
<td style="text-align: left;">maximum_temperature</td>
<td style="text-align: left;">Kelvin</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Maximum temperature over indicated 24 hour period (K, 2 d.p.)</td>
</tr>
<tr>
<td style="text-align: left;">maximum_temperature_flag</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Quality control flag for the maximum temperature</td>
</tr>
<tr>
<td style="text-align: left;">minimum_temperature_day_offset</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Start of reporting period for minimum temperature, offset in days relative to nominal reporting day (-1 or 0)</td>
</tr>
<tr>
<td style="text-align: left;">minimum_temperature_hour</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning hour (UTC) over which the minimum temmperature is measured</td>
</tr>
<tr>
<td style="text-align: left;">minimum_temperature_minute</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning minute (UTC) over which the minimum temperature is measured</td>
</tr>
<tr>
<td style="text-align: left;">minimum_temperature_second</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning second (UTC) over which the minimum temperature is measured</td>
</tr>
<tr>
<td style="text-align: left;">minimum_temperature</td>
<td style="text-align: left;">Kelvin</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Minimum temperature over indicated 24 hour period (K, 2 d.p.)</td>
</tr>
<tr>
<td style="text-align: left;">minimum_temperature_flag</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Quality control flag for the minimum temperature</td>
</tr>
<tr>
<td style="text-align: left;">average_temperature_day_offset</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Start of reporting period for average temperature, offset in days relative to nominal reporting day (-1 or 0)</td>
</tr>
<tr>
<td style="text-align: left;">average_temperature_hour</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning hour (UTC) over which the average temmperature is measured</td>
</tr>
<tr>
<td style="text-align: left;">average_temperature_minute</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning minute (UTC) over which the average temperature is measured</td>
</tr>
<tr>
<td style="text-align: left;">average_temperature_second</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Beginning second (UTC) over which the average temperature is measured</td>
</tr>
<tr>
<td style="text-align: left;">average_temperature</td>
<td style="text-align: left;">Kelvin</td>
<td style="text-align: left;">Decimal</td>
<td style="text-align: left;">Average temperature over indicated 24 hour period (K, 2 d.p.)</td>
</tr>
<tr>
<td style="text-align: left;">average_temperature_flag</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">Quality control flag for the average temperature</td>
</tr>
</tbody>
</table>
<h2 id="es-csv2bufr-templates-daycli-template-metodo-de-promedio">Método de promedio</h2>
<table>
<thead>
<tr>
<th style="text-align: right;">Integer</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Average of minimum and maximum temperatures</td>
</tr>
<tr>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Average of 8 tri-hourly observations</td>
</tr>
<tr>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Average of 24 hourly observations</td>
</tr>
<tr>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Weighted average of three observations</td>
</tr>
<tr>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Weighted average of three observations, as well as the minimum and maximum values</td>
</tr>
<tr>
<td style="text-align: right;">5</td>
<td style="text-align: left;">AWS complete integration from minute data</td>
</tr>
<tr>
<td style="text-align: right;">6</td>
<td style="text-align: left;">Average of 4 six-hourly observations</td>
</tr>
</tbody>
</table>
<h2 id="es-csv2bufr-templates-daycli-template-bandera-de-calidad">Bandera de calidad</h2>
<table>
<thead>
<tr>
<th style="text-align: right;">Integer</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Data checked and declared good</td>
</tr>
<tr>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Data checked and declared suspect</td>
</tr>
<tr>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Data checked and declared aggregated</td>
</tr>
<tr>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Data checked and declared out of instrument range</td>
</tr>
<tr>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Data checked and declared aggregated and out of instrument range</td>
</tr>
<tr>
<td style="text-align: right;">5</td>
<td style="text-align: left;">Parameter is not measured at the station</td>
</tr>
<tr>
<td style="text-align: right;">6</td>
<td style="text-align: left;">Daily value not provided</td>
</tr>
<tr>
<td style="text-align: right;">7</td>
<td style="text-align: left;">Data unchecked</td>
</tr>
</tbody>
</table>
<h2 id="es-csv2bufr-templates-daycli-template-referencias-para-la-clasificacion-de-ubicacion">Referencias para la clasificación de ubicación</h2>
<p><a href="https://library.wmo.int/idviewer/35625/839">Referencia para "clasificación de ubicación de temperatura"</a>.</p>
<p><a href="https://library.wmo.int/idviewer/35625/840">Referencia para "clasificación de ubicación de precipitación"</a>.</p>
<h2 id="es-csv2bufr-templates-daycli-template-ejemplo">Ejemplo</h2>
<p>Archivo CSV de ejemplo que se ajusta a la plantilla DAYCLI: <a href="/sample-data/daycli-example.csv">daycli-example.csv</a>.</p></section></section></div><style>.print-site-enumerate-headings #es > h1:before { content: '1 ' }

                .print-site-enumerate-headings #es h2 { counter-reset: counter-es-3 1; counter-increment: counter-es-2 }
                .print-site-enumerate-headings #es h2:before { content: '1.' counter(counter-es-2) ' ' }
            
                .print-site-enumerate-headings #es h3 { counter-reset: ; counter-increment: counter-es-3 }
                .print-site-enumerate-headings #es h3:before { content: '1.' counter(counter-es-2) '.' counter(counter-es-3) ' ' }
            
.print-site-enumerate-headings #section-2 > h1:before { content: '2 ' }
.print-site-enumerate-headings #es-practical-sessions-connecting-to-wis2-over-mqtt > h1:before { content: '2.1 ' }

                .print-site-enumerate-headings #es-practical-sessions-connecting-to-wis2-over-mqtt h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-connecting-to-wis2-over-mqtt-3 }
                .print-site-enumerate-headings #es-practical-sessions-connecting-to-wis2-over-mqtt h3:before { content: '2.1.' counter(counter-es-practical-sessions-connecting-to-wis2-over-mqtt-3) ' ' }
            
.print-site-enumerate-headings #es-practical-sessions-accessing-your-student-vm > h1:before { content: '2.2 ' }

                .print-site-enumerate-headings #es-practical-sessions-accessing-your-student-vm h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-accessing-your-student-vm-3 }
                .print-site-enumerate-headings #es-practical-sessions-accessing-your-student-vm h3:before { content: '2.2.' counter(counter-es-practical-sessions-accessing-your-student-vm-3) ' ' }
            
.print-site-enumerate-headings #es-practical-sessions-initializing-wis2box > h1:before { content: '2.3 ' }

                .print-site-enumerate-headings #es-practical-sessions-initializing-wis2box h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-initializing-wis2box-3 }
                .print-site-enumerate-headings #es-practical-sessions-initializing-wis2box h3:before { content: '2.3.' counter(counter-es-practical-sessions-initializing-wis2box-3) ' ' }
            
.print-site-enumerate-headings #es-practical-sessions-configuring-wis2box-datasets > h1:before { content: '2.4 ' }

                .print-site-enumerate-headings #es-practical-sessions-configuring-wis2box-datasets h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-configuring-wis2box-datasets-3 }
                .print-site-enumerate-headings #es-practical-sessions-configuring-wis2box-datasets h3:before { content: '2.4.' counter(counter-es-practical-sessions-configuring-wis2box-datasets-3) ' ' }
            
.print-site-enumerate-headings #es-practical-sessions-configuring-station-metadata > h1:before { content: '2.5 ' }

                .print-site-enumerate-headings #es-practical-sessions-configuring-station-metadata h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-configuring-station-metadata-3 }
                .print-site-enumerate-headings #es-practical-sessions-configuring-station-metadata h3:before { content: '2.5.' counter(counter-es-practical-sessions-configuring-station-metadata-3) ' ' }
            
.print-site-enumerate-headings #es-practical-sessions-monitoring-wis2-notifications > h1:before { content: '2.6 ' }

                .print-site-enumerate-headings #es-practical-sessions-monitoring-wis2-notifications h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-monitoring-wis2-notifications-3 }
                .print-site-enumerate-headings #es-practical-sessions-monitoring-wis2-notifications h3:before { content: '2.6.' counter(counter-es-practical-sessions-monitoring-wis2-notifications-3) ' ' }
            
.print-site-enumerate-headings #es-practical-sessions-converting-synop-data-to-bufr > h1:before { content: '2.7 ' }

                .print-site-enumerate-headings #es-practical-sessions-converting-synop-data-to-bufr h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-converting-synop-data-to-bufr-3 }
                .print-site-enumerate-headings #es-practical-sessions-converting-synop-data-to-bufr h3:before { content: '2.7.' counter(counter-es-practical-sessions-converting-synop-data-to-bufr-3) ' ' }
            
.print-site-enumerate-headings #es-practical-sessions-converting-synop-data-to-bufr-form > h1:before { content: '2.8 ' }

                .print-site-enumerate-headings #es-practical-sessions-converting-synop-data-to-bufr-form h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-converting-synop-data-to-bufr-form-3 }
                .print-site-enumerate-headings #es-practical-sessions-converting-synop-data-to-bufr-form h3:before { content: '2.8.' counter(counter-es-practical-sessions-converting-synop-data-to-bufr-form-3) ' ' }
            
.print-site-enumerate-headings #es-practical-sessions-converting-csv-data-to-bufr > h1:before { content: '2.9 ' }

                .print-site-enumerate-headings #es-practical-sessions-converting-csv-data-to-bufr h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-converting-csv-data-to-bufr-3 }
                .print-site-enumerate-headings #es-practical-sessions-converting-csv-data-to-bufr h3:before { content: '2.9.' counter(counter-es-practical-sessions-converting-csv-data-to-bufr-3) ' ' }
            
.print-site-enumerate-headings #es-practical-sessions-automating-data-ingestion > h1:before { content: '2.10 ' }

                .print-site-enumerate-headings #es-practical-sessions-automating-data-ingestion h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-automating-data-ingestion-3 }
                .print-site-enumerate-headings #es-practical-sessions-automating-data-ingestion h3:before { content: '2.10.' counter(counter-es-practical-sessions-automating-data-ingestion-3) ' ' }
            
.print-site-enumerate-headings #es-practical-sessions-adding-gts-headers-to-wis2-notifications > h1:before { content: '2.11 ' }

                .print-site-enumerate-headings #es-practical-sessions-adding-gts-headers-to-wis2-notifications h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-adding-gts-headers-to-wis2-notifications-3 }
                .print-site-enumerate-headings #es-practical-sessions-adding-gts-headers-to-wis2-notifications h3:before { content: '2.11.' counter(counter-es-practical-sessions-adding-gts-headers-to-wis2-notifications-3) ' ' }
            
.print-site-enumerate-headings #es-practical-sessions-datasets-with-access-control > h1:before { content: '2.12 ' }

                .print-site-enumerate-headings #es-practical-sessions-datasets-with-access-control h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-datasets-with-access-control-3 }
                .print-site-enumerate-headings #es-practical-sessions-datasets-with-access-control h3:before { content: '2.12.' counter(counter-es-practical-sessions-datasets-with-access-control-3) ' ' }
            
.print-site-enumerate-headings #es-practical-sessions-downloading-data-from-wis2 > h1:before { content: '2.13 ' }

                .print-site-enumerate-headings #es-practical-sessions-downloading-data-from-wis2 h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-downloading-data-from-wis2-3 }
                .print-site-enumerate-headings #es-practical-sessions-downloading-data-from-wis2 h3:before { content: '2.13.' counter(counter-es-practical-sessions-downloading-data-from-wis2-3) ' ' }
            
.print-site-enumerate-headings #es-practical-sessions-discovering-datasets-from-wis2-gdc > h1:before { content: '2.14 ' }

                .print-site-enumerate-headings #es-practical-sessions-discovering-datasets-from-wis2-gdc h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-discovering-datasets-from-wis2-gdc-3 }
                .print-site-enumerate-headings #es-practical-sessions-discovering-datasets-from-wis2-gdc h3:before { content: '2.14.' counter(counter-es-practical-sessions-discovering-datasets-from-wis2-gdc-3) ' ' }
            
.print-site-enumerate-headings #es-practical-sessions-querying-data-using-the-wis2box-api > h1:before { content: '2.15 ' }

                .print-site-enumerate-headings #es-practical-sessions-querying-data-using-the-wis2box-api h3 { counter-reset: ; counter-increment: counter-es-practical-sessions-querying-data-using-the-wis2box-api-3 }
                .print-site-enumerate-headings #es-practical-sessions-querying-data-using-the-wis2box-api h3:before { content: '2.15.' counter(counter-es-practical-sessions-querying-data-using-the-wis2box-api-3) ' ' }
            
.print-site-enumerate-headings #section-3 > h1:before { content: '3 ' }
.print-site-enumerate-headings #es-cheatsheets-linux > h1:before { content: '3.1 ' }

                .print-site-enumerate-headings #es-cheatsheets-linux h3 { counter-reset: ; counter-increment: counter-es-cheatsheets-linux-3 }
                .print-site-enumerate-headings #es-cheatsheets-linux h3:before { content: '3.1.' counter(counter-es-cheatsheets-linux-3) ' ' }
            
.print-site-enumerate-headings #es-cheatsheets-docker > h1:before { content: '3.2 ' }

                .print-site-enumerate-headings #es-cheatsheets-docker h3 { counter-reset: ; counter-increment: counter-es-cheatsheets-docker-3 }
                .print-site-enumerate-headings #es-cheatsheets-docker h3:before { content: '3.2.' counter(counter-es-cheatsheets-docker-3) ' ' }
            
.print-site-enumerate-headings #es-cheatsheets-wis2box > h1:before { content: '3.3 ' }

                .print-site-enumerate-headings #es-cheatsheets-wis2box h3 { counter-reset: ; counter-increment: counter-es-cheatsheets-wis2box-3 }
                .print-site-enumerate-headings #es-cheatsheets-wis2box h3:before { content: '3.3.' counter(counter-es-cheatsheets-wis2box-3) ' ' }
            
.print-site-enumerate-headings #section-4 > h1:before { content: '4 ' }
.print-site-enumerate-headings #es-csv2bufr-templates-aws-template > h1:before { content: '4.1 ' }

                .print-site-enumerate-headings #es-csv2bufr-templates-aws-template h3 { counter-reset: ; counter-increment: counter-es-csv2bufr-templates-aws-template-3 }
                .print-site-enumerate-headings #es-csv2bufr-templates-aws-template h3:before { content: '4.1.' counter(counter-es-csv2bufr-templates-aws-template-3) ' ' }
            
.print-site-enumerate-headings #es-csv2bufr-templates-daycli-template > h1:before { content: '4.2 ' }

                .print-site-enumerate-headings #es-csv2bufr-templates-daycli-template h3 { counter-reset: ; counter-increment: counter-es-csv2bufr-templates-daycli-template-3 }
                .print-site-enumerate-headings #es-csv2bufr-templates-daycli-template h3:before { content: '4.2.' counter(counter-es-csv2bufr-templates-daycli-template-3) ' ' }
            </style>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 World Meteorological Organization
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "/wis2docs/", "features": ["navigation.indexes", "content.code.copy"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
        <script src="../js/print-site.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>